{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Seguran\u00e7a Cibern\u00e9tica","text":"<p>As ditas anota\u00e7\u00f5es est\u00e3o organizadas numa ordem de enciclop\u00e9dia, entretanto, essa ordem difere da ordem recomendada para leitura. Abaixo ser\u00e1 listada a ordem para leitura, com suas devidas localiza\u00e7\u00f5es.</p>"},{"location":"#introducao","title":"Introdu\u00e7\u00e3o","text":"<ul> <li>Valores de Seguran\u00e7a</li> <li>Introdu\u00e7\u00e3o a Controles de Seguran\u00e7a</li> <li> <p>Zero Trust Architecture</p> </li> <li> <p>Seguran\u00e7a de redes</p> </li> <li> <p>Introdu\u00e7\u00e3o a conceitos de Red Team</p> </li> <li> <p>Introdu\u00e7\u00e3o a conceitos de Blue Team e SOC</p> </li> <li> <p>Introdu\u00e7\u00e3o a Gest\u00e3o de Risco</p> </li> <li> <p>Introdu\u00e7\u00e3o aos frameworks, agentes, padr\u00f5es e organiza\u00e7\u00f5es</p> </li> </ul>"},{"location":"#ataques","title":"Ataques","text":""},{"location":"#seguranca-de-redes","title":"Seguran\u00e7a de Redes","text":"<ol> <li> <p>Firewall, NSFW, UTM e WAF</p> </li> <li> <p>Proxie e Web Proxy</p> </li> <li> <p>Burp Suite, Owasp Zap</p> </li> </ol>"},{"location":"COMPTIA_README/","title":"Estudo Orientado a CompTIA Sec+","text":""},{"location":"COMPTIA_README/#dominio-1-conceitos-gerais-de-seguranca","title":"Dom\u00ednio 1: Conceitos Gerais de Seguran\u00e7a","text":"<ul> <li>Introdu\u00e7\u00e3o a Controles de Seguran\u00e7a</li> <li>Valores de Seguran\u00e7a</li> <li>Identidade vs Autentica\u00e7\u00e3o vs Autoriza\u00e7\u00e3o</li> <li>Fatores de Autentica\u00e7\u00e3o</li> <li>Zero Trust Architecture</li> <li>Padr\u00f5es Procedurais</li> <li>Seguran\u00e7a F\u00edsica</li> <li>Honey</li> <li>Introdu\u00e7\u00e3o a Criptografia e tecnologias relacionadas.</li> </ul>"},{"location":"COMPTIA_README/#dominio-2-ameacas-vulnerabilidades-e-mitigacoes","title":"Dom\u00ednio 2: Amea\u00e7as, Vulnerabilidades e Mitiga\u00e7\u00f5es","text":"<ul> <li>Atores de amea\u00e7as e suas motiva\u00e7\u00f5es</li> <li>Vetores de Ataque e de Amea\u00e7a</li> <li>Ataques ao Vetor Humano</li> <li>Introdu\u00e7\u00e3o a Vulnerabilidades</li> <li></li> </ul>"},{"location":"COMPTIA_README/#dominio-3-arquitetura-de-seguranca","title":"Dom\u00ednio 3: Arquitetura de Seguran\u00e7a","text":""},{"location":"COMPTIA_README/#dominio-4-operacao-de-seguranca","title":"Dom\u00ednio 4: Opera\u00e7\u00e3o de Seguran\u00e7a","text":""},{"location":"COMPTIA_README/#dominio-5-gerenciamento-e-supervisao-de-programas-de-seguranca","title":"Dom\u00ednio 5: Gerenciamento e Supervis\u00e3o de Programas de Seguran\u00e7a","text":""},{"location":"controles-introducao/","title":"Introdu\u00e7\u00e3o a Controles de Seguran\u00e7a","text":"<p>Controles de seguran\u00e7a s\u00e3o contramedidas usadas para lidar com falhas e ataques contra a seguran\u00e7a do sistema e da empresa (https://www.ibm.com/topics/security-controls).</p> <p>Os controles de seguran\u00e7a dificilmente previnem todas as amea\u00e7as de um sistema.</p> <p>Um controle normalmente \u00e9 referente a previnir ou mitigar uma ou algumas estrat\u00e9gias ou motiva\u00e7\u00f5es. Diferentes grupos de ataque tem diferente motiva\u00e7\u00f5es e estrat\u00e9gias, logo \u00e9 indicado ter m\u00faltiplos controles de seguran\u00e7a. Nesse ponto, h\u00e1 a introdu\u00e7\u00e3o do conceito de Defesa em Profundidade, que visa proteger o sistema em diferentes pontos dele atrav\u00e9s de m\u00faltiplas camadas e formas de defesa.</p>"},{"location":"controles-introducao/#de-quem-estamos-nos-defendendo","title":"De quem estamos nos defendendo?","text":"<p>Uma introdu\u00e7\u00e3o \u00e0s categorias de atacantes/atores maliciosos e suas estrat\u00e9gias. Esse n\u00e3o \u00e9 o foc desse m\u00f3dilo e s\u00f3 serve para dar um contexto</p> <ul> <li>Script Kiddies: iniciantes em atividades hacker que normalmente utilizam scripts prontos postados na internet para atacar. N\u00e3o costumam ter tanta motiva\u00e7\u00e3o quanto os outros tipos de atores.</li> <li>Hacktivistas: motivados por algum tipo de causa.</li> <li>Crime Organizado: grupo sofitiscado com recursos para realizar ataques mais personalizados. Seus objetivos normalmente permeam ganho financeiro.</li> <li>Advanced Persistant Threats (APTs): grupos organizados e normalmente patrocinados por na\u00e7\u00f5es. Eles s\u00e3\u00f5 diferentes dos grupos de crime organizados comuns por terem mais recursos dispon\u00edveis e serem ainda mais sofisticados. Seus objetivos podem ser os mesmos dos crimes organizados, mas tamb\u00e9m podem permear objetivos pol\u00edticos, como atrapalhar algum evento pol\u00edtico, espionagem, fraudar algum processo estatal, etc.</li> <li>Insiders: ator malicioso que atua dentro da empresa. Suas motiva\u00e7\u00f5es podem ser variadas, como vingan\u00e7a \u00e0 empresa, espionagem, ganho financeiro individual, etc.</li> <li>Competidores (de neg\u00f3cios): nem sempre s\u00e3o uma amea\u00e7a cibern\u00e9tica, mas podem atuar como uma ao plantar informa\u00e7\u00f5es falsas, espionagem, etc.</li> </ul>"},{"location":"controles-introducao/#categorias-de-controles-de-seguranca","title":"Categorias de Controles de Seguran\u00e7a","text":"<ul> <li>Administrativo/Gerencial: padr\u00f5es, pol\u00edticas, processos, gerenciamento de riscos, controles regulat\u00f3rios, etc.</li> <li>Operacional/T\u00e9cnico: Antivirus(AV), prote\u00e7\u00e3o de endpoint, controle de acesso, etc.</li> <li>F\u00edsico: trancas, c\u00e2meras de vigil\u00e2ncia, guardas, etc.</li> </ul> <p>\u00c9 interessante como amea\u00e7as cibern\u00e9ticas usam estrat\u00e9gias parecidas com a seguran\u00e7a f\u00edsica.</p> <pre><code>NOTA: conceitos utilizados pela COMPTIA Sec+. Outras certifica\u00e7\u00f5es usam outros termos para descrever essas categorias.\n</code></pre>"},{"location":"controles-introducao/#tipos-de-controles-de-seguranca","title":"Tipos de Controles de Seguran\u00e7a","text":"<ul> <li>Dissuasivas/desencorajadoras: desencoraja pessoas de realizarem a\u00e7\u00f5es perigosas. Exemplos: avisos de monitoramento, placas de perigo, etc</li> <li>Preventivas: impede que pessoas realizem a\u00e7\u00f5es perigosas. Exemplos: guardas, antivirus, etc</li> <li>Detectoras: detecta a\u00e7\u00f5es perigosas e inicia algum tipo de a\u00e7\u00e3o a partir disso. Exemplos: detector de movimento com alarme, alerta, coletor de logs, etc.</li> <li>Corretivas / Regeneradoras: controles usados para fazer um sistema voltar ao normal ou recuperar informa\u00e7\u00f5es perdidas. Exemplos: backups, atualizar antivirus, instalar patches, etc.</li> <li>Compensat\u00f3rias: controles que contemplam alternativas seguras para outros controles em que h\u00e1 alguma dificuldade de implementa\u00e7\u00e3o. Exemplos: possibilitar guardas ao inv\u00e9s de um sistema robusto de controle de acesso de entradas de um pr\u00e9dio.</li> </ul>"},{"location":"frameworks/","title":"Frameworks","text":""},{"location":"frameworks/#kill-chain-2011","title":"Kill Chain (2011)","text":""},{"location":"frameworks/#kali-linux","title":"Kali Linux","text":""},{"location":"frameworks/#nist-framework","title":"NIST framework","text":""},{"location":"frameworks/#diamond-model-201","title":"Diamond Model (201)","text":""},{"location":"frameworks/#mitre-attck-2014","title":"Mitre Att&amp;ck (2014)","text":""},{"location":"frameworks/#iso-27001-e-27002","title":"ISO 27.001 e 27.002","text":""},{"location":"frameworks/#dama","title":"Dama","text":""},{"location":"frameworks/#cobit","title":"COBIT","text":""},{"location":"frameworks/#itl","title":"ITL","text":""},{"location":"honey/","title":"Tecnologias de Detec\u00e7\u00e3o Disruptivas - Honeypots","text":"<p>S\u00e3o armadilhas para hackers, uma isca de fato. \u00c9 um sistema feito propostitalmente para atrair os atacantes, esperando suas tentativas de ataque e invas\u00e3o. Os honeypots fazem parecer que t\u00eam informa\u00e7\u00f5es sens\u00edveis ou confidenciais, al\u00e9m de demonstrarem ter em sua prote\u00e7\u00e3o interna algumas vulnerabilidades propositais para serem exploradas pelos hackers.</p> <p>Essas m\u00e1quinas posuem um monitoramento gigante para estudar com aten\u00e7\u00e3o as t\u00e9cnicas e procedimentos dos atacantes que caem na armadilha.</p> <p>Um honeypot deve ser feito com o maior cuidado, j\u00e1 que se n\u00e3o for propriamente isolado, pode gerar danos fora do honeypot. Por isso um honeypot normalmente \u00e9 isolado em uma DMZ pr\u00f3pria, com um monitoramento extenso e discreto de atividades. </p> <p>Ferramentas conhecidas de honeypot - Cowrie: SSH honeypot escrito em Python que simula um Bash Linux.</p>"},{"location":"honey/#mail-honeypot","title":"Mail honeypot","text":"<p>\u00c9 um endere\u00e7o de email armadilha. Ele \u00e9 enviado em lugares que possivelmente rastream os emails e incluem a conta em listas de phishing. Assim, \u00e9 garantido que os emails recebidos nessa conta muito provavelmente s\u00e3o phishing.</p>"},{"location":"honey/#database-honeypot","title":"Database honeypot","text":"<p>Uma base de dados normalmente parecida com a arquitetura parecida com a base de dados em produ\u00e7\u00e3o. Ela \u00e9 liberada sem informa\u00e7\u00f5es cruciais a fim de receber pentestes e ataques hackers para melhorar a prote\u00e7\u00e3o da base em produ\u00e7\u00e3o.</p>"},{"location":"honey/#malware-honeypot","title":"Malware honeypot","text":"<p>Aplicativos e programas criados especificamente para atrair ataques de malwares e rastrear suas a\u00e7\u00f5es.</p>"},{"location":"honey/#spider-honeypot","title":"Spider honeypot","text":"<p>Websites que visam rastrar spiders (rastreadores web)</p>"},{"location":"honey/#honeneyfile","title":"Honeneyfile","text":"<p>Arquivos individuais com o prop\u00f3sito de atrair atacantes para depois monitorar seus comportamentos.</p>"},{"location":"honey/#honeynet","title":"Honeynet","text":"<p>Honeypots em alta escala. Uma rede inteira configurada para atrair atacantes e monitorar suas atividades. Dessa forma, ela \u00e9 composta por v\u00e1rios equipamentos e servidores.</p>"},{"location":"honey/#honeywall","title":"Honeywall","text":"<p>Firewall configurado propostitalmente para atrair atacantes e monitorar suas atividades. Bem comum na borda de Honeynets. \u00c9 comum que esses firewalls tenham vulnerabilidades suficientes para permitir a passagem do atacante, mas n\u00e3o sem monitor\u00e1-lo e realizar a captura, controle e an\u00e1lise de seus dados.</p> <p>A an\u00e1lise de dados costuma ser feita em conjunto a um servidor de gerenciamento de dados. \u00c9 comum que essa an\u00e1lise envolva a inspe\u00e7\u00e3o de pacotes e podemos dividi-la em 3 tipos:</p> <ul> <li>Rasa: Shallow Packet Inpsection (SPI)</li> <li>M\u00e9dia: Medium Packet Inspection (MPI)</li> <li>Profunda: Deep Packet Inspection (DPI)</li> </ul> <p>A inspe\u00e7\u00e3o rasa (SPI) costuma se limitar a inspecionar o cabe\u00e7alho do pacote. J\u00e1 a inspe\u00e7\u00e3o m\u00e9dia (MPI) trabalha com mais metadados do pacote al\u00e9m do cabe\u00e7alho. Por fim, a inspe\u00e7\u00e3o profunda (DPI) costuma para os cabe\u00e7alhos, metadados e o pr\u00f3prio conte\u00fado do pacote.</p>"},{"location":"risco/","title":"Gest\u00e3o de Risco","text":"<ol> <li>Invent\u00e1rio de Ativos</li> <li>Ranking de ativos</li> <li>Determinar exposi\u00e7\u00f5es e vulnerabildiades</li> <li>Reconhecer e monitorar amea\u00e7as relevantes</li> <li><code>Risco = vulnerabilidade * amea\u00e7a</code> para cada ativo</li> <li>Caso o risco for maior que o custo, criar plano de corre\u00e7\u00e3o</li> <li>KPI - definir m\u00e9tricas pessoais para acompanhamento da corre\u00e7\u00e3o.</li> <li>Gaps de compliance.</li> <li>Organizar os or\u00e7amentos.</li> </ol>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/","title":"Seguran\u00e7a da Informa\u00e7\u00e3o","text":""},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#lgpd-lei-geral-de-protecao-de-dados","title":"LGPD - Lei Geral de Prote\u00e7\u00e3o de Dados","text":"<p>Em vigor desde 2020, \u00e9 uma lei com o objetivo de proteger os dados pessoais e privados dos cidad\u00e3os brasileiros de forma transparente e moral. \u00c9 inspirada numa lei europeia com o mesmo prop\u00f3sito, a ... .</p>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#privacidade","title":"Privacidade","text":"<p>Direito individual de mander as inform\u00e7\u00f5es privadas confidenciais, ter o controle disso.</p>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#protecao-de-dados-pessoais","title":"Prote\u00e7\u00e3o de dados pessoais","text":"<p>Diretrizes sobre utiliza\u00e7\u00e3o e respeito aos dados pessoais. Dados pessoais \u00e9 qualquer informa\u00e7\u00e3o que \"te identifique\". N\u00e3o precisa identificar diretamente!</p> <ul> <li>Dado pessoal sens\u00edvel: dado pessoal que abre margem para julgamentos discriminat\u00f3rios.</li> <li>Dado anonimizado: dado pessoal que perde a capacidade de identificar a pessoa. Usado em pesquisas, algor\u00edtmos, etc. Um dado anonimizado j\u00e1 n\u00e3o \u00e9 mais um dado pessoal, portanto sai da LGPD.</li> </ul>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#tratamento","title":"Tratamento","text":"<p>Tratamento \u00e9 toda a\u00e7\u00e3o realizada sobre um dado pessoal. Ela \u00e9 prontamente regulamentada pela LGPD.</p>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#agentes","title":"Agentes","text":"<ul> <li>Controlador de dados pessoais: agente de tratamento que toma decis\u00f5es sobre o uso dos dados pessoais. \u00c9 o guardi\u00e3o dos dados e responde em eventuais repara\u00e7\u00f5es aos titulares.</li> <li>Operador de dados pessoais: agente de tratamento que realiza as a\u00e7\u00f5es e tratamentos de um dado pessoal.</li> <li>Titular: pessoa de quem os dados pessoais se referem.</li> <li>Autoridade Supervisora: \u00f3rg\u00e3o respons\u00e1vel por supervisionar o respeito, moral e \u00e9tica a respeito da utiliza\u00e7\u00e3o, armazenamento e compartilhamento dos dados pessoais.</li> <li>Encarregado dos Dados (DPO): \u00e9 o ponto de contato entre controlador e operador com o titular dos dados. Ele deve zelar pelo cumprimento das leis de prote\u00e7\u00e3o de dados, receber as reclama\u00e7\u00f5es e prestar esclarecimentos aos titulares.</li> </ul>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#por-que-e-tao-importante","title":"Por que \u00e9 t\u00e3o importante?","text":"<p>Empresas e \u00f3rg\u00e3os s\u00e3o responsabilizados por quaisquer infra\u00e7\u00e3o na LGPD, seja um vazamento, invas\u00e3o da infraestrutura dos fornecedores ou uso indevido. Devido a essa caracter\u00edstica, \u00e9 sempre interessante as empresas buscarem proteger os dados a qualquer custos.</p>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#bases-legais-de-tratamento","title":"Bases Legais de Tratamento","text":"<p>Motivos, objetivos e meios com bases legais para justificar o tratamento dos dados.</p> <p>Muito detalhado nos artigos 7 at\u00e9 11.</p> <p>Entre as bases, que n\u00e3o necessitam de pedido formal de uso ao usu\u00e1rio est\u00e3o:</p> <ul> <li>Defesa de direitos</li> <li>Leg\u00edtimo Interesse (a base mais curiosa e sens\u00edvel)</li> <li>Prote\u00e7\u00e3o do Cr\u00e9dito</li> <li>Execu\u00e7\u00e3o de Contratos</li> <li>Prote\u00e7\u00e3o \u00e0 vida</li> <li>Tutela da Sa\u00fade</li> <li>Obriga\u00e7\u00e3o Legal</li> <li>Pesquisa por \u00d3rg\u00e3o</li> <li>Pol\u00edtica P\u00fablica</li> <li>Consentimento</li> </ul>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#anpd-agencia-nacional-de-protecao-de-dados","title":"ANPD - Ag\u00eancia Nacional de Prote\u00e7\u00e3o de Dados","text":"<p>\u00d3rg\u00e3o regulador brasileiro da LGPD. \u00c9 novo e ainda est\u00e1 redigindo alguns procedimentos.</p> <p>Atualmente ele \u00e9 o respons\u00e1vel por aplicar multas e san\u00e7\u00f5es em empresas, al\u00e9m de </p>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#dlp-data-loss-prevention","title":"DLP - Data Loss Prevention","text":"<p>Previnir a perda de dados</p>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#artefatos-de-seguranca-da-informacao","title":"Artefatos de Seguran\u00e7a da Informa\u00e7\u00e3o","text":""},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#itdp-inventario-de-tratamento-de-dados-pessoais","title":"ITDP - Invent\u00e1rio de Tratamento de Dados Pessoais","text":"<p>\u00c9 um artefato de documenta\u00e7\u00e3o do tratamento de dados pessoais.</p> <p>Estrutura: 1. Dados pessoais tratados 2. Quantidade de titulares afetados 3. Indicadores     - \u00cdndice de compartilahemnto     - Dados massificados 4. Base legal e justificativa</p>"},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#ripd-relatorio-de-impacto-a-protecao-de-dados-pessoais","title":"RIPD - Relat\u00f3rio de impacto \u00e0 prote\u00e7\u00e3o de dados pessoais","text":""},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#nrpd-norma-de-retencao-de-dados-pessoais","title":"NRPD - Norma de Reten\u00e7\u00e3o de dados pessoais","text":""},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#lai-lei-de-acesso-a-informacao-lei-12527","title":"LAI - Lei de Acesso \u00e0 Informa\u00e7\u00e3o (Lei 12.527)","text":""},{"location":"seguran%C3%A7a-da-informa%C3%A7%C3%A3o/#pnsi-politica-nacional-de-seguranca-da-informacao-decreto-9637","title":"PNSI - Pol\u00edtica Nacional de Seguran\u00e7a da Informa\u00e7\u00e3o (Decreto 9.637)","text":""},{"location":"sobre-incidentes/","title":"Incidentes","text":""},{"location":"sobre-incidentes/#ids","title":"IDS","text":""},{"location":"sobre-incidentes/#ips","title":"IPS","text":""},{"location":"sobre-incidentes/#idps","title":"IDPS","text":""},{"location":"sobre-incidentes/#resposta-a-incidentes","title":"Resposta a Incidentes","text":""},{"location":"sobre-incidentes/#siem","title":"SIEM","text":"<p>Respons\u00e1vel por monitorar e analisar eventos a fim de detectar ofensas (poss\u00edveis eventos que podem gerar problemas de seguran\u00e7a).</p>"},{"location":"sobre-incidentes/#soar","title":"SOAR","text":"<p>Integra o SIEM e outras ferramentas para n\u00e3o s\u00f3 monitorar e analisar eventos que possam se tornar ofensas, como tamb\u00e9m orquestrar a tomada de medidas automatizadas para reagir a essas ofensas. Por isso</p>"},{"location":"sobre-incidentes/#rtir","title":"RTIR","text":""},{"location":"valores/","title":"Valores de Seguran\u00e7a","text":""},{"location":"valores/#triade-cia-cid-original","title":"Tr\u00edade CIA / CID Original","text":"<ul> <li>Confidencialidade: garantir que pessoas n\u00e3o autorizadas n\u00e3o tenham acesso a documentos n\u00e3o autorizados. Exemplos de controles que ajudam a garantir confidencialidade: criptografia, 2FA, airgaps, etc.</li> <li>Integridade: garantir que uma mensagem n\u00e3o tenha seu conte\u00fado alterado durante o transporte. Exemplos de controles que ajudam a garantir integridade: sistema de controle de acesso, controle de vers\u00e3o, permiss\u00f5es de arquivo, etc.</li> <li>Disponibilidade (Avaliability): manter o servi\u00e7o funcionando nos respectivos per\u00edodos de tempo pr\u00e9-decididos. Exemplos de controles que ajudam a garantir disponibilidade: atualiza\u00e7\u00f5es, backup, etc.</li> </ul>"},{"location":"valores/#outros-pilares","title":"Outros pilares","text":"<ul> <li>N\u00e3o rep\u00fadio: ao realizar algo, ningu\u00e9m pode dizer que n\u00e3o foi voc\u00ea que fez aquilo. Exemplos de controles que ajudam a garantir n\u00e3o rep\u00fadio: gera\u00e7\u00e3o de logs, prote\u00e7\u00e3o de logs, infraestrutura de chave p\u00fablica (PKI), assinaturas digitais, etc.</li> <li>Privacidade: direito individual de manter as informa\u00e7\u00f5es privadas confidenciais.</li> <li>Controle de Acesso: garantir que somente as pessoas certas tem acesso as coisas certas. Atualmente \u00e9 orientado pela arquitetura Zero Trust.</li> <li>Legalidade: respeita as leis dos pa\u00edses que atuam, \u00f3rg\u00e3os de controle, boas pr\u00e1ticas de mercado, etc.</li> </ul>"},{"location":"valores/#aaa","title":"AAA","text":"<ul> <li>Autentication: Provar que voc\u00ea \u00e9 quem diz ser.</li> <li>Autorization: Provar que voc\u00ea tem permiss\u00e3o para acessar aquilo que quer.</li> <li>Accounting: Provar que voc\u00ea de fato fez aquilo, ou seja, registro de logs.</li> </ul>"},{"location":"AD/","title":"Active Directory","text":""},{"location":"AD/defesa/","title":"Defesas para ADs","text":""},{"location":"AD/defesa/#modelo-em-camadas-tiering","title":"Modelo em camadas (tiering)","text":"<p>Controle destinado a impedir escalamento de privil\u00e9gios vertical. O controle separa as m\u00e1quinas e contas na empresa em 3 tiers (tier 0 a tier 2). Contas de tiers mais acima (tier 0 \u00e9 o mais alto) nunca podem entrar/fazer login/rebaixar-se ao ambiente dos tiers mais abaixo. Dessa forma, caso m\u00e1quinas dos tiers mais abaixo estejam comprometidas, a conta de tier mais alto n\u00e3o ser\u00e1 comprometida ao entrar em um computador j\u00e1 comprometido.</p> <p>OBSERVA\u00c7\u00c3O: m\u00e1quinas de tier mais baixo ainda podem chamar m\u00e1quinas de tier mais alto, mas s\u00f3 chamar e retornar. </p> <p>V\u00e1rios mecanismos precisam ser acionados para transformar o modelo em camadas uma realidade. Entre elas: - Pol\u00edticas de Grupo: principalmente para impedir login de tiers mais altos em m\u00e1quinas e contas de tier mais baixo. - PAW (Privileged Access Workstarion): m\u00e1quina espec\u00edfica em que \u00e9 permitido login por contas de tier 0. - LAPS + 2FA</p> <p></p>"},{"location":"AD/defesa/#tier-2","title":"Tier 2","text":"<p>Pode acessar recursos de camadas superiores, mas nunca administram nada de camadas acima.</p>"},{"location":"AD/defesa/#tier-1","title":"Tier 1","text":"<p>S\u00e3o todas aquelas m\u00e1quinas e contas que n\u00e3o s\u00e3o nem tier 0 e nem tier 2. Normalmente seu comprometimento permite movimenta\u00e7\u00e3o lateral e algum poder sobre algum conjunto espec\u00edfico de recursos.</p> <p>Exemplos de m\u00e1quinas tradicionalmente de tier 0: - Contas Administradoras - M\u00e1quinas Adminstradoras - Grupos Administradores - Servidor de Banco de Dados - Servidor de Arquivos - DFS - Servidores Web - Contas de usu\u00e1rio administradoras de \u00e1reas espec\u00edficas (segmenta\u00e7\u00e3o).</p>"},{"location":"AD/defesa/#tier-0","title":"Tier 0","text":"<p>M\u00e1quinas que podem diretamente comprometer todo o dom\u00ednio se acessados pelo atacante.</p> <p>Exemplos de m\u00e1quinas tradicionalmente de tier 0: - Contas Administradoras de Dom\u00ednio (DA) - Controladores de Dom\u00ednio (DC) - CA - PKI - Lithnet Access Manager (LAM) - VMware vCenter - Servidor de Backup</p> <p>Para classificar corretamente quais ativos s\u00e3o tier 0, considere usar a tabela: https://specterops.github.io/TierZeroTable/</p> <p>A SpectreOps \u00e9 amplamente conhecida no meio de seguran\u00e7a de EAD.</p>"},{"location":"AD/defesa/#microsoft-windows-laps-2fa","title":"Microsoft Windows LAPS + 2FA","text":"<p>Antes do LAPS, todas as m\u00e1quinas do dom\u00ednio que tinham um admnistrador local possuiam a mesma senha para essa conta. Logo, ao descobrir a senha de administrador local de uma m\u00e1quina, era poss\u00edvel escalar privil\u00e9gios para administrador da m\u00e1quina e mover-se lateralmente atrav\u00e9s das m\u00e1quinas.</p> <p>Atualmente h\u00e1 duas vers\u00f5es mais relevantes do Windows LAPS, a legada e a nova.</p> <p>O LAPS legado, ao instalar, muda o esquema de dados do AD ao criar 2 novos atributos para criar senhas \u00fanicas para cada administrador e com tempo de expira\u00e7\u00e3o.</p> <p>O novo Windows LAPS exige um sistema operacional mais atual (&gt;= Windows 10 e &gt;= Windows Server 2019)</p>"},{"location":"COMPTIA_only/padroes_procedurais/","title":"Padr\u00f5es Procedurais","text":"<p>Relativo aos padr\u00f5es procedurais que um profissional de seguran\u00e7a pode lidar no seu dia a dia, seja em rela\u00e7\u00e3o a processos de neg\u00f3cios, aprova\u00e7\u00f5es, dia-a-dia, opera\u00e7\u00f5es, documenta\u00e7\u00e3o ou controle de vers\u00e3o. Conceitos, explica\u00e7\u00f5es e ferramentas s\u00e3o descritas nesse m\u00f3dulo para ajudar o leitor a lidar com esses processos.</p>"},{"location":"COMPTIA_only/padroes_procedurais/#processo-de-aprovacao","title":"Processo de Aprova\u00e7\u00e3o","text":"<p>Processo em que uma a\u00e7\u00e3o, atividade ou decis\u00e3o \u00e9 levada para ser aprovada ou n\u00e3o dentro de uma empresa. Normalmente quem aprova s\u00e3o aqueles que det\u00e9m mais responsabilidade na empresa, ou seja, as pessoas de maiores cargos.</p> <p>Um processo de aprova\u00e7\u00e3o padronizado tende a permitir uma tomada de decis\u00e3o mais veloz e certeira. Normalmente um processo de entiquetagem \u00e9 utilizado no processo de aprova\u00e7\u00e3o, com cada pedido de aprova\u00e7\u00e3o sendo um t\u00edquete. Utilizando um sistema padronizado assim, independente de ser manual ou aprovado, \u00e9 necess\u00e1rio uma s\u00e9rie de recursos, como: * Cadeia de aprova\u00e7\u00e3o. * Detalhes suficientes exigidos no t\u00edquete. * Processo de notifica\u00e7\u00e3o. * Revis\u00e3o global de mudan\u00e7a. * Notifica\u00e7\u00e3o/Tratamento de Colis\u00e3o sobre mudan\u00e7as.</p> <p>\u00c9 necess\u00e1rio que donos e stakeholders (ao menos os mais cr\u00edticos para essa decis\u00e3o) estejam envolvidos no processo de aprova\u00e7\u00e3o e em sua revis\u00e3o. An\u00e1lises de impacto devem ter seus riscos avaliados e notificados a todos esses envolvidos, assim como os resultados de teste, caso testes ocorram.</p>"},{"location":"COMPTIA_only/padroes_procedurais/#donos","title":"Donos","text":"<p>Em empresas grandes, um ou mais funcion\u00e1rios normalmente s\u00e3o \"donas\" de  um processo ou ferramenta. Um processo de posse bem definido notifica os donos dos processos e ferramentas toda vez que alguma mudan\u00e7a na empresa impacta aquilo que possuem.</p>"},{"location":"COMPTIA_only/padroes_procedurais/#parte-interessada-stakeholders","title":"Parte Interessada (Stakeholders)","text":"<p>Stakeholders s\u00e3o a parte interessada em rela\u00e7\u00e3o \u00e0s empresas e produtos e, de forma mais formal e restrita, s\u00e3o normalmente aqueles que os financiam. Eles podem ou n\u00e3o possuir a empresa ou serem donas do produto. Empresas maduras notificam seus stakeholders sobre mudan\u00e7as e not\u00edcias que podem impactar suas decis\u00f5es de modo a estabelecer e manter uma rela\u00e7\u00e3o de confian\u00e7a.</p>"},{"location":"COMPTIA_only/padroes_procedurais/#analise-de-impacto","title":"An\u00e1lise de impacto","text":"<p>Toda a\u00e7\u00e3o ou poss\u00edvel a\u00e7\u00e3o (interna e externa) numa empresa deveria acompanhar an\u00e1lises de impacto. Uma an\u00e1lise adequada lista quais sistemas podem ser afetados pela mudan\u00e7a, o n\u00edvel de impacto e melhor e pior cen\u00e1rio resultantes.</p>"},{"location":"COMPTIA_only/padroes_procedurais/#resultados-de-teste","title":"Resultados de Teste","text":"<p>\u00c9 poss\u00edvel realizar testes e incluir seus resultados na an\u00e1lise de impacto. Incluir o n\u00edvel de dificuldade da a\u00e7\u00e3o a partir dos testes e procedimentos de roll-back.</p>"},{"location":"COMPTIA_only/padroes_procedurais/#janela-de-manutencao","title":"Janela de Manuten\u00e7\u00e3o","text":"<p>Definir e notificar aos interessados sobre a/o/as/os: * dura\u00e7\u00e3o de tempo estimada de manuten\u00e7\u00e3o * intervalo de hor\u00e1rio em que ocorre * procedimentos de valida\u00e7\u00e3o * procedimentos de roll-back * crit\u00e9rio de sucesso</p>"},{"location":"COMPTIA_only/padroes_procedurais/#standard-operating-procedures-sop","title":"Standard Operating Procedures (SOP)","text":"<p>Toda mudan\u00e7a e decis\u00e3o possui procedimentos listados no Method Of Procedure (MOP). J\u00e1 o SOP possui todas as informa\u00e7\u00f5es e conceitos ditos nesse m\u00f3dulo, inclusive o MOP.</p> <p>Um SOP lista uma s\u00e9rie de procedimentos ou ao menos dire\u00e7\u00f5es para seguir sobre como os procedimentos s\u00e3o feitos naquela empresa.</p>"},{"location":"COMPTIA_only/padroes_procedurais/#implicacoes-tecnicas","title":"Implica\u00e7\u00f5es t\u00e9cnicas","text":"<p>Conceitos, procedimentos e recursos relacionado a implica\u00e7\u00f5es t\u00e9cnicas.</p> <ul> <li>Listas de Permiss\u00e3o/Recusa: Listas de pessoas, sistemas, itens e outros elementos permitidos ou n\u00e3o em um contexto ou local devido a implica\u00e7\u00f5es t\u00e9cnicas.</li> <li>Atividades Restritas: atividades que possam necessitar de autoriza\u00e7\u00e3o pr\u00e9via de algu\u00e9m mais em cima na cadeia hier\u00e1rquica para ser realizada.</li> <li>Downtime:<ul> <li>Planejada: mais comum em janelas de manuten\u00e7\u00e3o e por isso devem ser previamente comunicadas.</li> <li>N\u00e3o Planejada.</li> </ul> </li> <li>Service/App Restart: um restart pode demorar muito tempo em alguns sistemas e portanto precisam ser consideradas e notificadas.</li> <li>Aplica\u00e7\u00f5es Legadas: aplica\u00e7\u00f5es que poderiam ter suas tecnologias ou metodologias por outras mais adequadas. Normalmente aplica\u00e7\u00f5es legadas s\u00e3o antigas e muitas empresas n\u00e3o planejam troc\u00e1-las visto que a dificuldade t\u00e9cnica para isso pode ser alta e os riscos altos.</li> <li>Depend\u00eancias: servi\u00e7os, aplicativos, tecnologias e t\u00e9cnicas dos quais o seu produto depende. S\u00e3o os lugares dos quais o seu produto tira informa\u00e7\u00e3o e envia informa\u00e7\u00e3o.</li> </ul> <p>Se o seu produto, como um banco de dados, for uma depend\u00eancia de um produto que outro departamento est\u00e1 trabalhando, lembre-se que mudan\u00e7as no seu produto devem ser notificadas.</p>"},{"location":"COMPTIA_only/padroes_procedurais/#documentacao","title":"Documenta\u00e7\u00e3o","text":"<p>Deve ser regularmente atualizada em tempo real, ou ao menos o mais pr\u00f3ximo que conseguir a partir da implementa\u00e7\u00e3o das modifica\u00e7\u00f5es. Sejam diagramas que foram atualizados ou pol\u00edticas que foram redigidas.</p>"},{"location":"COMPTIA_only/padroes_procedurais/#controle-de-versao","title":"Controle de Vers\u00e3o","text":"<p>Salva as mudan\u00e7as geradas num projeto e portanto \u00e9 uma \u00f3tima estrat\u00e9gia de roll-back. Normalmente utilizada em DevOps. Costuma salvar cada vers\u00e3o atrav\u00e9s de um padr\u00e3o de versionamento. O mais comum \u00e9:</p> <p>x.y.z</p> <p>x = n\u00famero de vers\u00e3o maior. Esse n\u00famero aumenta conforme mudan\u00e7as cr\u00edticas e grandes s\u00e3o realizadas no projeto. Mudan\u00e7as de arquitetura, novas grandes adi\u00e7\u00f5es de capacidades s\u00e3o exemplos de mudan\u00e7as assim. y = n\u00famero de vers\u00e3o menor. Esse n\u00famero aumenta conforme menores mudan\u00e7as s\u00e3o realizadas no projeto. Pequenas adi\u00e7\u00f5es e exclus\u00f5es de recursos e capacidades s\u00e3o exemplos de mudan\u00e7as assim. z = n\u00famero de vers\u00e3o que representa uma atualiza\u00e7\u00e3o para corrigir bugs.</p>"},{"location":"COMPTIA_only/seguranca-fisica/","title":"Controle de Acesso - Seguran\u00e7a F\u00edsica","text":""},{"location":"COMPTIA_only/seguranca-fisica/#sensores","title":"Sensores","text":""},{"location":"COMPTIA_only/seguranca-fisica/#sensor-de-pressao-infravermelha","title":"Sensor de Press\u00e3o Infravermelha","text":""},{"location":"COMPTIA_only/seguranca-fisica/#sensor-de-microondas","title":"Sensor de Microondas","text":""},{"location":"COMPTIA_only/seguranca-fisica/#sensor-ultrassonico","title":"Sensor Ultrass\u00f4nico","text":""},{"location":"COMPTIA_only/seguranca-fisica/#cerca","title":"Cerca","text":""},{"location":"COMPTIA_only/seguranca-fisica/#postes-de-amarracao-bollards","title":"Postes de Amarra\u00e7\u00e3o (Bollards)","text":""},{"location":"COMPTIA_only/seguranca-fisica/#vestibulo-de-controle-de-acesso","title":"Vest\u00edbulo de Controle de Acesso","text":""},{"location":"COMPTIA_only/seguranca-fisica/#guardas","title":"Guardas","text":""},{"location":"COMPTIA_only/seguranca-fisica/#luz-automatica","title":"Luz autom\u00e1tica","text":""},{"location":"COMPTIA_only/seguranca-fisica/#cartao-de-acesso","title":"Cart\u00e3o de Acesso","text":""},{"location":"COMPTIA_only/seguranca-fisica/#vigilancia-em-video-cctv","title":"Vigil\u00e2ncia em V\u00eddeo (CCTV)","text":""},{"location":"ataque/ataques/","title":"Ataques","text":""},{"location":"ataque/ataques/#classificacao-de-ataques","title":"Classifica\u00e7\u00e3o de ataques","text":"<p>S\u00e3o 3:</p> <ul> <li>Amea\u00e7as conhecidas: normalmente combatidas atrav\u00e9s da verifica\u00e7\u00e3o do hash dos malwares.</li> <li>Zero Day: ataques novos ou n\u00e3o catalogados. Seu combate depende do monitoramento dos comportamentos e a\u00e7\u00f5es no sistema.</li> <li>Advanced Persistent Threats (APT): o terror das empresas com TI, organizado pelo crime organizado.<ul> <li>Advanced: ataques avan\u00e7ados e especializados, adaptando-se a defesas pr\u00e9-existentes no sistema e usando ataques zero-day.</li> <li>Persistent: tem um objetivo e alvos espec\u00edficos e n\u00e3o saem do sistema at\u00e9 conseguir. Por isso costumam ficar muito tempo no sistema buscando vulnerabilidades que ajudem a alcan\u00e7ar os objetivos. Para isso, usam poucos ataques para tentarem n\u00e3o chamar muita aten\u00e7\u00e3o.</li> </ul> </li> </ul>"},{"location":"ataque/ataques/#piramide-da-dor","title":"Pir\u00e2mide da Dor","text":""},{"location":"ataque/ataques/#ataques-comuns","title":"Ataques comuns:","text":""},{"location":"ataque/ataques/#cross-site-scripting-xss","title":"Cross Site Scripting (XSS)","text":"<p>Ataques XSS se aproveitam de inputs e recursos da aplica\u00e7\u00e3o para inserir scripts Javascript na aplica\u00e7\u00e3o.</p>"},{"location":"ataque/ataques/#sql-injection","title":"SQL Injection","text":"<p>Quando se aproveita de certos inputs e recursos da aplica\u00e7\u00e3o para inserir c\u00f3digo SQL que acaba sendo executado pelo servidor. C\u00f3digos SQL podem exp\u00f4r informa\u00e7\u00f5es confidenciais de um servidor.</p>"},{"location":"ataque/ataques/#dos-ddos","title":"DoS / DDoS","text":"<p>Ataque de Nega\u00e7\u00e3o de servi\u00e7o realizado por um ou mais computadores / servidores. Realizado atrav\u00e9s de uma sobrecarga de requisi\u00e7\u00f5es a um servidor de forma t\u00e3o r\u00e1pida que o servidor n\u00e3o consegue lidar e para de funcionar.</p>"},{"location":"ataque/ataques/#malware","title":"Malware","text":"<p>Software e c\u00f3digos maliciosos. Ao serem executados, podem danificar seriamente o sistema.</p>"},{"location":"ataque/ataques/#phishing-spear-phishing","title":"Phishing / Spear Phishing","text":""},{"location":"ataque/ataques/#engenharia-social","title":"Engenharia Social","text":"<p>Usa da comunica\u00e7\u00e3o para</p>"},{"location":"ataque/ataques/#ransomware","title":"Ransomware","text":"<p>O terror das empresas. \u00c9 um malware que encripta os seus dados do computador e pede dinheiro em troca de uma poss\u00edvel devolu\u00e7ao dos dados. Detalhe: mesmo pagando, muitas vezes os dados n\u00e3o podem ser recuperados.</p>"},{"location":"ataque/atores/","title":"Atores de Amea\u00e7a","text":""},{"location":"ataque/atores/#de-quem-estamos-nos-defendendo","title":"De quem estamos nos defendendo?","text":""},{"location":"ataque/atores/#script-kiddies","title":"Script Kiddies","text":"<p>Iniciantes em atividades hacker, normalmente atra\u00eddos pelo desafio de \"hackear algu\u00e9m\". Normalmente s\u00f3 querem ver at\u00e9 onde conseguem chegar. \u00c9 comum utilizarem scripts e ferramentas prontas postados na internet para atacar, deixando de lado ataques mais customiz\u00e1veis.</p> <p>Costumam n\u00e3o ser afiliados a nenhum grupo hacker e portanto possuem poucos recursos.</p>"},{"location":"ataque/atores/#crime-organizado","title":"Crime Organizado","text":"<p>Grupos com alta capadidade t\u00e9cnica de ataque e com recursos para ataques mais personalizados. Seus objetivos normalmente permeam ganho financeiro.</p> <p>Ataques de crimes organizados costumam ser sorrateiros e lentos/persistentes. Eles roubam informa\u00e7\u00e3o pessoal ap\u00f3s invadirem e a vende na dark web.</p>"},{"location":"ataque/atores/#advanced-persistant-threats-apts","title":"Advanced Persistant Threats (APTs)","text":"<p>Grupos organizados e normalmente patrocinados por na\u00e7\u00f5es. Eles s\u00e3o diferentes dos grupos de crime organizados comuns por terem mais recursos dispon\u00edveis e serem ainda mais sofisticados.</p> <p>Seus objetivos podem ser os mesmos dos crimes organizados, mas tamb\u00e9m podem permear objetivos pol\u00edticos, tendo como alvos entidades governamentais ou comerciais. Entre os ataques mais comuns, est\u00e3o: - Espionagem - Roubo de dados e IP. - Sabotagem - Guerra Cibern\u00e9tica</p> <p>APTs normalmente s\u00e3o sorrateiros e lentos/persistentes, normalmente encadeando ataques por v\u00e1rios meses sem ser dectado. Eles mapeam a rede ou sistema que infectaram, identificam pontos cr\u00edticos, abrangem seu ataque, exportam dados e propiedades intelectuais e no de 0.5 a 2 anos, saem do sistemas, muitas vezes de forma conflituosa (ransomware).</p> <p>Definitamente \u00e9 uma das categorias de atores maliciosos mais temida pelas empresas mundo \u00e0 fora.</p>"},{"location":"ataque/atores/#hacktivistas","title":"Hacktivistas","text":"<p>Motivados por algum tipo de causa, seja ideol\u00f3gica, pol\u00edtica, social, ambiental, etc.</p> <p>Com a inten\u00e7\u00e3o de passarem sua mensagem ou gerarem sua revolta o quanto antes e em momentos chave, hackitivistas n\u00e3o costumam ser pacientes ou sorrateiros. Seus ataques incluem a nega\u00e7\u00e3o de servi\u00e7o \u00e0s m\u00e1quinas (DoS), roubo de dados e manipula\u00e7\u00e3o de p\u00e1ginas web (para passar suas mensagens e causas).</p>"},{"location":"ataque/atores/#insiders","title":"Insiders","text":"<pre><code>\"US-CERT avisa que 70% dos rouvos de IP s\u00e3o causados pelo envolvimento de *insiders*.\"\n</code></pre> <p>Ator malicioso que atua dentro da empresa. Suas motiva\u00e7\u00f5es podem ser variadas, como vingan\u00e7a \u00e0 empresa, espionagem oferecida por um competidor, ganho financeiro individual, etc. Enquanto um APT usa muito de seu tempo para estudar e entender como funciona o ambiente tecnol\u00f3gico e negocial interno de uma empresa, um insider muitas vezes j\u00e1 sabe de tudo isso sem precisar de todo esse tempo, o que o torna ainda mais perigoso. Seus acessos a sistemas da empresa tamb\u00e9m podem ser leg\u00edtimos, mesmo gerando dano.</p> <p>Pode acontecer de um ataque gerado por pessoal interno n\u00e3o ser um insider, mas sim uma configura\u00e7\u00e3o impr\u00f3pria ou mal uso de ferramentas de um funcion\u00e1rio leg\u00edtimo.</p>"},{"location":"ataque/atores/#competidores-de-negocios","title":"Competidores (de neg\u00f3cios)","text":"<p>Nem sempre s\u00e3o uma amea\u00e7a cibern\u00e9tica, mas podem ser quando motivados pelo ganho financeiro. Para tentarem ganhar vantagem do competidor concorrente no mercado, ataques incluem: * Sabotagem (plantar informa\u00e7\u00f5es falsas) * Espionagem * Roubo de segredos, IPs e propriedade intelectual</p>"},{"location":"ataque/atores/#shadow-it","title":"Shadow IT","text":"<p>Equipe ou setor da empresa que desenvolve tecnologia sem ter a devida autoriza\u00e7\u00e3o ou aval para tal. \u00c9 comum que a Shadow IT acabe n\u00e3o seguindo os padr\u00f5es estabelecidos pela empresa, incluindo os padr\u00f5es de seguran\u00e7a, o que, por esse e outros motivos, tende a ocasionar vulnerabilidades a empresa que muitas vezes ela nem sabe que existe.</p>"},{"location":"ataque/ferramentas/","title":"Ferramentas de Pentest","text":""},{"location":"ataque/ferramentas/#web-pentest-ferramentas-completas","title":"Web Pentest - Ferramentas completas","text":"<ul> <li>Burp Suite</li> <li>OWASP ZAP</li> </ul>"},{"location":"ataque/ferramentas/#funcionalidades","title":"Funcionalidades:","text":"<ul> <li>Web-Proxy: </li> <li>Spider (crwaling)</li> <li>Scanner: an\u00e1lise de vulenrabilidades</li> <li>Intruder: ataques personalizados</li> <li>Repeater (modifica\u00e7\u00e3o de requisi\u00e7\u00f5es)</li> <li>Encoder e Decoder: transforma\u00e7\u00e3o de dados usando bases e codifica\u00e7\u00f5es conhecidas.</li> </ul>"},{"location":"ataque/ferramentas/#modos","title":"Modos","text":"<ul> <li>Modo passivo: finge ser um usu\u00e1rio comum, buscando informa\u00e7\u00f5es dispon\u00edveis da p\u00e1gina e vulnerabilidades. Aqui agem muito as funcionalidades de Spider, Repeater, Decoder, Encoder e at\u00e9 alguns Scanners discretos.<ul> <li>Legabilidade: cada caso \u00e9 um caso. Procure as regula\u00e7\u00f5es do servi\u00e7o analisado e busque altoriza\u00e7\u00f5es. Caso n\u00e3o tenha altoriza\u00e7\u00e3o, n\u00e3o fa\u00e7a. Caso n\u00e3o saiba se tem, n\u00e3o \u00e9 recomendadoao menos limite-se a ferramentas n\u00e3o danosas de pura an\u00e1lise e s\u00f3 realize a\u00e7\u00f5es que n\u00e3o demonstrem inten\u00e7\u00e3o de ataque.</li> <li>Ferramentas exclusivas: Shodan</li> </ul> </li> <li>Modo ativo: </li> </ul>"},{"location":"ataque/ferramentas/#reconhecimento-intrusivo-pentest","title":"Reconhecimento Intrusivo - Pentest","text":"<p>Mapeamento da p\u00e1gina, conex\u00f5es e rede.</p>"},{"location":"ataque/ferramentas/#desvantagens","title":"Desvantagens","text":"<ul> <li>Inseguro ao atacante e ao alvo.</li> <li>Lento.</li> </ul>"},{"location":"ataque/ferramentas/#ferramentas","title":"Ferramentas","text":"<ul> <li>Webproxy</li> <li>Fuzzy</li> <li>nmap</li> </ul>"},{"location":"ataque/ferramentas/#scan-de-vulnerabilidades","title":"Scan de vulnerabilidades","text":""},{"location":"ataque/ferramentas/#ferramentas_1","title":"Ferramentas","text":"<ul> <li>Nikto</li> </ul>"},{"location":"ataque/ferramentas/#problemas-com-o-ajax","title":"Problemas com o Ajax","text":"<p>Quando muitas ferramentas foram criadas, as p\u00e1ginas eram mais inseguras, com boa parte da l\u00f3gica estando dispon\u00edvel ao pr\u00f3prio cliente. Um curl resolvia boa parte do spider e scanner, mas hoje em dia esconde-se boa parte da p\u00e1gina ao usar scripts que criam os elementos em Runtime. Isso dificulta o pentest e o uso de muitas ferramentas antigas.</p>"},{"location":"ataque/intro/","title":"O que \u00e9 Pentest","text":"<p>Testes de penetra\u00e7\u00e3o baseiam-se em testar a seguran\u00e7a de sistemas atrav\u00e9s de tentativas de ataques. \u00c9 uma pr\u00e1tica</p>"},{"location":"ataque/intro/#tipos","title":"Tipos","text":"<ul> <li>Black Box: inicialmente a estrutura da rede e do c\u00f3digo \u00e9 DESCONHECIDA ao atacante e os defensores n\u00e3o sabem a funcionalidade exata a ser atacada.</li> <li>White Box: inicialmente a estrutura da rede e do c\u00f3digo \u00e9 CONHECIDA ao atacante e os defensores sabem qual \u00e1rea e funcionalidade ser\u00e1 atacada.</li> <li>Grey Box: um meio termo entre os dois anteriores.</li> </ul>"},{"location":"ataque/metasploit/","title":"Metasploit","text":"<p>Ferramenta de propriedade da Rapid7. Ajuda na cria\u00e7\u00e3o de exploits.</p> <p>Vocabul\u00e1rio:</p> <ul> <li>Exploits: c\u00f3digo que explora uma vulnerabilidade existente num sistema.</li> <li>Payload: a carga \u00fatil se refere ao conte\u00fado que de fato vai explorar a vulnerabilidade num exploit. \u00c9 o conte\u00fado, o c\u00f3digo malicioso.<ul> <li>Payload Direto: vai at\u00e9 a porta.</li> <li>Payload Reverso (mais comum e poderoso): arruma uma forma do alvo mandar o acesso a porta para a gente. Mais f\u00e1cil de atravessar um firewall.</li> </ul> </li> <li>Remote Host (RHOST): computador alvo.</li> <li>Local Host (LHOST): Host a receber a conex\u00e3o de volta, ou seja, o nosso IP na maioria das vezes.</li> <li>Remote Port (RPORT): porta alvo do computador alvo.<ul> <li>Foque em portas essenciais. Exemplo: portas 80, 443 e 53 nunca estar\u00e3o fechadas, porque mexem com TCP / HTTP e UDP / DNS. Sem eles ativados, o </li> </ul> </li> </ul>"},{"location":"ataque/metasploit/#merterpreter","title":"Merterpreter","text":"<p>Ferramenta de trojan do Metasploit que permite o acesso remoto ao computador alvo. Voc\u00ea pode configurar alguns elementos payload para adaptar o ataque a m\u00e1quina alvo e aos softwares utilizados.</p>"},{"location":"ataque/nmap/","title":"NMAP","text":"<p>Ferramenta intrusiva que mapeia uma rede-alvo. \u00c9 muito usada e famosa, al\u00e9m de possuir muitas op\u00e7\u00f5es de configura\u00e7\u00e3o e personaliza\u00e7\u00e3o e mostrar muitas caracter\u00edsticas de redes favor\u00e1veis a ataques.</p> <p>Cuidados: - Intrusivo: n\u00e3o deve ser feito sem autoriza\u00e7\u00e3o. - Lento: demora muito para mapear tudo. - Inseguro: ompletamente detect\u00e1vel o seu uso.</p> <p>Para entender sempre mais sobre o nmap, use as op\u00e7\u00f5es de verbosidade. H\u00e1 tr\u00eas op\u00e7\u00f5es:</p> N\u00edvel Detalhamento Comando 1 Baixo <code>-v</code> 2 M\u00e9dio <code>-vv</code> 3 Alto <code>-vvv</code>"},{"location":"ataque/nmap/#mapeamento-de-portas-e-servicos","title":"Mapeamento de portas e servi\u00e7os","text":"<p>Use a op\u00e7\u00e3o <code>-sV</code> para mostrar as vers\u00f5es dos servi\u00e7os.</p>"},{"location":"ataque/nmap/#mapear-portas-especificas","title":"Mapear portas espec\u00edficas","text":"<pre><code>nmap -p &lt;porta&gt; # escaneia a 'porta' espec\u00edfica.\nnmap -p- # escaneia todas as portas.\n</code></pre>"},{"location":"ataque/nmap/#como-o-nmap-pega-o-servico-e-a-versao","title":"Como o nmap pega o servi\u00e7o e a vers\u00e3o?","text":"<p>Bastante precisa</p> <ol> <li>Banner-Grabbing: captura o banner do servi\u00e7o na conex\u00e3o e adivinha o servi\u00e7o a partir do padr\u00e3o. Mas e se o banner tiver sido previamente modificado?<ul> <li>Mudar o banner e fechar portas e servi\u00e7os desnecess\u00e1rios s\u00e3o procedimentos de hardening de qualquer servidor, ainda que muitos n\u00e3o os fa\u00e7am.</li> </ul> </li> <li>Checa se a estrutura das respostas corresponde ao padr\u00e3o do servi\u00e7o.</li> <li>Faz alguns testes com outras requisi\u00e7\u00f5es do padr\u00e3o do servi\u00e7o e vers\u00e3o correspondentes.</li> </ol>"},{"location":"ataque/nmap/#tipos-de-scans","title":"Tipos de Scans","text":"<p>Os scans do nmap s\u00e3o feitas a partir da manipula\u00e7\u00e3o das requisi\u00e7\u00f5es TCP e UDP. Dessa forma, podemos categoriz\u00e1-las em v\u00e1rios tipos a partir do procedimento:</p> <ul> <li>Scans por TCP:<ul> <li>TCP Connect Scans (<code>-sT</code>)</li> <li>SYN Half-Open Scans (<code>-sS</code>)</li> <li>TCP NULL Scans (<code>-sN</code>)</li> <li>TCP FIN Scans (<code>-sF</code>)</li> <li>TCP XMAS Scans (<code>-sX</code>)</li> <li>ICMP / ARP Scan</li> </ul> </li> <li>Scans por UDP:<ul> <li>UDP Scans (<code>-sU</code>)</li> </ul> </li> </ul>"},{"location":"ataque/nmap/#tcp-connect-scan","title":"TCP Connect Scan","text":"<p>\u00c9 importante entender sobre o TCP 3-Way handshake antes de ler esta parte.</p> <p>O TCP Connect Scan escaneia as portas TCP abertas e fechadas, realizando a cadeia completa do TCP 3-way handshake. Esse scan \u00e9 o m\u00e9todo padr\u00e3o empregado ao nmap quando este \u00e9 feito sem o de privil\u00e9gios de administrador (sem sudo).</p> <p>O scan descobre se uma porta est\u00e1 aberta ou fechada atrav\u00e9s ao mandar um SYN. Se a porta estiver: - aberta, a conex\u00e3o retornar\u00e1 um SYN + ACK. O scan marcar\u00e1 a porta como aberta e devolver\u00e1 e terminar\u00e1 o handshake ao enviar um SYN. - fechada, a conex\u00e3o retornar\u00e1 uma mensagem de RST (TCP Reset), indicando ao nmap que a porta est\u00e1 fechada. - omitida por um firewall atrav\u00e9s da op\u00e7\u00e3o DROP, a conex\u00e3o n\u00e3o retornar\u00e1 nada. Com isso, o nmap vai classficar a porta como filtrada. Entretanto, um firewall com um REJECT que retorna um RST \u00e9 bem f\u00e1cil de configurar, at\u00e9 mesmo no IPTables.</p>"},{"location":"ataque/nmap/#syn-half-open-scan-modo-discreto","title":"SYN Half-Open Scan - Modo discreto","text":"<p>Acontece atrav\u00e9s da distro\u00e7\u00e3o do TCP 3-way Handshake. A conex\u00e3o \u00e9 semelhante ao TCP Connect Scan, mas se diferencia em seu comportamento ao perceber uma conex\u00e3o aberta.</p> <p>Ao inv\u00e9s de mandar SYN, SYN + ACK, ACK, o sistema envia um SYN, recebe um SYN+ACK (em casos de conex\u00f5es abertas) e omite seu funcionamento ao enviar um RST (TCP Reset) ao inv\u00e9s de ACK. Assim, indica ao sistema alvo que aquela conex\u00e3o est\u00e1 fechada e que n\u00e3o recebeu o pacote, confundindo servi\u00e7os de logs e identifica\u00e7\u00e3o de incidentes.</p> <p>Entre os motivos de usar o Syn Half-Open Scan, est\u00e3o: - Velocidade, j\u00e1 que termina o 3-Way Handshake ainda na segunda etapa  - Oculta\u00e7\u00e3o, j\u00e1 que o conex\u00f5es TCP normalmente s\u00e3o registradas somente ap\u00f3s terminarem. Ao enviar um RST, \u00e9 como se a conex\u00e3o nem existisse, j\u00e1 que o RST significa \"porta fechada\".</p> <p>Entretanto, tamb\u00e9m h\u00e1 desvantagens, como: - Alguns servi\u00e7os n\u00e3o reagem bem a um TCP 3-Way Handshake incompleto, podendo gerar at\u00e9 parada repentina. - Necess\u00e1ria privil\u00e9gios de administrador do atacante, j\u00e1 que h\u00e1 a cria\u00e7\u00e3o de pacotes crus e personalizados.</p> <p>\u00c9 o m\u00e9todo de conex\u00e3o padr\u00e3o realizada quando se executa um scan atrav\u00e9s de um usu\u00e1rio com privil\u00e9gios de administrador (<code>sudo nmap</code>).</p>"},{"location":"ataque/nmap/#udp-scan","title":"UDP Scan","text":"<p>A conex\u00e3o via UDP \u00e9 bem mais lenta e dif\u00edcil de escanear, visto que ela \u00e9 feita sem mensagens de confirma\u00e7\u00e3o. O UDP \u00e9 sem estado, o que o torna perfeito para situa\u00e7\u00f5es em que precimos mais da quantidade e velocidade do que da qualdiade da informa\u00e7\u00e3o.</p> <p>O Scan de UDP no nmap \u00e9 acontece com dois envios de pacotes UDP para uma porta. Se a porta estiver: - aberta, ela n\u00e3o retornar\u00e1 nada aos dois envios do nmap. Pode aocntecer do sistema atacado devolver um UDP de resposta confirmando a conex\u00e3o, mas isso n\u00e3o \u00e9 t\u00e3o comum. Quando \u00e9 poss\u00edvel induzir o servi\u00e7o a deolver esse UDP, o nmap o faz ao adicionar payloads na mensagem de envio. Muitas vezes o nmap n\u00e3o tem como identificar se a porta est\u00e1 filtrada por um firewall ou n\u00e3o, ent\u00e3o marca a porta como aberta | filtrada - fechada, \u00e9 comum que a porta envie um ICMP (ping) de volta com a mensagem \"porta n\u00e3o alcan\u00e7\u00e1vel\". \u00c9 poss\u00edvel configurar o firewall para gerar um REJECT que devolva um ping tamb\u00e9m, ent\u00e3o fique atento.</p>"},{"location":"ataque/nmap/#null-fin-e-xmas-scan","title":"NULL, FIN e XMAS Scan","text":"<p>N\u00e3o s\u00e3o comums, mas tentam ser mais discretos do que o SYN Half-Open.</p> <p>Todos os 3 tentam fugir do uso da bandeira SYN, j\u00e1 que muitos firewalls impedem a cria\u00e7\u00e3o de novas conex\u00f5es e o SYN serve justamente para isso.</p> <p>O NULL Scan consiste em passar uma primeira mensagem TCP do 3-Way Handshake, mas sem argumentos, op\u00e7\u00f5es, bandeiras ou qualquer conte\u00fado. \u00c9 especificado em normas t\u00e9cnicas que pedidos assim devem ter um retorn RST caso a porta esteja fechada.</p> <p>Semelhante ao NULL, o FIN Scan ao inv\u00e9s de enviar uma mensagem nula de SYN pelo TCP, ele envia um TCP com \"FIN\". Enquanto o XMAS, envia um pacote mal formado com PSH, URG e FIN que se parecem com uma \u00e1rvore de natal quando vistas pelo Wireshark.</p> <p>Nem sempre funcionam, j\u00e1 que as tais normas t\u00e9cnicas nem sempre s\u00e3o seguidas. O Windows e a Cisco s\u00e3o exemplos dos sistemas que n\u00e3o os seguem. Al\u00e9m disso, sistemas de IDS s\u00e7ao bons em edetectar esses tipos de Scan</p>"},{"location":"ataque/nmap/#icmp-arp-scannning","title":"ICMP / ARP Scannning","text":"<p>O escaneamento ICMP \u00e9 serve para estabelecer as primeiras conex\u00f5es com o alvo e adquirir um mapa da estrutura da rede atacada, este sendo muito \u00fatil para ataques de caixa preta. Ela procura escanear os IPs com hosts ativos. A op\u00e7\u00e3o <code>-sn</code> pede ao nmap para n\u00e3o usar portas em geral, for\u00e7ando o nmap a usar o protocolo ICMP (sem root) ou ARP (com root em uma rede local) para mapeamento de rede tamb\u00e9m. O escaneamento precisa de uma especifica\u00e7\u00e3o do intervalo de IPs a serem testados, que podem ser especificados atrav\u00e9s da nota\u00e7\u00e3o CIDR, em que todos os hosts da rede (ou subrede) ser\u00e3o testados.</p> <pre><code>nmap -sn &lt;IP&gt;/&lt;mask&gt;\n</code></pre> <p>\u00c9 interessante notar que mesmo que nmap tente n\u00e3o escanear nenhuma porta, ele ainda vai ser obrigado a mandar requisi\u00e7\u00f5es TCP para as portas 443 e/ou 80.</p>"},{"location":"ataque/nmap/#opcoes-de-visibilidade-t","title":"Op\u00e7\u00f5es de visibilidade (-T)","text":"Op\u00e7\u00e3o R\u00f3tulo Velocidade Visibilidade -T0 Paranoico Extremamente Lento Semi Invis\u00edvel -T1 Discreto Lento Pouco Preocupante -T2 - - -T3 Normal R\u00e1pido Vis\u00edvel -T4 - - Completamente Vis\u00edvel -T5 Agressivo Pode ser DoS Extremamente vis\u00edvel"},{"location":"ataque/nmap/#identificacao-de-sistema-operacional","title":"Identifica\u00e7\u00e3o de Sistema Operacional","text":"<p>Costuma ser bastante precisa, voc\u00ea pode pegar ela a partir do comando <code>-O</code>.</p> <p>Para adquirir essa informa\u00e7\u00e3o, o nmap pode, por exemplo, usar: 1. Diferencia\u00e7\u00e3o por Time-to-Live (TTL) de ping.     - Linux: 128     - Windows: 64</p>"},{"location":"ataque/nmap/#identificacao-das-versoes-e-distribuicoes","title":"Identifica\u00e7\u00e3o das vers\u00f5es e distribui\u00e7\u00f5es","text":"<p>Para diferenciar o sistema operacional, h\u00e1 v\u00e1rios m\u00e9todos, mas para diferenci\u00e1-los entre suas diferentes vers\u00f5es, a\u00ed j\u00e1 \u00e9 mais dif\u00edcil. Por isso essa parte j\u00e1 \u00e9 bem menos precisa.</p>"},{"location":"ataque/nmap/#formato-de-output","title":"Formato de Output","text":"<p>Possui 3 formatos:</p> <ul> <li>Normal: <code>-oN &lt;path/output-file.txt&gt;</code></li> <li>Grepable: <code>-oG &lt;path/output-file.txt&gt;</code></li> <li>Xml: <code>-oX &lt;path/output-file.txt&gt;</code></li> <li>Script: <code>-oS &lt;path/output-file.txt&gt;</code></li> </ul> <p>Para imprimir todos de uma vez, use <code>-oA</code></p>"},{"location":"ataque/nmap/#nmap-scripting-engine-nse","title":"Nmap Scripting Engine (NSE)","text":"<p>O NSE representa o poder de extensibilidade do nmap. Ao instalar o nmap, muitos desses scripts vem junto para adicionar em muito as funcionalidades e capacidades do nmap.</p> <p>Os scripts costumam estar em <code>/usr/share/nmap/</code> scripts e s\u00e3o escritos em Lua, uma linguagem brasileira bastante usada e simples.</p> <p>Os scripts s\u00e3o separados em categorias. Entre elas, est\u00e3o: - vuln: scripts de vulnerabilidade - safe: scripts que n\u00e3o v\u00e3o afetar o alvo. - intrusive: scripts para abordagens n\u00e3o seguros e barulhentas. - auth: scripts de invas\u00e3o de servi\u00e7os. - exploit: scripts que tentam explorar um exploit. - discovery: scripts de reconhecimento. Bem comum reconhecerem atrav\u00e9s da lista de servi\u00e7os executados no alvo atualmente. - brute: script de for\u00e7a bruta em credenciais. - default:  - broadcast:  - dos:  - fuzzer:  - malware: - version:</p> <p>Mais detalhes em https://nmap.org/book/nse-usage.html.</p> <p>Para ativar um script espec\u00edfico no scan, use a op\u00e7\u00e3o <code>--scripts=&lt;script&gt;</code>, enquanto que para ativar todos os scripts em uma pasta, use <code>--scripts &lt;categoria&gt;</code> ou <code>--scripts=&lt;categoria&gt;</code> ou ainda <code>--scripts &lt;categoria&gt;-*</code></p> <p>Scripts aceitam argumentos atrav\u00e9s da bandeira <code>--script-args &lt;script&gt;.&lt;arg&gt;</code>.</p> <p>Caso queira saber mais sobre quais s\u00e3o todos os scripts pr\u00e9 instalados do nmap, voc\u00ea pode usar: - Usar o arquivo <code>/usr/share/nmap/scripts/script.db</code>. Ele cont\u00e9 uma lista dos nomes dos scripts contidos no nmap local, assim como suas categorias. Apesar da extens\u00e3o <code>.db</code>, ele \u00e9 s\u00f3 um arquivo de texto. - <code>nmap --script-help &lt;script&gt;</code> para mais detalhes sobre um script espec\u00edfico. - Pode olhar a documenta\u00e7\u00e3o.</p> <p>Caso queira um script que n\u00e3o est\u00e1 na sua m\u00e1quina, voc\u00ea pode: - Procurar por ele no site do nmap, l\u00e1 h\u00e1 todos os scripts oficiais para download. - Fazer o seu pr\u00f3prio script em Lua.</p> <p>Ao adicionar um script na pasta de scripts do nmap, lembre-se sempre de atualizar o <code>/usr/share/nmap/scripts/script.db</code> atrav\u00e9s do comando <code>nmap --script-updatedb</code>.</p>"},{"location":"ataque/nmap/#evasao-de-firewall","title":"Evas\u00e3o de Firewall","text":""},{"location":"ataque/vdp/","title":"Vulnerability Disclosure Program","text":""},{"location":"ataque/vetores-ataques-ameacas/","title":"Vetores de ataque e amea\u00e7a","text":""},{"location":"ataque/vetores-ataques-ameacas/#vetores-de-ataque","title":"Vetores de ataque","text":"<ul> <li>Acesso Direto: dentro do ambiente da empresa, normalmente mitigado por seguran\u00e7a f\u00edsica e treinamento dos funcion\u00e1rios para servirem como monitoramento de comportamentos suspeitos ou n\u00e3o autorizados.</li> <li>Acesso sem fio: acesso ao ambiente de trabalho sem acesso direto ao maquin\u00e1rio. Pode ser mitigada atrav\u00e9s de VPNs, criptografia e trainamento dos funcion\u00e1rios para monitoramento de comportamentos suspeitos.</li> <li>Email: ataques de phishing, mitigado pelo treinamento contra phishing aos usu\u00e1rios. Algumas empresas tamb\u00e9m se esfor\u00e7am para retirar phishings relacionados a sua imagem das redes sociais, conscientizando os usu\u00e1rios e funcion\u00e1rios.</li> <li>Supply Chain/Cadeia de suprimentos: ao inv\u00e9s de invadir uma empresa ou seu produto, hackers invadem a cadeia de suprimentos dela, ou seja, os produtos e empresas que servem a empresa alvo. Ataques que se aproveitam do \"link fraco\" da cadeia de suprimentos para inserir um malware atrav\u00e9s da cadeia s\u00e3o chamados de downstream attacks. Ataques assim s\u00e3o mais comuns de serem feitos por APTs e poem acabar tendo larga escala ao impactarem empresas e indiv\u00edduos diferentes. Para mitigar esses ataques, \u00e9 necess\u00e1rio exigir medidas e posturas de seguran\u00e7a de toda a sua cadeia de produ\u00e7\u00e3o. \u00c9 comum utilizar os Service-Level Agreements (SLAs) para enfor\u00e7ar essas medidas.</li> <li>Redes Sociais: ataques de phishing, fake news (consenso de grupo), prova social, links malicioso. A mitiga\u00e7\u00e3o normalmente est\u00e1 em treinar o usu\u00e1rio, mas limitar o acesso a redes sociais em ambientes de trabalho tamb\u00e9m pode ajudar. Algumas empresas tamb\u00e9m se esfor\u00e7am para retirar phishings relacionados a sua imagem das redes sociais, conscientizando os usu\u00e1rios e funcion\u00e1rios.</li> <li>M\u00eddia Remov\u00edvel (USB, CD, DVD, etc): malwares podem ser inseridos nessas m\u00eddas e compremeter os sistemas nos quais est\u00e3o inseridos. A mitiga\u00e7\u00e3o para ataques nesse vetor incluem pol\u00edticas de grupo e da corpora\u00e7\u00e3o para limitar o uso dessas m\u00eddias e tornar o usu\u00e1rio ciente disso. Treinar usu\u00e1rios aos perigos dessas m\u00eddias tamb\u00e9m \u00e9 efetivo.</li> <li>Cloud: s\u00e3o alvos mais cobi\u00e7ados, porque j\u00e1 s\u00e3o conhecidos por servir diversas outras empresas (arquitetura multi-tenancy). Os ataques mais conhecidos seriam nega\u00e7\u00e3o de servi\u00e7o (DDoS) e a mitiga\u00e7\u00e3o dos ataques a esse vetor podem ser alcan\u00e7ados atrav\u00e9s de SLAs e exig\u00eancia de avalia\u00e7\u00f5es de seguran\u00e7a aos servi\u00e7os Clouds contratados.</li> </ul>"},{"location":"ataque/vetores-ataques-ameacas/#vetores-de-ameaca-superficie-de-ataque","title":"Vetores de Amea\u00e7a / Superf\u00edcie de ataque","text":"<ul> <li> <p>Baseado em Mensagens: inclui emails, SMS, etc. Cont\u00e9m ataques de dom\u00ednios comuns mal escritos, links maliciosos e arquivos maliciosos. \u00c9 um vetor extremamente comum, principalmente por conta da estrat\u00e9gia de SPAM de enviar v\u00e1rias mensagens sem parar para v\u00e1rios destinos diferentes, esperando alguns poucos ca\u00edrem no golpe. \u00c9 dito que a maior parte das mensagens na internet \u00e9 SPAM ou mensagem maliciosa. Atualmente as medidas de mitiga\u00e7\u00e3o incluem o treinamento de usu\u00e1rios contra mensagens maliciosas e engenharia social, assim como o uso de ferramentas e t\u00e9cnicas de filtragem de SPAMs, estes eficientes em seu trabalho.</p> </li> <li> <p>Baseado em Arquivos/Imagens: malwares e c\u00f3digo malicioso s\u00e3o adicionados a arquivos e imagens aparentemente leg\u00edtimas. Isso ocorre atrav\u00e9s de vulnerabilidades e aberturas geradas pelo processamento, tratamento e exibi\u00e7\u00e3o desses arquivos. Ataques comuns incluem a esteganografia (ocultar a exist\u00eancia dos dados malicioso no arquivo/imagem), watering hole attacks (injetar c\u00f3digo malicioso em componentes de websites, aqui especificamente em arquivos/imagens desses websites, sendo mais comum em imagens) e c\u00f3digo de execu\u00e7\u00e3o remota (arquivos/imagens que quando executados permitem a execu\u00e7\u00e3o de c\u00f3digo remoto pelo atacante).</p> </li> <li> <p>Baseado em Voz: existem v\u00e1rios formatos de ataques que utilizam o \u00e1udio e voz como superf\u00edcie de ataque. Atacantes podem capturar a voz de usu\u00e1rios para utiliz\u00e1-las contra servi\u00e7os que pedem autentica\u00e7\u00e3o ou autoriza\u00e7\u00e3o do usu\u00e1rio baseada por voz. Perguntas como \"algu\u00e9m est\u00e1 a\u00ed?\" podem acompanhar um \"sim\" ou \"n\u00e3o\", respostas que podem ser capturadas e facilmente utilizadas para ataques. De forma mais sofisticada, atores maliciosos podem usar as respostas capturadas para trainar intelig\u00eancias artificiais que replicam a voz.</p> </li> <li> <p>M\u00eddia Remov\u00edvel (USB, CD, DVD, etc): malwares podem ser inseridos nessas m\u00eddas e compremeter os sistemas nos quais est\u00e3o inseridos. A mitiga\u00e7\u00e3o para ataques nesse vetor incluem pol\u00edticas de grupo e da corpora\u00e7\u00e3o para limitar o uso dessas m\u00eddias e tornar o usu\u00e1rio ciente disso. Treinar usu\u00e1rios aos perigos dessas m\u00eddias tamb\u00e9m \u00e9 efetivo.</p> </li> <li> <p>Software Vulner\u00e1vel ou N\u00e3o Suportados: todo tipo de software, seja aqueles com interface visual; que agem sem agente, somente a partir de protocolos e sinais; etc. Softwares n\u00e3o suportados n\u00e3o costumam ser monitorados e atualizados, causando vulnerabilidades. Entretanto nem todo software vulner\u00e1vel \u00e9 n\u00e3o suportado. Esse tipo de vetor pode ser tratado via pol\u00edticas de grupo. Outro ponto a ser destacado \u00e9 como todo componente do software precisa ser verificado sobre vulnerabilidades e fraquezas, sejam as configura\u00e7\u00f5es (Misconfiguration), depend\u00eancias (Supply Chain), mecanismos e protocolos (Software Vulner\u00e1vel e Redes Inseguras). </p> </li> <li> <p>Redes Inseguras: sejam redes ethernet, wi-fi, bluetooth, todas precisam ser mapeadas e isoladas propriamente, limitando seu acesso a partir de confian\u00e7a (firewalls, mecanismos de autentica\u00e7\u00e3o, etc).</p> </li> <li> <p>Misconfiguration / Configura\u00e7\u00e3o Fraca: gera uma falsa sensa\u00e7\u00e3o de seguran\u00e7a e um buraco (gaping hole) na segura\u00e7a. Pode ser mitigado atrav\u00e9s da cria\u00e7\u00e3o de um padr\u00e3o esperado para as configura\u00e7\u00f5es e seguran\u00e7a. Esse padr\u00e3o esperado pode ser utilizado em auditorias de seguran\u00e7a peri\u00f3dicas no sistema e escaneamento de vulnerabilidades, outras mitiga\u00e7\u00f5es prov\u00e1veis para esse vetor.</p> <ul> <li>Contas Compartilhadas/Contas de Grupo: vetor normalmente gerado por configura\u00e7\u00f5es fracas. Contas compartilhadas s\u00e3o uma m\u00e1 pr\u00e1tica de seguran\u00e7a, porque podem invalidar a natureza de n\u00e3o rep\u00fadio das contas. Contas compartilhadas s\u00e3o utilizadas por v\u00e1rios usu\u00e1rios e portanto pode ser dif\u00edcil provar que tal usu\u00e1rio de fato realizou certa a\u00e7\u00e3o.</li> </ul> <p>Entre algumas configura\u00e7\u00f5es fracas not\u00e1veis, est\u00e3o:</p> <ul> <li>Permiss\u00f5es pouco restritas;</li> <li>Contas administrativas inseguras;</li> <li>Tratamento de erros fraco, que exibe informa\u00e7\u00f5es internas demais do sistema;</li> <li>Protocolos inseguros, como aqueles sem criptografia; e</li> <li>Configura\u00e7\u00f5es padr\u00f5es, j\u00e1 que muitas possuem contas e senhas pad\u00f5es;</li> <li>Portas e Servi\u00e7os abertos.</li> <li>Supply Chain/Cadeia de suprimentos: ao inv\u00e9s de invadir uma empresa ou seu produto, hackers invadem a cadeia de suprimentos dela, ou seja, os produtos e empresas que servem a empresa alvo. \u00c9 comum por exemplo atacar empresas de MSP (Managed Service Providers), j\u00e1 que elas servem v\u00e1rios clientes. Ataques que se aproveitam do \"link fraco\" da cadeia de suprimentos para inserir um malware atrav\u00e9s da cadeia s\u00e3o chamados de downstream attacks. Ataques assim s\u00e3o mais comuns de serem feitos por APTs e podem acabar tendo larga escala ao impactarem empresas e indiv\u00edduos diferentes. Para mitigar esses ataques, \u00e9 necess\u00e1rio exigir medidas e posturas de seguran\u00e7a de toda a sua cadeia de produ\u00e7\u00e3o. \u00c9 comum utilizar os Service-Level Agreements (SLAs) para enfor\u00e7ar essas medidas.</li> </ul> </li> <li> <p>Vetor humano: ao utilizar o vetor humano, um ataque tenta se aproveitar da mente humana para lan\u00e7ar ataques, seja atrav\u00e9s de engana\u00e7\u00e3o, erros comuns ou s\u00f3 coleta de informa\u00e7\u00f5es. \u00c9 muito comum na \u00e1rea de seguran\u00e7a cibern\u00e9tica se referir ao vetor humano como o \"elo mais fraco\", pela quantidade de ataques que se aproveitam desse vetor e uma falta de controles para lidar com isso.</p> </li> </ul>"},{"location":"ataque/ataques/human-vector-attacks/","title":"Ataques a partir do vetor humano","text":""},{"location":"ataque/ataques/human-vector-attacks/#engenharia-social","title":"Engenharia Social","text":"<p>Engenharia social caracteriza-se como a manipula\u00e7\u00e3o das pessoas para que revelem informa\u00e7\u00f5es sens\u00edveis e importantes ou realizem a\u00e7\u00f5es. Os benef\u00edcios incluem: - advinhar senhas fracas. - ganhar a confian\u00e7a da v\u00edtima para que ela posteriormente baixe as defesas ao ator malicioso ou revele ainda mais informa\u00e7\u00f5es.</p> <p>Mais detalhes em: - https://en.wikipedia.org/wiki/Social_engineering_(security)</p>"},{"location":"ataque/ataques/human-vector-attacks/#ataques-de-falsificacao-spoofing","title":"Ataques de Falsifica\u00e7\u00e3o (Spoofing)","text":"<p>Um ator malicioso finge ser de uma fonte confi\u00e1vel, normalmente com a inten\u00e7\u00e3o de evadir as defesas de um sistema e consequentemente ganhar momentaneamente a confian\u00e7a da v\u00edtima. Um exemplo comum \u00e9 falsificar a origem do email para endere\u00e7os de email confi\u00e1veis.</p> <p>Mais detalhes em: - https://en.wikipedia.org/wiki/Spoofing_attack - https://attack.mitre.org/versions/v17/techniques/T1672/</p>"},{"location":"ataque/ataques/human-vector-attacks/#personificacao","title":"Personifica\u00e7\u00e3o","text":"<p>O ator n\u00e3o s\u00f3 finge ser uma fonte confi\u00e1vel, como a incorpora. T\u00e9cnicas de engenharia social \u00e9 muito mais utilizada do que na falsifica\u00e7\u00e3o. A inten\u00e7\u00e3o n\u00e3o \u00e9 s\u00f3 evadir a defesa, como principalmnte ganhar a confian\u00e7a do usu\u00e1rio. </p> <p>Exemplo da diferen\u00e7a entre ambos: um ataque de email pode usar do email spoofing para trocar seu endere\u00e7o de origem e metadados, enganando os sistemas de defesa e um pouco o usu\u00e1rio, como tamb\u00e9m pode usar o email impersonation, mostrando um email id\u00eantico ao da fonte que est\u00e1 fingindo ser.</p> <p>Mais detalhes: - https://attack.mitre.org/versions/v17/techniques/T1656/</p>"},{"location":"ataque/ataques/human-vector-attacks/#phishing","title":"Phishing","text":"<p>\u00c9 o ataque de \"pescar dados sens\u00edveis\" de um usu\u00e1rio, como usernames, senhas, tokens, etc. Os exemplos mais cl\u00e1ssicos de phishing s\u00e3o emails com links que redirecionam a v\u00edtima para sites falsos. Enquanto esse ataque n\u00e3o \u00e9 a engana\u00e7\u00e3o do humano em si como os outros ataques, phishing normalmente utiliza-se muito de engenharia social, personifica\u00e7\u00e3o, falsifica\u00e7\u00e3o e mascaramento/ofusca\u00e7\u00e3o para convencer seus usu\u00e1rios a passarem seus dados nesses sites falsos.</p> <p>Phishing \u00e9 extremamente comum e n\u00e3o h\u00e1 uma solu\u00e7\u00e3o s\u00f3lida para lidar com esses ataques.</p> <p>Phishing \u00e9 divido em diversas categorias, algumas mais famosas e outras menos famosas.</p> <p>Por escopo: - Spearphishing: phishing direcionado especificamente a uma empresa ou indiv\u00edduo espec\u00edfico. Essa categoria existe porque o phishing tradicional era muito difundido atrav\u00e9s de SPAMs e por consequ\u00eancia suas linguagem e estrat\u00e9gia eram mais gen\u00e9ricas, sendo mais simples de se perceber o golpe e capturando poucos usu\u00e1rios. Ao ser direcionado, o spearphishing costuma ser mais especializado e convincente por ter mais informa\u00e7\u00f5es sens\u00edveis e espec\u00edficas para trabalhar. N\u00e3o s\u00f3 isso, como ataques direcionados indicam que algu\u00e9m est\u00e1 querendo especificamente causar mal \u00e0quela v\u00edtima, o que pode indicar at\u00e9 mesmo cadeias de ataque mais especializadas e espec\u00edficas ao ambiente da v\u00edtima. Como resultado, esse phishing ganha uma notoriedade e taxa de sucesso maior.</p> <ul> <li>Whaling: ao inv\u00e9s de se pescar peixes pequenos, pesca-se baleias! \u00c9 um phishing voltado para nomes \"grandes\". Enquanto a defini\u00e7\u00e3o de \"grande\" pode ser vari\u00e1vel, o termo normalmente se refere a CEOs, CFOs, chefes em geral dentro de uma ind\u00fastria espec\u00edfica.</li> </ul> <p>Por payload: - Phishing por Links: o phishing cont\u00e9m links. Esses podem ser maliciosos por si (comandos ofuscados) s\u00f3 ou redirecionarem para um site malicioso. - Phishing por Arquivos: o phishing cont\u00e9m um arquivo malicioso. No final, o arquivo malicioso ir\u00e1 de alguma forma garatir informa\u00e7\u00f5es sens\u00edveis ao ator malicioso, seja atrav\u00e9s de c\u00f3digo malicioso ou de redirecionamentos do arquivo.</p> <p>Por vetores: - Email Phishing: phishing via email. Alguns tamb\u00e9m o chamam de Email Spoofing (falsifica\u00e7\u00e3o de email), dado como ataques de falsifica\u00e7\u00e3o de email e phishing normalmente andam juntos.  - Smishing: phishing via SMS. - Vishing: phishing via liga\u00e7\u00e3o/grava\u00e7\u00e3o/voz. Eles fingem ser algu\u00e9m atrav\u00e9s de ferramentas de modifica\u00e7\u00e3o de voz e intelig\u00eancia artificial.</p> <p>Mais detalhes em: - https://attack.mitre.org/versions/v17/techniques/T1566/ - https://attack.mitre.org/versions/v17/techniques/T1598/ - https://attack.mitre.org/versions/v17/techniques/T1534/ - https://www.trendmicro.com/en_us/what-is/phishing/types-of-phishing.html</p>"},{"location":"ataque/ataques/human-vector-attacks/#mascaramento-ofuscacao-ocultacao","title":"Mascaramento / Ofusca\u00e7\u00e3o / Oculta\u00e7\u00e3o","text":"<p>Ocultar elementos e dados maliciosos para que pare\u00e7am leg\u00edtimos. H\u00e1 v\u00e1rias t\u00e9cnicas de oculta\u00e7\u00e3o/mascaramento, como vistas na Introdu\u00e7\u00e3o a Criptografia. Essas t\u00e9cnicas s\u00e3o utilziadas em v\u00e1rios contextos e enquanto naquela se\u00e7\u00e3o, era usada para proteger, aqui suas t\u00e9cnicas (criptografia, esteganografia, etc) s\u00e3o usadas para atacar. Mascaramento pode ser usado tanto para enganar o vetor humano, como para enganar as defesas do sistema.</p> <p>Exemplos: codificar um link malicioso de phishing. Mais detalhes: - https://attack.mitre.org/versions/v17/techniques/T1036/ - https://attack.mitre.org/versions/v17/techniques/T1027/</p>"},{"location":"ataque/ataques/human-vector-attacks/#watering-hole-attack-drive-by-compromise","title":"Watering Hole Attack / Drive-By Compromise","text":"<p>\u00c9 um ataque comum, sofisticiado e direcionado. Dado que um site normalmente possui um p\u00fablico espec\u00edfico que o visita, os atores maliciosos, quando possuem alvos, procuram sites vulner\u00e1veis que seus alvos ir\u00e3o muito provavelmente visitar e o exploram. \u00c9 um ataque que explora a confian\u00e7a das pessoas em sites comuns a certo nicho e o interesse por certos assuntos.</p> <p>O processo t\u00edpico \u00e9: 1. Um usu\u00e1rio visita um site leg\u00edtimo infectado por malware. Essa infec\u00e7\u00e3o pode acontecer de diversas formas, normalmente sendo ou por inje\u00e7\u00e3o de c\u00f3digo e script malicioso, ou por an\u00fancios com c\u00f3digo malicioso. 2. O malware analisa o computador do usu\u00e1rio em busca de softwares com vulnerabilidades e brechas. 3. Ao encontrar vulnerabilidades ou brechas, exploits (c\u00f3digo malicioso que exploram as vulnerabilidades encontradas) s\u00e3o enviados ao computador do usu\u00e1rio.</p> <p>Refer\u00eancias: - https://attack.mitre.org/techniques/T1189/</p>"},{"location":"ataque/ataques/human-vector-attacks/#typo-squatting-url-hijacking","title":"Typo Squatting / URL Hijacking","text":"<p>Advers\u00e1rios se aproveitam do fato das pessoas ocasionalmente realizarem typos (pequenos erros de grafia) para registrar recursos com esses typos e a partir disso, encadear com outros ataques.</p> <p>Por exemplo, \u00e9 muito comum escrever goggle.com ou gogle.com ao inv\u00e9s de google.com. Um advers\u00e1rio registraria um site malicioso em goggle.com (typosquatting), criaria uma interface id\u00eantica ao login (personifica\u00e7\u00e3o, phishing) do google e esperaria o usu\u00e1rio por engano entrar em seu dom\u00ednio e realizar login para roubar as credenciais. Outro exemplo comum \u00e9 s\u00f3 criar uma c\u00f3pia do site, mas com uma bomba de an\u00fancios.</p>"},{"location":"ataque/metodologias/pentest/","title":"Metodologias de Pentests","text":""},{"location":"ataque/metodologias/pentest/#principais-metodologias","title":"Principais Metodologias","text":""},{"location":"ataque/metodologias/pentest/#ptes-penetration-testing-execution-standard","title":"PTES - Penetration Testing Execution Standard","text":"<p>http://www.pentest-standard.org/index.php/Main_Page</p>"},{"location":"ataque/metodologias/pentest/#osstmm-open-source-security-testing-methodology-manual","title":"OSSTMM - Open Source Security Testing Methodology Manual","text":""},{"location":"ataque/metodologias/pentest/#nist-800-115","title":"NIST 800-115","text":""},{"location":"ataque/metodologias/pentest/#wstg-owasp-web-security-testing-guide","title":"WSTG - OWASP Web Security Testing Guide","text":""},{"location":"ataque/metodologias/pentest/#mstg-owasp-mobile-security-testing-guide","title":"MSTG - OWASP Mobile Security Testing Guide","text":""},{"location":"ataque/metodologias/pentest/#pci-dss-payment-card-industry-data-security-standard","title":"PCI DSS - Payment Card Industry Data Security Standard","text":""},{"location":"ataque/metodologias/pentest/#metodologias-regionais","title":"Metodologias Regionais","text":"<p>Alguns pa\u00edses e estados s\u00f3 aceitam pentests em acordo com determinadas metodologias regionais.</p>"},{"location":"ataque/metodologias/pentest/#cbest-da-crest","title":"CBEST (da CREST)","text":""},{"location":"ataque/vulnerabilidades/buffer-overflow/","title":"Buffer Overflow","text":"<p>(Antes de ler essa se\u00e7\u00e3o, leia sobre DLLs.)</p> <p>Uma aplica\u00e7\u00e3o comum da ideia de overflow \u00e9 o buffer overflow. Ela ocorre quando o buffer/vetor/lista recebe um valor maior do que \u00e9 capaz de armazenar. Como consequ\u00eancia imediata, a mem\u00f3ria em excesso \u00e9 armazenada em mem\u00f3ria adjacente. Dada a natureza da diposi\u00e7\u00e3o do computador de posicionar novos dados em mem\u00f3ria adjacente, normalmente um buffer overflow acaba sobrescrevendo os dados na mem\u00f3ria, gerando desde comportamentos inesperados at\u00e9 interrup\u00e7\u00f5es no funcionamento do software.</p> <p>\u00c9 muito comum que buffer overflows causem a sobrescrita de dados de endere\u00e7os de jumps.</p>"},{"location":"ataque/vulnerabilidades/dll-injection/","title":"Dll injection","text":""},{"location":"ataque/vulnerabilidades/dll-injection/#injecao-de-dll","title":"Inje\u00e7\u00e3o de DLL","text":"<p>(Antes de ler essa se\u00e7\u00e3o, leia sobre DLLs.)</p> <p>Inje\u00e7\u00f5es DLL focam em injetar DLLs em outros processos sendo executados. A ideia para se realizar um ataque de inje\u00e7\u00e3o de DLL \u00e9: 1. acessar o processo 2. alocar mem\u00f3ria dentro daquele processo, 3. copiar o caminho da DLL ou a pr\u00f3pria DLL na \u00edntegra para a mem\u00f3ria alocada. 4. determinar corretamente o endere\u00e7o de mem\u00f3ria em que a DLL foi alocada. 5. for\u00e7ar o processo a executar a DLL na mem\u00f3ria alocada.</p> <p>\u00c9 poss\u00edvel realizar um ataque desses com o Metasploit.</p> <p>Saiba mais: - https://attack.mitre.org/techniques/T1055/001/</p>"},{"location":"ataque/vulnerabilidades/intro/","title":"Estrat\u00e9gias e termos comuns de ataques em vulnerabilidades","text":""},{"location":"ataque/vulnerabilidades/intro/#vulnerabilidade","title":"\"Vulnerabilidade\"","text":"<p>\"Uma inst\u00e2ncia de uma ou mais fraquezas em um produto que possa ser exploited (explorada), causando um impacto negativo a Confidencialidade, Integridade ou Disponibilidade (CID)\" (CVE, 2025)</p> <p>\"Uma s\u00e9rie de condi\u00e7\u00f5es ou comportamentos que permitem a viola\u00e7\u00e3o de uma pol\u00edtica de seguran\u00e7a expl\u00edcita ou impl\u00edcita\". (CVE, 2025)</p> <p>\"Fraqueza em um sistema de informa\u00e7\u00e3o, procedimento de seguran\u00e7a de sistema, controle interno ou implementa\u00e7\u00e3o que pode ser explorado ou acionado por uma fonte de amea\u00e7a. Nota: O termo fraqueza \u00e9 sin\u00f4nimo de defici\u00eancia. A fraqueza pode resultar em seguran\u00e7a e/ou riscos de privacidade.\" (CISA, 2025)</p> <p>Refer\u00eancia: - https://www.cve.org/ResourcesSupport/Glossary?activeTerm=glossaryVulnerability - https://csrc.nist.gov/glossary/term/vulnerability</p>"},{"location":"ataque/vulnerabilidades/intro/#cve-common-vulnerability-enumeration","title":"\"CVE\" (Common Vulnerability Enumeration)","text":"<p>https://www.cve.org/About/Overview</p>"},{"location":"ataque/vulnerabilidades/intro/#execucao-de-codigo-arbitrario","title":"Execu\u00e7\u00e3o de c\u00f3digo arbitr\u00e1rio","text":"<p>C\u00f3digo arbitr\u00e1rio \u00e9 \"qualquer c\u00f3digo\" e para um atacante, executar c\u00f3digo arbitr\u00e1rio significa ter a capacidade de executar qualquer script malicioso. Ter esse poder \u00e9 extremamente preocupante. Muitas das vulnerabilidades a serem vistas s\u00f3 s\u00e3o poss\u00edveis por causa da execu\u00e7\u00e3o de c\u00f3digo arbitr\u00e1rio. Outras buscam melhorar a capacidade de c\u00f3digo arbitr\u00e1rio ao atacante, permitindo diferentes linguagens de programa\u00e7\u00e3o a serem executadas (por exemplo). O termo \u00e9 extensamente utilizado pela comunidade de seguran\u00e7a cibern\u00e9tica.</p> <p>Saiba mais: - https://pt.wikipedia.org/wiki/C%C3%B3digo_arbitr%C3%A1rio</p>"},{"location":"ataque/vulnerabilidades/intro/#injecao-de-codigo","title":"Inje\u00e7\u00e3o de c\u00f3digo","text":"<p>Quando um aplicativo permite a execu\u00e7\u00e3o de c\u00f3digo arbitr\u00e1rio por atores indesejados, pode ser poss\u00edvel realizar inje\u00e7\u00f5es de c\u00f3digo para explorar a execu\u00e7\u00e3o de c\u00f3digo arbitr\u00e1rio. Injde\u00e7\u00e3o de c\u00f3digo significa injetar c\u00f3digos/dados maliciosos no sistema para modificar o comportamento de algum programa ou processo sendo executado ou a ser executado \u00e9 uma abordagem de ataque comum. H\u00e1 v\u00e1rias vulnerabilidades que permitem ataques de inje\u00e7\u00e3o, alguns sendo simples de se aprender e replicar, outros exigindo muito conhecimento de computa\u00e7\u00e3o. Apesar da curva de aprendizado vari\u00e1vel, ataques de inje\u00e7\u00e3o de c\u00f3digo n\u00e3o s\u00f3 s\u00e3o comuns, como perigosos.</p>"},{"location":"ataque/vulnerabilidades/intro/#rce","title":"RCE","text":"<p>Execu\u00e7\u00e3o de c\u00f3digo remoto \u00e9 a capacidade de executar c\u00f3digo arbitr\u00e1rio na m\u00e1quina de uma v\u00edtima atrav\u00e9s de uma conex\u00e3o remota. Muitas s\u00e3o as vulnerabilidades que permitem RCE.</p> <p>NOTA: execu\u00e7\u00e3o de c\u00f3digo arbitr\u00e1rio pode acontecer sem inje\u00e7\u00e3o de c\u00f3digo. </p>"},{"location":"ataque/vulnerabilidades/intro/#dll","title":"DLL","text":"<p>DLL(Dynamic Link Library) \u00e9 a biblioteca din\u00e2mica* gerada por um c\u00f3digo em C/C++ para o Windows. Em C, ao compilar v\u00e1rios arquivos \".c\", um execut\u00e1vel independente \u00e9 criado como resultado. O mesmo acontece ao adicionar bibliotecas est\u00e1ticas. Entretanto, ao compilar com bibliotecas din\u00e2micas, o execut\u00e1vel se torna dependente da DLL, tentando se conectar a ela toda vez que for executado e executando o c\u00f3digo dentro dela.</p> <p>NOTA(*): Quando o assunto \u00e9 linux, a biblioteca din\u00e2mica gerada \u00e9 chamada de objeto compartilhado e recebe a extens\u00e3o SO (Shared Object). \u00c9 muito mais comum explorar DLLs do que SOs.</p>"},{"location":"ataque/vulnerabilidades/intro/#overflow","title":"Overflow","text":"<p>Toda estrutura de dados num sistema possui um intervalo de valores poss\u00edveis de representar. Enquanto ideias e conceitos podem ter possibilidades infinitas de valores, estruturas de dados em sistemas t\u00eam um tamanho finito e portanto um limite do quanto conseguem representar atrav\u00e9s dos seus dados. Quando o valor a ser armazenado excede o quanto sua respectiva estrutura de dados consegue representar, ocorre um overflow.</p>"},{"location":"ataque/vulnerabilidades/race-conditions/","title":"Condi\u00e7\u00f5es de Corrida","text":"<p>Um fator essencial para execu\u00e7\u00e3o de programas \u00e9 a ordem de execu\u00e7\u00e3o dos procedimentos. Em muitos modelos de programa\u00e7\u00e3o, como programa\u00e7\u00e3o paralela, cada procedimento estar\u00e1 disputando com os outros para conseguir os recursos do processador e mem\u00f3ria. Essa disposi\u00e7\u00e3o criar\u00e1 \"condi\u00e7\u00f5es de corrida\" entre eles.</p> <p>Apesar desse sentido geral, o termo \u00e9 normalmente empregado quando essa corrida por recursos apresenta possibilidades de resultados que permitam com que os procedimentos sejam executados em ordens incorretas, ordens que causem comportamentos indesejados. Existem v\u00e1rias formas de disputas entre recursos, algumas mudando o procedimento a ser executado entre instru\u00e7\u00f5es (n\u00edvel assembly), sem nem deixar o procedimento terminar.</p>"},{"location":"ataque/vulnerabilidades/race-conditions/#time-of-check-to-time-of-use-tocttou","title":"Time of Check to Time of Use (TOCTTOU)","text":"<p>Quando um atacante ganha acesso antes de uma checagem de autentica\u00e7\u00e3o, \u00e9 poss\u00edvel que ele consiga inserir c\u00f3digo ou alterar o que j\u00e1 est\u00e1 l\u00e1 para causar uma mudan\u00e7a no comportamento que atrase a checagem de autentica\u00e7\u00e3o, mas adiante o procedimento respons\u00e1vel por autorizar o usu\u00e1rio (que s\u00f3 seria originalmente chamado se a checagem de autentica\u00e7\u00e3o fosse verdadeira). Como consequ\u00eancia, o advers\u00e1rio ganha acesso ao usu\u00e1rio mesmo que ele n\u00e3o seja quem realmente diz ser.</p> <p>Dentre as vantagens desse ataque para um advers\u00e1rio, h\u00e1 a de impedir com que resets de senhas sejam capazes de impedir seu acesso.</p>"},{"location":"ataque/vulnerabilidades/race-conditions/#time-of-evaluation","title":"Time of Evaluation","text":"<p>Quando duas ou mais threads ou processos acessam e modificam um mesmo recurso global. As threads/processos escolhidos para execu\u00e7\u00e3o podem ser mudadas a qualquer momento e no meio de qualquer instru\u00e7\u00e3o (n\u00edvel assembly). Quando ocorre uma mudan\u00e7a da thread/processo e execu\u00e7\u00e3o, tamb\u00e9m ocorre uma troca de contexto das vari\u00e1veis locais e fun\u00e7\u00f5es locais, entretanto os recursos globais continuam os mesmos. Se uma thread 1 quer usar o valor de uma vari\u00e1vel global como A e uma thread 2 entrar em execu\u00e7\u00e3o e mudar a vari\u00e1vel para B, quando a thread 1 ganhar novamente o tempo de execu\u00e7\u00e3o, ela usar\u00e1 o valor da vari\u00e1vel como B. Se n\u00e3o for bem planejado, essa condi\u00e7\u00e3o de corrida pode causar resultados indesejados ao programador e ao usu\u00e1rio dependendo do tempo em que ocorrerem as trocas de contexto. O resultado fica dependente do timing das threads e processos.</p>"},{"location":"ataque/vulnerabilidades/sql-injection/","title":"SQL Injection","text":"<p>SQL \u00e9 uma lingaugem declarativa de manipula\u00e7\u00e3o de banco de dados, muito utilizada por sistemas gerenciadores de bancos de dados (SGBDs). Normalmente SGBDs recebem comandos SQL atrav\u00e9s de puro texto e isso \u00e9 perigoso, porque se o programador de um website ou aplicativo com bancos de dados n\u00e3o tratar os inputs do usus\u00e1rio, \u00e9 poss\u00edvel que os usu\u00e1rios tenham contato direto com consultas em seu SGBD.</p> <p>Por exemplo, um campo de login precisa ser passado para um SGBD a fim de ter acesso \u00e0 base de usu\u00e1rios e autenticar o usu\u00e1rio. Pense que o programador usou a seguinte estrutura de comando:</p> <pre><code>SGBD.new_query(\"\n    SELECT name, password\n    FROM USERS\n    WHERE name='\" + login_field.name + \"'\n    AND password='\"+ login_field.password +\"';\n\");\n</code></pre>"},{"location":"ataque/vulnerabilidades/update-injection/","title":"Inje\u00e7\u00f5es de Atualiza\u00e7\u00f5es Maliciosas","text":"<p>Considerado um ataque de inje\u00e7\u00e3o, atualiza\u00e7\u00f5es maliciosas normalmente acontecem quando um advers\u00e1rio compromete uma atualiza\u00e7\u00e3o leg\u00edtima. Isso acontece desde ataques \u00e0 atualiza\u00e7\u00e3o em si, como tamb\u00e9m ao mecanismo de distribui\u00e7\u00e3o e canais de distribui\u00e7\u00e3o.</p> <p>Esse ataque n\u00e3o se limita a softwares \u00e0 n\u00edvel de usu\u00e1rio, como tamb\u00e9m a sistemas operacionais e firmwares.</p>"},{"location":"ataque/vulnerabilidades/xss/","title":"Xss","text":""},{"location":"ataque/vulnerabilidades/xss/#cross-site-script-xss","title":"Cross Site Script (XSS)","text":"<p>XSS \u00e9 um ataque de inje\u00e7\u00e3o de scripts Javascript maliciosos em um website ou web app. XSS podem ser ataques simples, ou ataques bastante elaborados e eficientes quando baseados na an\u00e1lise das tecnologias, c\u00f3digos e padr\u00f5es utilizados em um website. Por isso XSS e os demais ataques de inje\u00e7\u00e3o continuam como alguns dos ataques mais preocupantes at\u00e9 hoje.</p> <p>Para o XSS acontecer, precisamos de campos vulner\u00e1veis que aceitem a execu\u00e7\u00e3o de um javascript. Por exemplo: por que n\u00e3o testar se barras de pesquisa aceitam um de HTML? Um <code>&lt;b&gt;camisa polo&lt;/b&gt;</code> se for interpretado como camisa polo, omitindo as tags, pode representar alguma vulnerabilidade. O que impediria de eu inserir um <code>&lt;script&gt;</code>? Estude o site, veja se a sua estrutura faz parecer que ele \u00e9 vulner\u00e1vel a esse tipo de ataque.</p> <p>Quer ver na pr\u00e1tica ataques XSS? V\u00e1 no site Port Swigger e resolva os laborat\u00f3rios de XSS l\u00e1 dentro.</p>"},{"location":"ataque/vulnerabilidades/xss/#xss-refletido","title":"XSS Refletido","text":"<p>\u00c9 um ataque XSS que visa a inje\u00e7\u00e3o de scripts no lado do cliente, enviando a p\u00e1gina infectada para algum alvo via phishing.</p> <p>Voltando ao exemplo da barra de pesquisa, se a pesquisa for feita, como <code>site.com/search?termo+de+pesquisa</code>, n\u00e3o seria dif\u00edcil injetar um script malicioso nessa URL. Por ventura, poderia ser um s\u00f3 uma mudan\u00e7a de background dizendo Ha! Voc\u00ea foi hackeado, ou um script que enviasse as informa\u00e7\u00f5es para algu\u00e9m.</p>"},{"location":"ataque/vulnerabilidades/xss/#xss-armazenado","title":"XSS Armazenado","text":"<p>\u00c9 quando injetamos um c\u00f3digo malicioso javascript que \u00e9 armazenado no servidor do website. Normalmente feito atrav\u00e9s de inputs mal tratados Javascript que v\u00e3o direto para o servidor. Tamb\u00e9m pode ser feito atrav\u00e9s da manipula\u00e7\u00e3o de requisi\u00e7\u00f5es REST HTTP.</p> <p>\u00c9 um ataque cr\u00edtico ao sistema, porque faz com que todos os usu\u00e1rios que acessem o recurso infectado acabem sendo expostos ao ataque.</p> <p>Como exemplo, imagine um XSS aplicado em um input de coment\u00e1rio. Quando a barra de coment\u00e1rios for carregada para outro usu\u00e1rio, o script malicioso ser\u00e1 carregado tamb\u00e9m.</p>"},{"location":"ataque/vulnerabilidades/xss/#xss-dom","title":"XSS DOM","text":""},{"location":"containeres/ACS/","title":"Advanced Cluster Security","text":""},{"location":"containeres/dos/","title":"Estrat\u00e9gias contra Denial of Service em Kubernetes","text":""},{"location":"containeres/dos/#no-de-balanceamento","title":"N\u00f3 de Balanceamento","text":""},{"location":"containeres/dos/#limites-de-recursos-nos-clusters-e-nos","title":"Limites de recursos nos clusters e n\u00f3s","text":"<p>Antigamente, achava-se que n\u00e3o devia colocar limite de recursos nos n\u00f3s por causa de um mecanismos chamado .... que </p>"},{"location":"containeres/dos/#quality-of-service-qos","title":"Quality of Service (QoS)","text":"<p>Classifica\u00e7\u00e3o dos pods sobre prioriza\u00e7\u00e3o em situa\u00e7\u00f5es de estresse. Em uma situa\u00e7\u00e3o de estresse, \u00e9 poss\u00edvel que o Kubernetes mate algum n\u00f3 ou processo dele e normalmente isso acontecer\u00e1 em n\u00f3s de menor proridade.</p> <p>Classifica\u00e7\u00f5es: - Guaranteed - Burstable - BestEffort</p>"},{"location":"containeres/dos/#quotas","title":"Quotas","text":"<p>M\u00e1ximo de n\u00f3s e outros recursos.</p>"},{"location":"containeres/dos/#capacidade-de-limpeza-de-no","title":"Capacidade de Limpeza de N\u00f3","text":""},{"location":"containeres/dos/#horizontal-pod-autoscaler-hpa","title":"Horizontal Pod Autoscaler (HPA)","text":"<p>Solu\u00e7\u00e3o para escalar o n\u00famero de inst\u00e2ncias de pods. Define par\u00e2metros, condi\u00e7\u00f5es e limitea de escala.</p> <p>Tem uma fama ruim de normalmente n\u00e3o dar certo.</p>"},{"location":"containeres/dos/#keda","title":"Keda","text":"<p>Um HPA que funciona.</p>"},{"location":"containeres/dos/#vertical-pod-adutoscaler-vpa","title":"Vertical Pod Adutoscaler (VPA)","text":"<p>Mais recente.</p>"},{"location":"containeres/dos/#knative-serverless","title":"KNative (serverless)","text":"<p>Quando um pod n\u00e3o est\u00e1 trabalhando, o KNative o deixa inativo, economizando recursos. Da mesma forma, quando um trabalho \u00e9 associado ao pod inativo, o KNative reativa o pod. Na pr\u00e1tica, demora um pouco para ligar o pod, o que pode gerar um gargalo de tempo de resposta quando o KNative precisa lidar com muitos pods ao mesmo tempo.</p>"},{"location":"containeres/openshift-sdn/","title":"Openshift SDN","text":""},{"location":"containeres/openshift-sdn/#egress-router","title":"Egress Router","text":"<p>No caso de v\u00e1rios n\u00f3s tendo que acessar um aplicativo protegido por firewall, temos um problema. Qual a solu\u00e7\u00e3o? Permitir que todos os IPs diferentes dos n\u00f3s acessem?</p> <p>Para isso, h\u00e1 o egress router.</p>"},{"location":"containeres/openshift-sdn/#node-selector","title":"Node Selector","text":"<p>Para caso com muitos n\u00f3s, n\u00e3o \u00e9 ideal permitir tantos IPs. Por isso, utiliza-se o Node Selector. Nele, escolhemos s\u00f3 poucos n\u00f3s espec\u00edficos para terem seus IPs liberados pelo firewall. Qualquer tarefa que necessite de comunica\u00e7\u00e3o com recursos protegidos por firewall precisa ter envolvimento dos n\u00f3s com IPs liberados.</p>"},{"location":"containeres/openshift-sdn/#taint","title":"Taint","text":""},{"location":"containeres/openshift-sdn/#kubernetes-cni-e-openshift-network-plugins","title":"Kubernetes CNI e Openshift Network Plugins","text":""},{"location":"containeres/openshift-sdn/#network-policies","title":"Network Policies","text":""},{"location":"containeres/persistencia/","title":"Persist\u00eancia","text":"<p>https://kubernetes.io/docs/concepts/storage/persistent-volumes/</p>"},{"location":"containeres/persistencia/#persitent-storage","title":"Persitent Storage","text":"<p>PVC - Persistence Volume Claim: pedido de espa\u00e7o de armazenamento na piscina de armazenamento.</p>"},{"location":"containeres/persistencia/#dynamic-volume-provisioning","title":"Dynamic Volume Provisioning","text":"<p>O que acontece na pr\u00e1tica</p>"},{"location":"containeres/riscos/","title":"Riscos de Seguran\u00e7a","text":""},{"location":"containeres/riscos/#lojas-dockerhub-podman-etc","title":"Lojas (Dockerhub, Podman, etc)","text":"<p>N\u00e3o d\u00e1 para confiar que as imagens l\u00e1 n\u00e3o ter\u00e3o v\u00edrus ou outros softwares maliciosos.</p>"},{"location":"containeres/riscos/#isolamento-imperfeito","title":"Isolamento imperfeito","text":"<p>Se o seu cont\u00e2inter estiver sendo executado como <code>root</code>.</p>"},{"location":"criptografia/esticamento_de_chave/","title":"Alargamento de chave (Key Stretching)","text":"<ul> <li>Dado que chaves curtas </li> <li>PBKDF2</li> <li>PKS (parte do RSA)</li> </ul>"},{"location":"criptografia/hash/","title":"\"Fun\u00e7\u00f5es\" Hash","text":"<p>\u00c9 uma \"fun\u00e7\u00e3o\" matem\u00e1tica que recebe um input de tamanho indeterminado e devolve um identificador \u00fanico de tamanho fixo que n\u00e3o pode ser revertido ao input original. O diferencial dos algor\u00edtmos de hash \u00e9 que duas informa\u00e7\u00f5es similares com uma diferen\u00e7a m\u00ednima de um \u00fanico bit geram hashes completamente diferente um do outro.</p>"},{"location":"criptografia/hash/#aplicacoes","title":"Aplica\u00e7\u00f5es","text":"<p>Hash normalmente est\u00e1 relacionado com identifica\u00e7\u00e3o e integridade.</p> <ul> <li>Verifica\u00e7\u00e3o de integridade na transfer\u00eancia de arquivos: ao realizar o hashing de um arquivo antes e depois da transfer\u00eancia, caso os hashes resultantes continuem iguais, o arquivo tamb\u00e9m permanece o mesmo.</li> <li>Armazenamento de senhas para futuras autentica\u00e7\u00f5es: ao inv\u00e9s de armazenar a senha no sistema e dar chance ao atacante fazer uma forense e ler a senha armazenada, o Linux salva somente o hash das senhas no <code>/etc/shadow</code>. Dessa forma, quando um usu\u00e1rio inserir a senha para fazer login, o input dele entra no algor\u00edtimo de hash do sistema e o hash resultante \u00e9 comparado com o hash da senha. Se forem iguais, o input inserido de fato era a senha.</li> </ul>"},{"location":"criptografia/hash/#caracteristiscas","title":"Caracter\u00edstiscas:","text":"<ul> <li>Input de tamanho e valor var\u00edavel. Usa-se todo o conte\u00fado dos arquivos, byte a byte.</li> <li>Output de tamanho fixo, mas conte\u00fado extremamente variado a cada mudan\u00e7a, seja ela a m\u00ednima que for.</li> <li>Se H(in) = out \u00e9 a fun\u00e7\u00e3o Hash, n\u00e3o h\u00e1 como conseguir in novamente atrav\u00e9s somente da informa\u00e7\u00e3o out.</li> </ul>"},{"location":"criptografia/hash/#colisoes","title":"Colis\u00f5es","text":"<p>Algor\u00edtmos de hashing podem possuir colis\u00f5es, ou seja, inputs diferentes que geram outputs iguais, o que tira o posto identificador \u00fanico. Para evitar colis\u00f5es, podemos escolher algor\u00edtmos que n\u00e3o possuem colis\u00f5es conhecidas ou identificar um malware atrav\u00e9s de hashes gerados por algor\u00edtmos diferentes. A chance de ambos gerarem colis\u00f5es no mesmo caso \u00e9 extremamente baixa.</p>"},{"location":"criptografia/hash/#algoritmos-de-hashing","title":"Algor\u00edtmos de hashing:","text":"<ul> <li>MD5 (possui coli\u00f5es previs\u00edveis)</li> <li>SHA1 (possui colis\u00f5es previs\u00edveis)</li> <li>SHA2:<ul> <li>SHA256</li> <li>SHA384</li> <li>SHA512</li> </ul> </li> </ul>"},{"location":"criptografia/hash/#brute-force-rainbow-table-salt-e-charound","title":"Brute Force, Rainbow table, Salt e charound","text":"<p>Brute Force (for\u00e7a bruta) \u00e9 um ataque que usa de tentativas repetitivas, de input e output para achar correspond\u00eancias ou padr\u00f5es. Se um algor\u00edtimo de hash \u00e9 muito pequeno, ele pode ser quebrado \u00e0 for\u00e7a. Mas sendo um pouco maior, pode demorar s\u00e9culos at\u00e9 quebrar.</p> <p>Ataques por rainbow tables s\u00e3o uma alternativa ao brute force. A express\u00e3o rainbow table se refere a grandes bancos de dados que mapearam alguns padr\u00f5es conhecidos e cl\u00e1ssicos de output do algor\u00edtmo de hash para inputs comuns, ajudando por exemplo a quebrar senhas como \"adminadmin\" ou \"12345\".</p> <p>A fim de contornar rainbow tables, usam-se salts no algor\u00edtmo de hash. Salts s\u00e3o uma sequ\u00eancia aleat\u00f3ria de texto ou baseada em algum outro fator dif\u00edcil de replicar. O Salt \u00e9 concatenado ao input do algor\u00edtmo de hash e por isso muda completamente o hash resultante.</p> <pre><code>Exemplo com hash no /etc/shadow do linux\n\nfulano:$1$dawdgsad$sALDKA~DDAWLSfawfsahgkul:130422:0:99999:30:::\n\n\nEstrutura (separado por \":\"):\n\nusu\u00e1rio :\n$ algor\u00edtmo $ sal $ hash resultante :\nultima data de modifica\u00e7\u00e3o :\nm\u00ednimo de dias para liberar modifica\u00e7\u00e3o de senha :\nm\u00e1ximo de dias para liberar modifica\u00e7\u00e3o de senha :\nn\u00ba de dias antes da senha expirar para avisar da expira\u00e7\u00e3o:\nn\u00ba de dias ap\u00f3s senha expirada em que a conta ser\u00e1 desabilitada:\ndata de expira\u00e7\u00e3o da conta):\n</code></pre> <p>Charound tamb\u00e9m \u00e9 outra t\u00e9cnica para evitar rainbow tables e brute force. Baseia-se em aplicar o hash m\u00faltiplas vezes ao inv\u00e9s de s\u00f3 uma vez, aumentando em muito a complexidade assint\u00f3tica de adquirir os padr\u00f5es comuns de rainbow table.</p>"},{"location":"criptografia/intro/","title":"Introdu\u00e7\u00e3o a criptografia","text":"<p>Primeiro ser\u00e1 abordado onde a criptografia se encaixa no manuseio de dados e o que criptografia n\u00e3o \u00e9. Depois ser\u00e1 abordado mais especificamente o que \u00e9 criptografia e um pouco sobre seus algor\u00edtmos. E por fim, ser\u00e1 abordado como a criptografia \u00e9 aplicada no mundo.</p>"},{"location":"criptografia/intro/#mascaramentos-de-dados","title":"Mascaramentos de dados","text":"<p>Mascaramento de dados \u00e9 uma pr\u00e1tica que visa modificar dados sens\u00edveis com o intuito de escond\u00ea-los, mas ainda mantendo esse dado utiliz\u00e1vel. Deve ser utiliz\u00e1vel o bastante para m\u00e1quinas leg\u00edtimas e estudiosos, mas n\u00e3o muito utiliz\u00e1vel para atores maliciosos. Geralmente o mascaramento de dados cai muito como uma anonimiza\u00e7\u00e3o dos dados e intermedia\u00e7\u00e3o (uso de proxy e NAT).</p> <p>Criptografia \u00e9 um meio de mascaramento e ofusca\u00e7\u00e3o de dados. Como m\u00e1scara, a criptografia nem sempre \u00e9 a melhor op\u00e7\u00e3o, j\u00e1 que nem todos os algor\u00edtmos tentam manter o formato do texto criptografado. Por exemplo: ao retornar uma tupla de um banco de dados com cpf e nome, o mascaramento causado por alguns algor\u00edtmos criptogr\u00e1ficos poderia n\u00e3o ser t\u00e3o \u00fatil.</p> <p>(Mpleg3oeFWPrd6hjAjhgyOj8648gyhWM9m0uj-gyF, Raphael Mendes da Silva)</p> <p>Talvez uma abordagem desse tipo seja mais interessante para mascaramento e anonimza\u00e7\u00e3o:</p> <p>(000.000.000-00, Raphael Mendes da Silva)</p> <p>Algumas t\u00e9cnicas de mascaramento de dados s\u00e3o: - Substitui\u00e7\u00e3o - Embaralhamento - Anula\u00e7\u00e3o e Masking Out - Tokeniza\u00e7\u00e3o - Criptografia</p> <p>Tipos de mascaramento de dados: - M\u00e1scara de dados est\u00e1ticos (at rest) - M\u00e1scara de dados din\u00e2micos (in transit)</p>"},{"location":"criptografia/intro/#esteganografia","title":"Esteganografia","text":"<p>N\u00e3o \u00e9 criptografia, mas \u00e9 muitas vezes confundida e mencionada junto \u00e0 criptografia.</p> <p>Esteganografia \u00e9 a arte de esconder a exist\u00eancia de mensagens, enquanto criptograifa \u00e9 a arte de esconder seu significado.</p> <p>Uma t\u00e9ncica comum de esteganografia \u00e9 esconder uma mensagem dentro da outra. Textos escondidos dentro de textos, pixels escondidos em imagens que podem ser traduzidos para um texto, ambos representam esteganografia.</p> <p>Na quest\u00e3o de seguran\u00e7a cibern\u00e9tica, h\u00e1 v\u00e1rios programas que podem esconder um arquivo em outro. Fotos com execut\u00e1veis malciosos dentro dele s\u00e3o um exemplo cl\u00e1ssico. \u00c9 comum que esses execut\u00e1veis internos sejam criptografados tamb\u00e9m para ajudar ainda mais a ofusca\u00e7\u00e3o.</p> <p>Arquivos que ocupam um espa\u00e7o maior do que deveriam ter \u00e9 um sinal prov\u00e1vel de esteganografia.</p>"},{"location":"criptografia/intro/#tokenizacao","title":"Tokeniza\u00e7\u00e3o","text":"<p>Tokens \u00e9 qualquer coisa que substitua dados sens\u00edveis com dados n\u00e3o sens\u00edveis.</p> <p>H\u00e1 dois tipos de tokens: - Tokens de Alto Valor - Tokens de Baixo Valor</p>"},{"location":"criptografia/intro/#hashing","title":"Hashing","text":"<p>N\u00e3o \u00e9 criptografia, mas \u00e9 normalmente mencionado junto a criptografia. Um algor\u00edtmo hash se refere a uma fun\u00e7\u00e3o matem\u00e1tica que tenta gerar valores \u00fanicos (hashes) de resultado a partir de um argumento de entrada. Fun\u00e7\u00f5es hashes devem enfor\u00e7ar a propriedade de distanciamento, ou seja, qualquer mudan\u00e7a pequena ou grande no argumento deve gerar um hash completamente diferente de resultado.</p> <p>Os algor\u00edtmos de hashing atuais aceitam que os argumentos de hashes podem ser de tamanhos variados, enquanto os hashes em si (resultados) s\u00e3o de tamanhos fixos. Dessa forma, n\u00e3o importa qual algor\u00edtmo, haver\u00e1 colis\u00f5es de argumentos diferentes gerando hashes iguais.</p> <p>Hashes s\u00e3o usados para testes de integridade, sistemas de autentica\u00e7\u00e3o e assinaturas digitais. Por exemplo, ao salvarmos uma senha no nosso sistema Linux, n\u00e3o \u00e9 a senha que \u00e9 salva, mas sim o seu hash, impedindo que um hacker descubra a senha a partir do hash. Ao logar no sistema, a senha oferecida pelo usu\u00e1rio passa pelo algor\u00edtmo de hash e \u00e9 comparada com o hash armazenado no sistema. Se verdadeiro, a senha est\u00e1 correta.</p> <p>Alguns algor\u00edtmos hashes de exemplo: - MD5 - SHA1 - SHA2</p> <p>Agora que vimos principalmente o que n\u00e3o \u00e9 criptografia, podemos nos aprofundar no que \u00e9 criptografia.</p> <p>J\u00e1 vimos que a criptografia \u00e9 um mascaramento de dados com o intuito de esconder o significado de uma mensagem de usu\u00e1rios indesejados. Ela precisa ter seu resultado (texto encriptado) revers\u00edvel ao texto original e esse processo de revers\u00e3o deve ser feito com facilidade pelo destinat\u00e1rio, a fim de estabelecer um comunica\u00e7\u00e3o segura em um canal de comunica\u00e7\u00e3o inseguro. </p> <p>O que transforma um texto pleno em um texto encriptado e vice-versa \u00e9 chamado de algor\u00edtmo criptogr\u00e1fico. Existem v\u00e1rios algor\u00edtmos criptogr\u00e1ficos, mas em geral, eles se dividem em duas categorias:</p>"},{"location":"criptografia/intro/#criptografia-simetrica","title":"Criptografia Sim\u00e9trica","text":"<p>Criptografia moderna que utiliza uma \u00fanica chave para encriptar e desencriptar mensagens a partir de fun\u00e7\u00f5es matem\u00e1ticas. Essa chave \u00e9 compartilhada com os usu\u00e1rios que participam da comunica\u00e7\u00e3o.</p> <p>O desafio matem\u00e1tico aqui \u00e9 criar fun\u00e7\u00f5es em que:</p> <ul> <li>encriptar(mensagem_original, chave) == mensagem_encriptada</li> <li>desencriptar(mensagem_encriptada, chave) == mensagem_original</li> </ul> <p>Quando um atacante descobrir a chave, ele pode entender e participar de toda conversa. E como a chave \u00e9 a mesma compartilhada pelos participantes da comunica\u00e7\u00e3o, basta um computador vulner\u00e1vel para comprometer toda a seguran\u00e7a de armazenamento da chave.</p> <p>Em contrapartida, criptografia sim\u00e9trica \u00e9 mais r\u00e1pida do que a assim\u00e9trica.</p> <p>Exemplos de algor\u00edtimo de criptografia sim\u00e9trica: - DES</p>"},{"location":"criptografia/intro/#criptografia-assimetrica","title":"Criptografia Assim\u00e9trica","text":"<p>Criptografia mais moderna, composta por dois tipos de chave: chave p\u00fablica e chave privada.</p> <p>A chave p\u00fablica \u00e9 respons\u00e1vel na maior parte dos sistemas por encriptar dados. Ela \u00e9 chamada de p\u00fablica porque \u00e9 prevista para ser exposta ao p\u00fablico.</p> <p>J\u00e1 a chave privada \u00e9 usada principalmente para desencriptar dados. Ela \u00e9 chamada de privada porque n\u00e3o deve ser compartilhada.</p> <p>O desafio matem\u00e1tico aqui \u00e9 criar uma fun\u00e7\u00e3o em que:</p> <ul> <li>chave_publica != chave_privada</li> <li>encriptar(mensagem_original, chave_publica) == mensagem_encriptada</li> <li>desencriptar(mensagem_encriptada, chave_privada) == mensagem_original</li> </ul> <p>Na comunica\u00e7\u00e3o entre dois indiv\u00edduos, cada um tem seu par de chaves privada e p\u00fablica. A chave p\u00fablica de cada um \u00e9 compartilhada, enquanto as chaves privadas s\u00e3o guardadas. Dado os indiv\u00edduos A e B, quando A quer enviar mensagens para B, ele as encripta atrav\u00e9s da chave p\u00fablica de B e as envia ao B. B as desencripta com a sua pr\u00f3pria chave privada. Em seguida, ele manda uma mensagem para B, mas antes a encripta usando a chave p\u00fablica de A. A recebe a mensagem encriptada e a desencripta com sua pr\u00f3pria chave privada.</p> <p>Se a chave privada de algu\u00e9m vazar para atacantes, eles ser\u00e3o capazes de ler as mensagens enviadas \u00e0quela pessoa, o que \u00e9 uma viola\u00e7\u00e3o de confidencialidade. \u00c9 necess\u00e1rio proteger a transmiss\u00e3o e armazenamento da chave privada.</p> <p>H\u00e1 casos em que se encripta com a chave privada e desencripta com a p\u00fablica, como forma de n\u00e3o repudia\u00e7\u00e3o. Um exemplo \u00e9 na assinatura digital. Como a chave privada \u00e9 pessoal e n\u00e3o compartilhada, se a chave p\u00fablica desencriptar a mensagem, ent\u00e3o com certeza ela foi encriptada pela chave privada e com certeza o sistema a encripta-la \u00e9 o sistema que deveria encripta-la.</p> <p>Exemplos de algor\u00edtmos assim\u00e9tricos: - RSA - </p> <p>O resto dos t\u00f3picos dessa se\u00e7\u00e3o abordar\u00e3o assuntos tangentes ao funcionamento da criptografia, como suas aplica\u00e7\u00f5es, conceitos semelhantes, t\u00f3picos que acompanham o tema, etc. Eles normalmente s\u00e3o comentados junto a criptografia e podem lhes ajudar a entender o que criptografia \u00e9 e n\u00e3o \u00e9 e como ela est\u00e1 inserida no mundo. Alguns desses t\u00f3picos podem ser aprofundados mais para frente durante esse cap\u00edtulo.</p> <p>Em seguida, conta-se um pouco sobre como criptografia est\u00e1 aplicada no mundo e quais assuntos tangem os algor\u00edtmos criptogr\u00e1ficos.</p>"},{"location":"criptografia/intro/#transmissao-de-chaves","title":"Transmiss\u00e3o de Chaves","text":"<p>Tanto na criptografia sim\u00e9trica, quanto na criptogragia assim\u00e9trica, os sistemas se esfor\u00e7am mais na seguran\u00e7a do canal e da transmiss\u00e3o da chave. O benef\u00edcio \u00e9 n\u00e3o ter que se esfor\u00e7ar tanto para proteger a transmiss\u00e3o de mensagens, j\u00e1 que o algor\u00edtmo ciptogr\u00e1fico e as chaves transmitidas j\u00e1 o fazem. Isso gera um custo menor do que tentar proteger ao m\u00e1ximo toda transmiss\u00e3o contra invas\u00f5es, leituras e modifica\u00e7\u00f5es de outras formas.</p>"},{"location":"criptografia/intro/#out-of-band-key-exchange","title":"Out of Band Key Exchange","text":"<p>A chave \u00e9 transmitida fora da rede. \u00c9 necess\u00e1rio utilizar outros m\u00e9todos, como cartas, liga\u00e7\u00f5es ou at\u00e9 mesmo comunicar a chave pessoalmente.</p>"},{"location":"criptografia/intro/#in-band-key-exchange","title":"In-Band Key Exchange","text":"<p>A chave \u00e9 transmitida atrav\u00e9s da rede. H\u00e1 de se tomar um cuidado. Por exemplo, na web, as chaves costumam ser criadas no in\u00edcio de uma sess\u00e3o e descartadas no fim dessa sess\u00e3o.</p>"},{"location":"criptografia/intro/#public-key-infrastructure-pki","title":"Public Key Infrastructure (PKI)","text":"<p>\u00c9 uma infraestrutura de componentes que permitem o uso de certificados digitais e criptografia assim\u00e9trica (chave p\u00fablica e privada). Aqui infraestrutura \u00e9 composta por hardware, software, pessoas, pol\u00edticas e procedimentos.</p> <p>Os procedimentos de criptografia sim\u00e9trica e assim\u00e9trica j\u00e1 fazem parte da PKI.</p>"},{"location":"criptografia/intro/#politica-escrow-de-chave","title":"Pol\u00edtica: Escrow de Chave","text":"<p>Acordo entre dois ou mais agentes para que um agente/\u00f3rg\u00e3o/empresa armazene as chaves criptogr\u00e1ficas de decripta\u00e7\u00e3o dos sistemas dos outros agentes. Normalmente \u00e9 um acordo feito com recupera\u00e7\u00e3o em mente.</p> <p>Entre as desvantagens, est\u00e1 a possibilidade do agente que guarda as chaves n\u00e3o ser segura o suficiente e todas as chaves vazarem.</p>"},{"location":"criptografia/intro/#armazenamento-seguro-trusted-plataform-module-tpm","title":"Armazenamento Seguro: Trusted Plataform Module (TPM)","text":"<p>\u00c1rea segura normalmente integrada num dispositivo para armazenar chaves criptogr\u00e1ficas. O termo TPM pode se referir tanto ao hardware (chip TPM) quanto a especifica\u00e7\u00e3o utilizada para construir esse chip. Chips TPM costumam ser integrados \u00e0 placa m\u00e3e do computador.</p>"},{"location":"criptografia/intro/#armazenamento-seguro-haardware-security-module-hsm","title":"Armazenamento Seguro: Haardware Security Module (HSM)","text":"<p>Dispositivos remov\u00edveis com o prop\u00f3sito de armazenar de forma segura chaves criptogr\u00e1ficas. Diferente do TPM, os HSMs n\u00e3o precisam estar integrados ao sistema desde a sua fabrica\u00e7\u00e3o e podem ser instalados depois.</p> <p>Podem ter v\u00e1rios formatos, desde cart\u00f5es at\u00e9 dispositivos maiores.</p>"},{"location":"criptografia/intro/#armazenamento-seguro-secure-enclave","title":"Armazenamento Seguro: Secure Enclave","text":"<p>Subsistema dedicado de seguran\u00e7a. Est\u00e1 integrado aos chips de sistemas da Apple, como Iphones, Ipads, Macs, etc. Ele \u00e9 isolado do processador principal para prover uma camada extra de seguran\u00e7a.</p>"},{"location":"criptografia/intro/#armazenamento-seguro-sistema-de-gerenciamento-de-chaves","title":"Armazenamento Seguro: Sistema de Gerenciamento de Chaves","text":"<p>Plataforma interna ou externa (terceiros) de uma empresa usada para gerenciar as chaves utilizadas para encriptar e desencriptar outros sistemas da empresa. Apesar de interessate, tamb\u00e9m \u00e9 perigoso, j\u00e1 que um vazamento desse gerenciador significaria a perda de seguran\u00e7a criptogr\u00e1fica de todos os sistemas encriptados daquela empresa.</p>"},{"location":"criptografia/intro/#assinatura-digital","title":"Assinatura Digital","text":"<p>Assinatura digital \u00e9 um m\u00e9todo que aplica integridade e n\u00e3o repudia\u00e7\u00e3o a qualquer transfer\u00eancia de dados. Ela utiliza conceitos de hash e criptografia assim\u00e9trica em seu funcionamento.</p>"},{"location":"criptografia/intro/#funcionamento-geral","title":"Funcionamento geral:","text":"<p>Relembrando a aplica\u00e7\u00e3o cl\u00e1ssica de transfer\u00eancia de arquivos do hash, o remetente extrai o hash antes de enviar o arquivo. Depois ele envia o arquivo ao destinat\u00e1rio e o hash num canal que garanta mais integridade. O destinat\u00e1rio extrai o hash do arquivo recebido e compara o hash resultante com o hash enviado. Se ambos forem iguais, o arquivo foi enviado sem mudan\u00e7as de bits e a integridade \u00e9 garantida.</p> <p>De forma semelhante, o remetente, ao inv\u00e9s de enviar o hash, ele o encripta com a sua pr\u00f3pria chave privada. O arquivo tem anexado esse hash encriptado e portanto recebe o nome de \"documento assinalado\". O documento assinalado \u00e9 enviado ao destinat\u00e1rio, que desencripta o hash encriptado com a chave p\u00fablica do remetente. Por fim, o destinat\u00e1rio extrai o hash do arquivo enviado e compara com o hash desencriptado.</p> <p>O que \u00e9 encriptado com a chave privada do remetente s\u00f3 pode ser desencriptado pela chave p\u00fablica do remetente e portanto serve como um atestado de n\u00e3o repudia\u00e7\u00e3o.</p> <p></p>"},{"location":"criptografia/intro/#certificado-digital","title":"Certificado Digital","text":"<p>Enquanto o hash encriptado pela chave privada serve como alguma verifica\u00e7\u00e3o de identidade, um certificado digital tamb\u00e9m \u00e9 anexado ao documento assinalado antes de ser enviado.</p> <p>Ao menos no Brasil, assinaturas digitais com valor jur\u00eddico e legal necessitam de um certificado digital, pois faz parte de provar a identidade de quem est\u00e1 assinando os dados. Esses certificados devem ser emitidos por Autoridades Certificadoras (ACs ou CAs em ingl\u00eas).</p> <p>No Brasil, essas ACs precisam ser reconhecidas pela ICP-Brasil (Infraestrutura de Chaves P\u00fablicas Brasileira).</p> <p>Autoridades Certificadoras comuns s\u00e3o Symentic, GeoTrust, DigiCert, GlobalSig, Comodo, Entrust, Thawte, etc.</p>"},{"location":"criptografia/intro/#csr-certificate-signing-request","title":"CSR - Certificate Signing Request","text":"<p>Processo de requisi\u00e7\u00e3o de um certificado digital a uma AC. \u00c9 exigida uma s\u00e9rie de informa\u00e7\u00f5es, normalmente seguindo a PKCS #10 (Public Key Cryptography Standards)</p>"},{"location":"criptografia/criptografia-moderna/DES/","title":"Data Encryption Standard (DES 1977 - 2004)","text":"<p>Oficializado em 1977, o DES foi um dos primeiros padr\u00f5es de criptografia moderna adotados. Hoje em dia, ele \u00e9 datado e n\u00e3o \u00e9 mais recomendado pela NIST desde 2004, mas mesmo assim ainda \u00e9 amplamente utilizado no sistemas atuais, assim como suas varia\u00e7\u00f5es e deriva\u00e7\u00f5es.</p> <p>O DES \u00e9 muito bem descrito atrav\u00e9s de suas caracter\u00edsticas gerais: - Criptografia Sim\u00e9trica. - Baseada em blocos: criptografa blocos de mensagens de 64 bits. - Mais voltada a implementa\u00e7\u00e3o em hardware.</p> <p>Na d\u00e9cada de 70, com a teoria de Shannon j\u00e1 conhecida, o DES tenta implementar um sistema de criptografia sim\u00e9trica seguro, mas que seja de implementa\u00e7\u00e3o vi\u00e1vel, diferente da cifra de Vernam. O que torna a cifra de Vernam segura \u00e9 ao mesmo tempo o que a torna invi\u00e1vel na pr\u00e1tica e portanto, ao criar um sistema criptogr\u00e1fico vi\u00e1vel para a \u00e9poca, j\u00e1 era de se esperar que ele n\u00e3o seria de fato seguro. Mas talvez fosse poss\u00edvel adicionar mecanismos que tornassem a decifragem mais dif\u00edcil de ser realizada e \u00e9 isso que o DES tenta alcan\u00e7ar.</p> <p>O mundo de tecnologia nos anos 70 era mais voltado para hardware e o DES n\u00e3o \u00e9 diferente. Em sua implementa\u00e7\u00e3o, vemos fios e portas l\u00f3gicas sendo utilizadas. Sem contar o seu modelo baseado em blocos, criptografando um bloco de 64 bits por vez. Isso se relaciona muito com o mundo de hardware, visto que costuma apresentar inputs e outputs de tamanhos fixos em bits. Essa caracter\u00edstica \u00e9 contrastrante com sistemas criptogr\u00e1ficos mais modernos que costumam se aproximar mais do mundo matem\u00e1tico ao utilizar hashes, algor\u00edtmos que aceitam inputs de qualquer tamanho.</p> <p>Quando estudamos DES, \u00e9 imprescind\u00edvel ver os seguintes componentes que ele possui: - A Base do DES - Esquema Feistel. - Permuta\u00e7\u00e3o de Fun\u00e7\u00f5es Redondas. - Chave Secreta e Agendador de Chaves.</p>"},{"location":"criptografia/criptografia-moderna/DES/#feistel-scheme","title":"Feistel Scheme","text":"<p>A cifra usada no DES foi criada por Feistal e \u00e9 baseada em sua cifra anterior, o LUCIFER. O DES utiliza o Feistel Scheme, um fluxo de circuito.</p>"},{"location":"criptografia/criptografia-moderna/DES/#permutacao-de-funcoes-redondas-no-des","title":"Permuta\u00e7\u00e3o de Fun\u00e7\u00f5es Redondas no DES","text":""},{"location":"criptografia/criptografia-moderna/DES/#fase-1-de-4-a-6-bits","title":"Fase 1: de 4 a 6 bits","text":""},{"location":"criptografia/criptografia-moderna/DES/#fase-2-circuitos-de-substituicao","title":"Fase 2: circuitos de substitui\u00e7\u00e3o.","text":"<p>Os circuitos de substitui\u00e7\u00e3o n\u00e3o nada extremamente complexo. Eles simplesmente \"criptografam\" os inputs substituindo os valores recebidos de acordo com uma tabela de substitui\u00e7\u00e3o. Com essa mesma tabela, tamb\u00e9m \u00e9 poss\u00edvel \"descriptografar\". Veremos isso a seguir.</p> <p></p> <ul> <li> <p>Criptografar:</p> </li> <li> <p>Descriptografar:</p> </li> </ul>"},{"location":"criptografia/criptografia-moderna/DES/#fase-3-transposicao-por-cabos","title":"Fase 3: transposi\u00e7\u00e3o por cabos.","text":"<p>Pega os outputs da fase anterior e troca a ordem dos resultados atrav\u00e9s de uma transposi\u00e7\u00e3o de fios. Como \u00e9 uma implementa\u00e7\u00e3o em hardware, uma transposi\u00e7\u00e3o de cabos gera bastante confus\u00e3o. Para \"criptografar\" a mensagem resultado da fase 2, \u00e9 s\u00f3 seguir os cabos na dire\u00e7\u00e3o esperada. Para voltar \u00e0 mensagem n\u00e3o-transposta, \u00e9 s\u00f3 seguir a dire\u00e7\u00e3o contr\u00e1ria dos cabos.</p>"},{"location":"criptografia/criptografia-moderna/DES/#chave-secreta-e-key-scheduler","title":"Chave Secreta e Key Scheduler","text":"<p>Baseado na Cifra de Vernam, o DES utiliza chaves de 64 bits por bloco. Entretanto, saindo um pouco da Teoria do \"Segredo Perfeito\" de Shannon, somente 56 bits da chave s\u00e3o de fato efetivos, gerando chaves reais de tamanho distinto do bloco de 64 bits.</p> <p>Uma chave por bloco? Mas e as diversas chaves utilizadas no esquema de Feistel a cada bloco? Elas todas s\u00e3o uma varia\u00e7\u00e3o da chave original de 56 bits adquirida por bloco. Essas varia\u00e7\u00f5es s\u00e3o geradas a cada ciclo do esquema de Feistel atrav\u00e9s do Programador/Agendador de Chaves.</p> <p>O Programador de chaves funciona de acordo com a seguinte l\u00f3gica de programa\u00e7\u00e3o:</p> <pre><code>a preencher\n</code></pre>"},{"location":"criptografia/criptografia-moderna/DES/#modos-de-operacao-para-o-des-para-mensagens-maiores-que-64-bits","title":"Modos de Opera\u00e7\u00e3o para o DES para mensagens maiores que 64 bits.","text":""},{"location":"criptografia/criptografia-moderna/DES/#_1","title":"Data Encryption Standard (DES 1977 - 2004)","text":""},{"location":"criptografia/criptografia-moderna/DES/#_2","title":"Data Encryption Standard (DES 1977 - 2004)","text":""},{"location":"criptografia/criptografia-moderna/DES/#_3","title":"Data Encryption Standard (DES 1977 - 2004)","text":""},{"location":"criptografia/criptografia-moderna/DES/#_4","title":"Data Encryption Standard (DES 1977 - 2004)","text":""},{"location":"criptografia/criptografia-moderna/DES/#_5","title":"Data Encryption Standard (DES 1977 - 2004)","text":""},{"location":"criptografia/criptografia-moderna/DES/#_6","title":"Data Encryption Standard (DES 1977 - 2004)","text":""},{"location":"criptografia/criptografia-moderna/DES/#aplicacao-real-e-atual-do-des-senhas-do-sistema-unix","title":"Aplica\u00e7\u00e3o real e atual do DES: Senhas do sistema Unix","text":"<p>Caso n\u00e3o conhe\u00e7a o sistema Unix, ele cuida de suas credenciais internas atrav\u00e9s dos aplicativos <code>/etc/shadow</code> e <code>/etc/passwd</code>. Nesta \u00faltima, podemos ver uma s\u00e9rie de textos cifrados</p>"},{"location":"criptografia/criptografia-moderna/shannon/","title":"Introdu\u00e7\u00e3o \u00e0 Criptografia Moderna - Teoria da Confidencialidade de Shannon","text":""},{"location":"criptografia/criptografia-moderna/shannon/#vernam-e-a-ideia-de-perfect-secrecy","title":"Vernam e a ideia de Perfect Secrecy","text":"<p>Por volta dos anos 70, Shannon provou matematicamente o porqu\u00ea a Cifra de Vernam era matematicamente o segredo perfeito. A ideia consiste em criar uma forma de esconder a mensagem que n\u00e3o revele pista ou ind\u00edcio algum de como resolver o esconderijo.</p> <p>Na pr\u00e1tica, isso \u00e9 alcan\u00e7ado na Cifra de Vernam com o uso de: - Chaves de mesmo comprimento da mensagem: cada caractere tem um deslocamento independente. - Chaves de gera\u00e7\u00e3o aleat\u00f3ria: cada caractere criptografado n\u00e3o gera pista sobre o seu valor original. - Chaves de uso \u00fanico: nenhuma tentativa gera qualquer correla\u00e7\u00e3o com alguma tentiva futura ou anterior.</p> <p>Interferir com qualquer um desses princ\u00edpios na Cifra de Vernam o torna insegura. Nesse ponto, nem o tamanho da mensagem \u00e9 relevante.</p> <p>Entretanto, ainda que teoricamente ideal, criar chaves de tamanho n\u00e3o fixo e conte\u00fado completamente aleat\u00f3rio sempre \u00e9 uma tarefa dif\u00edcil e geralmente impratic\u00e1vel.</p> <p>Baseado na an\u00e1lise de canais, podemos dizer que a Cifra de Vernam, ainda que um exemplo pr\u00e1tico j\u00e1 existente na \u00e9poca de Shannon, tinha como caracter\u00edsticas: - Alto custo computacional. Justificava: era necess\u00e1rio no m\u00ednimo 2 vezes o tamanho da mensagem. - Baixa velocidade. Justificativa: conseguir uma verdadeira aleatoriedade de valores \u00e9 um processo lento e demorado. -  - Seguran\u00e7a alta.</p>"},{"location":"criptografia/criptografia-moderna/shannon/#modelo-de-sistema-criptografico-de-shannon","title":"Modelo de Sistema Criptogr\u00e1fico de Shannon","text":"<p>Shannon formalizou o modelo criptogr\u00e1fico atrav\u00e9s de seus artigos e ideias sobre perfect secrecy. Em seu modelo:</p> <ol> <li>Fulano quer enviar uma mensagem para Cicrano.</li> <li>Um sistema externo envia uma chave criptogr\u00e1fica por canal seguro a ambos.</li> <li>Fulano utiliza um Encriptador C(o, k), que utiliza como par\u00e2metros o texto original(o) e a chave compartilhada(k). A chave \u00e9 relevante na encripta\u00e7\u00e3o, alterando o resultado com base em seu valor.</li> <li>O texto cifrado \u00e9 enviado a Cicrano.</li> <li>Cicrano utiliza o Decriptador D(c, k), que pede como par\u00e2metros o texto encriptado(c) e a chave compartilhada(k) para ent\u00e3o decifrar a mensagem.</li> <li>Cicrano consegue ler o texto original.</li> </ol> <p></p> <p>Esse modelo j\u00e1 estava em vigor em alguns sistemas militares na \u00e9poca e seria mais tarde fixado como o modelo da criptografia sim\u00e9trica, muito utilizada nos dias de hoje e essencial para o funcionamento da maioria, se n\u00e3o de todos os sistemas criptogr\u00e1ficos.</p> <p>Perceba que o modelo acima tamb\u00e9m possui 2 canais, o canal da chave secreta e o canal da mensagem. O modelo de Shannon nos permite fazer com que somente o canal de transmiss\u00e3o da chave necessite de seguran\u00e7a, j\u00e1 que o canal da mensagem n\u00e3o indica nenhuma pista sobre o valor da chave secreta. Separando assim o problema, agora podemos focar em aumentar os outros indicadores do canal de transmiss\u00e3o da mensagem, enquanto o canal da chave, que de fato precisa de seguran\u00e7a, n\u00e3o precisa de tanto investimento nos outros indicadores.</p> <ul> <li>Por que o canal da mensagem n\u00e3o precisa melhorar os outros indicadores?</li> </ul> <p>Chaves costumam ter um tamanho menor do que a mensagem. \u00c9 muito mais f\u00e1cil proteger um pequeno canal do que um grande canal. Perceba tamb\u00e9m que a Cifra de Vernam possui o tamanho de chave igual ao da mensagem, j\u00e1 n\u00e3o se enquadrando t\u00e3o bem nessa ideia do modelo.</p>"},{"location":"criptografia/criptografia-moderna/shannon/#entropia","title":"Entropia","text":"<p>Shannon emprestou da teoria da informa\u00e7\u00e3o muitos conceitos em seus artigos, como a palavra bit, que significava uma \"batida, escolha\" na de Probabilidade. A partir do bit, que hoje \u00e9 adotado amplamente na teoria da computa\u00e7\u00e3o, Shannon pensou na entropia, essencial na criptoan\u00e1lise.</p> <p>Pensando em probabilidade, a entropia \u00e9 definida como a m\u00e9dia de incerteza de uma escolha. Em termos simples, a entropia \u00e9 m\u00e1xima quando for mais dif\u00edcil de adivinhar qual o resultado de uma escolha ou s\u00e9rie de escolhas.</p> <p>Por exemplo:</p> <p>Se algu\u00e9m bate na sua campainha, temos 4% de chance de ser um ladr\u00e3o, 16% de chance de ser a sua encomenda internacional e 80% de chance de ser algu\u00e9m vindo te cobrar o aluguel. Com quantas perguntas de \"sim ou n\u00e3o\" consigo decobrir quem \u00e9?</p> <p>Pensemos que as perguntas seriam estas:</p> <p>A m\u00e9dia de perguntas seria:</p> <pre><code>*Perguntas = probabilidade(Ladr\u00e3o) * quantas_perguntas(Ladr\u00e3o) + probabilidade(Amigo) * quantas_perguntas(Amigo) + probabilidade(Cobrador) * quantas_perguntas(Cobrador)*\n</code></pre> <p>OU</p> <pre><code>perfis = [ladrao, amigo, cobrador]\nresultado = 0\nfor perfil in perfis:\n    resultado += probabilidade(perfil) * quantas_perguntas(perfil)\n</code></pre> <p>Por empirismo, a entropia de qualquer s\u00e9rie de escolhas pode ser representada por uma concavidade para baixo, com o pico de entropia sendo quando as chances para cada escolha s\u00e3o as mesmas.</p>"},{"location":"dados/leis/","title":"Hist\u00f3ria das leis de prote\u00e7\u00e3o de dados no Brasil","text":""},{"location":"dados/leis/#_1","title":"Hist\u00f3ria das leis de prote\u00e7\u00e3o de dados no Brasil","text":""},{"location":"dados/leis/#marco-civil-da-internet","title":"Marco Civil da Internet","text":""},{"location":"dados/leis/#lgpd","title":"LGPD","text":""},{"location":"defesa/postura-defensiva/","title":"Postura Defensiva","text":""},{"location":"defesa/postura-defensiva/#passiva","title":"Passiva","text":"<p>Reagir quando surge algum problema. Acontece em toda empresa e deve existir processos para lidar de forma procedural e organizada com isso. Mas a seguran\u00e7a n\u00e3o deve se resumir a isso.</p>"},{"location":"defesa/postura-defensiva/#ativa","title":"Ativa","text":""},{"location":"defesa/postura-defensiva/#gestao-de-vulnerabilidades-cis-7","title":"Gest\u00e3o de Vulnerabilidades (CIS 7)","text":"<ul> <li>Infraestrutura e Aplica\u00e7\u00f5es</li> <li>Scan Interno e Externo</li> <li>Prioriza\u00e7\u00e3o e Remedia\u00e7\u00e3o</li> </ul>"},{"location":"defesa/postura-defensiva/#monitoramento-da-superficie-de-ataque","title":"Monitoramento da Superf\u00edcie de Ataque","text":"<p>N\u00e3o faz sentido fazer isso sem primeiro organizar a gest\u00e3o de vulnerabilidades.</p>"},{"location":"defesa/postura-defensiva/#testes-de-seguranca-ofensiva","title":"Testes de Seguran\u00e7a Ofensiva","text":""},{"location":"defesa/postura-defensiva/#pentests-cis-18","title":"Pentests (CIS 18)","text":"<ul> <li>Reativo e Sob Demanda</li> <li>Externo e Interno</li> </ul>"},{"location":"defesa/postura-defensiva/#vulnerability-disclosure-program-vdp-e-programas-de-bug-bounty","title":"Vulnerability Disclosure Program (VDP) e Programas de Bug Bounty","text":"<ul> <li>Tradicional.</li> <li>\"Estrat\u00e9gica\".</li> </ul>"},{"location":"defesa/postura-defensiva/#red-team","title":"Red Team","text":"<p>Faz campanhas simulando um advers\u00e1rio.</p>"},{"location":"defesa/defesa-de-esteira/","title":"Introdu\u00e7\u00e3o","text":"<p>\u00c9 o ramo da defesa focado em seguran\u00e7a no ciclo de desenvolvimento de software. O DevSecOps \u00e9 a abordagem mais famosa de englobamento de </p>"},{"location":"defesa/defesa-de-esteira/autenticacao/","title":"Autentica\u00e7\u00e3o Segura","text":"<p>N\u00e3o tentar reinventar a roda aqui, usar bibliotecas prontas pela complexidade da tarefa para ser feita corretamente.</p>"},{"location":"defesa/defesa-de-esteira/autenticacao/#usar-algoritmos-de-hash-de-senha-fortes-e-seguros","title":"Usar algor\u00edtmos de hash de senha fortes e seguros","text":""},{"location":"defesa/defesa-de-esteira/autenticacao/#algoritmos-fracos","title":"Algor\u00edtmos fracos","text":"<ul> <li>MD5</li> <li>SHA1</li> <li>At\u00e9 o SHA256 j\u00e1 n\u00e3o \u00e9 t\u00e3o recomendado.</li> </ul>"},{"location":"defesa/defesa-de-esteira/autenticacao/#algortimos-seguros","title":"Algort\u00edmos seguros","text":"<ul> <li>Algor\u00edtmo do bcrypt</li> <li>Algor\u00edtmo do scrypt</li> <li>Algor\u00edtmo do argon2</li> </ul>"},{"location":"defesa/defesa-de-esteira/autenticacao/#evitar-tokens-persistentes-demais-e-cookies-inseguros","title":"Evitar tokens persistentes demais e cookies inseguros","text":"<ul> <li>Adicionar flags de seguran\u00e7a nos cookies.</li> <li>Inserir prazo de vida curto do token, sess\u00e3o</li> </ul>"},{"location":"defesa/defesa-de-esteira/autenticacao/#mfa-sempre-que-possivel","title":"MFA sempre que poss\u00edvel","text":""},{"location":"defesa/defesa-de-esteira/autenticacao/#protecao-contra-brute-force","title":"Prote\u00e7\u00e3o contra brute force","text":"<p>Bloqueio dessas tentativas</p>"},{"location":"defesa/defesa-de-esteira/autenticacao/#fluxos-modernos","title":"Fluxos modernos","text":"<ul> <li>Oauth2</li> <li>OpenID Connect</li> </ul>"},{"location":"defesa/defesa-de-esteira/autenticacao/#gerenciamento-de-sessao","title":"Gerenciamento de Sess\u00e3o","text":""},{"location":"defesa/defesa-de-esteira/autenticacao/#gestao-de-bibliotecas","title":"Gest\u00e3o de Bibliotecas","text":"<ul> <li>Uso de SAST</li> <li>Pinagem de vers\u00e3o</li> </ul>"},{"location":"defesa/defesa-de-esteira/autenticacao/#revisao-de-codigo","title":"Revis\u00e3o de C\u00f3digo","text":""},{"location":"defesa/defesa-de-esteira/autenticacao/#checklist-minimo-para-revisao-segura","title":"Checklist m\u00ednimo para revis\u00e3o segura:","text":"<p>Revis\u00e3o de c\u00f3digo n\u00e3o deve ser ca\u00e7a \u00e0s bruxas</p> <p>Tamb\u00e9m \u00e9 interessante colocar checklists em PRs, mas traz a dificuldade do desenvolvedor ter de entender sobre os itens do checklist antes de fazer o Pull Request:</p> <p></p>"},{"location":"defesa/defesa-de-esteira/devsecops/","title":"DevSecOps","text":"<p>Integrar os times de desenvolvimento, seguran\u00e7a e opera\u00e7\u00e3o. Os 3 times devem trabalhar com sinergia para alcan\u00e7ar um produto de qualidade. DevSecOps \u00e9 tamb\u00e9m uma mudan\u00e7a organizacional e cultural.</p> <p></p> <p>Realisticamente, a seguran\u00e7a normalmente \u00e9 aplicada somente na opera\u00e7\u00e3o, no final do desenvolvimento ou de forma reativa (rea\u00e7\u00e3o a bugs encontrados).</p> <p>Os seguintes movimentos/conceitos buscam a aplica\u00e7\u00e3o da seguran\u00e7a tamb\u00e9m em outras etapas do produto: - Security by design: modelar software com estrat\u00e9gias de neg\u00f3cio e esquemas que incentivem a seguran\u00e7a. - Shift Left / Deslocamento \u00e0 Esqueda: a ideia \u00e9 se deslocar a seguranimplementar a seguran\u00e7a desde as fases iniciais do produto. O m - Secure Software Development Cycle (S-SDLC): estabelece um ciclo seguro de desenvolvimento de software, focando na seguran\u00e7a desde as fases iniciais do desenvolvimento.</p> <p>Enquanto o desenvolvimento e a opera\u00e7\u00e3o, os times tem uma posi\u00e7\u00e3o espec\u00edfica no andamento dos produtos, a seguran\u00e7a idealmente deve atuar diretamente em todas as etapas do produto: - Planejamento -</p>"},{"location":"defesa/defesa-de-esteira/devsecops/#testes-automatizados-de-seguranca-de-aplicacao","title":"Testes automatizados de Seguran\u00e7a de Aplica\u00e7\u00e3o:","text":""},{"location":"defesa/defesa-de-esteira/devsecops/#static-application-security-testingsast","title":"Static Application Security Testing(SAST)","text":"<p>Testes de caixa branca que analisam c\u00f3digo a procura de padr\u00f5es e trechos de c\u00f3digo perigosos. Infelizmente costuma causar muitos falsos positivos e nem sempre \u00e9 claro o bastante no feedback para ajudar o desenvolvedor a consertar o erro, causando frustra\u00e7\u00e3o.</p> <p>Exemplo de ferramentas: SonarCloud</p>"},{"location":"defesa/defesa-de-esteira/devsecops/#dynamic-application-security-testingdast","title":"Dynamic Application Security Testing(DAST)","text":"<p>Testes de caixa preta que costumam analisar os comportamentos da aplica\u00e7\u00e3o. Busca erros comportamentais e a\u00e7\u00f5es suspeitas na aplica\u00e7\u00e3o.</p> <p>Exemplo: Burp Suite, OWASP ZAP</p>"},{"location":"defesa/defesa-de-esteira/devsecops/#infrastructure-application-security-testingiast","title":"Infrastructure Application Security Testing(IAST)","text":"<p>Combina\u00e7\u00e3o do SAST e DAST e uma \u00fanica ferramenta.</p>"},{"location":"defesa/defesa-de-esteira/devsecops/#runtime-application-self-protection-rasp","title":"Runtime Application Self Protection (RASP)","text":""},{"location":"defesa/defesa-de-esteira/devsecops/#software-compose-analysis-sca","title":"Software Compose Analysis (SCA)","text":"<p>Analisa as tecnologias que o sistema emprega no projeto, cehcando as depend\u00eancias e suas licen\u00e7as e pol\u00edticas de compliance. \u00c9 importante para usar software com as devidas autoriza\u00e7\u00f5es e entender a real composi\u00e7\u00e3o de uma biblioteca.</p> <p>Ficou bem famoso ap\u00f3s a vulnerabilidade do log4j, porque muitos nem que os seus projetos usavam log4j. O que acontecia era que eles usavam uma biblioteca que usava outra biblioteca que por fim usava log4j.</p>"},{"location":"defesa/defesa-de-esteira/devsecops/#_1","title":"DevSecOps","text":""},{"location":"defesa/defesa-de-esteira/recursos/","title":"Recursos","text":"<ul> <li>OWASP TOP 10</li> <li>OWASP TOP 10 Proactive controls</li> <li>OWASP ASVS</li> <li>Owasp Developer Guide</li> <li>OWASP SAMM</li> </ul>"},{"location":"defesa/defesa-de-esteira/validacao/","title":"Valida\u00e7\u00e3o","text":""},{"location":"defesa/defesa-de-esteira/validacao/#validacao-de-entradas","title":"Valida\u00e7\u00e3o de Entradas","text":"<p>Na seguran\u00e7a, a valida\u00e7\u00e3o das entradas \u00e9 essencial para evitar erros por entradas inesperadas. Entradas maliciosas podem gerar manipula\u00e7\u00e3o de recursos internos e gerar danos aos ativos. Exemplos de ataques decorrentes de valida\u00e7\u00e3o prec\u00e1ria s\u00e3o: - SQL Injection - XSS - Outros tipos de manipula\u00e7\u00e3o</p>"},{"location":"defesa/defesa-de-esteira/validacao/#validacao-sintatica","title":"Valida\u00e7\u00e3o Sint\u00e1tica","text":"<p>Garante que os dados sigam a sintaxe correta. Exemplo: se eu espero letras, s\u00f3 devo aceitar letras, n\u00e3o n\u00fameros.</p>"},{"location":"defesa/defesa-de-esteira/validacao/#validacao-semantica","title":"Valida\u00e7\u00e3o Sem\u00e2ntica","text":"<p>Garante que o dado faz sentido. Exemplo: se eu pedir duas datas para um per\u00edodo, preciso garantir que a data final seja ap\u00f3s a data inicial.</p>"},{"location":"defesa/defesa-de-esteira/validacao/#validacao-allow-list","title":"Valida\u00e7\u00e3o Allow List","text":"<p>S\u00f3 aceita o que \u00e9 permitido. Tudo fora do padr\u00e3o \u00e9 negado! Isso \u00e9 deny by default e portanto \u00e9 recomendado.</p>"},{"location":"defesa/defesa-de-esteira/validacao/#validacao-deny-list","title":"Valida\u00e7\u00e3o Deny List","text":"<p>Permite tudo, com exce\u00e7\u00e3o de padr\u00f5es perigosos espec\u00edfico. N\u00e3o recomendado.</p>"},{"location":"defesa/defesa-de-esteira/validacao/#validacao-client-side","title":"Valida\u00e7\u00e3o Client Side","text":"<p>Valida no lado do cliente, antes mesmo de mandar aos servidores.</p> <p>O usu\u00e1rio pode enviar os dados diretamente ao servidor, ultrapassando essa valida\u00e7\u00e3o. Potanto essa valida\u00e7\u00e3o serve somente para UX, n\u00e3o serve para seguran\u00e7a!</p>"},{"location":"defesa/defesa-de-esteira/validacao/#validacao-server-side","title":"Valida\u00e7\u00e3o Server Side","text":"<p>Diferente da Client Side, essa \u00e9 obrigat\u00f3ria em todos os casos. Como o usu\u00e1rio n\u00e3o pode mais</p>"},{"location":"defesa/defesa-de-esteira/ciclos-de-vida-seguro/lifecycle/","title":"Lifecycle","text":""},{"location":"defesa/defesa-de-esteira/ciclos-de-vida-seguro/lifecycle/#microsoft-sdl","title":"Microsoft SDL","text":"<p>Nasceu quando a Microsoft era conhecida pelos bugs do Windows, l\u00e1 por 2004. Eles criaram o Microsoft Secure Development Lifecycle para tentar melhorar a seguran\u00e7a no desenvolvimento dos seus softwares.</p>"},{"location":"defesa/defesa-de-esteira/ciclos-de-vida-seguro/lifecycle/#microsoft-sfi","title":"Microsoft SFI","text":"<p>A Microsoft </p>"},{"location":"defesa/defesa-de-esteira/seguranca-de-aplicacoes/","title":"Index","text":"<p>Desenvolvimento Seguro: seguran\u00e7a em todo o ciclo de desenvolvimento do software, incluindo design, arquitetura, desenvolvimento, testes, etc. Design Seguro An\u00e1lise de Frameworks Revis\u00e3o de C\u00f3digo Testes de Seguran\u00e7a An\u00e1lise de vulnerabilidades Prote\u00e7\u00e3o de Bibliotecas</p>"},{"location":"defesa/defesa-de-esteira/seguranca-de-aplicacoes/desenvolvimento-seguro/","title":"Desenvolvimento Seguro","text":"<p>\u00c9 pensar em seguran\u00e7a e tomar decis\u00f5es pensadas nisso durante todas as etapas do desenvolvimento, at\u00e9 mesmo desde os requisitos e arquitetura.</p>"},{"location":"defesa/defesa-de-esteira/seguranca-de-aplicacoes/desenvolvimento-seguro/#as-atividades-incluem","title":"As atividades incluem:","text":"<ul> <li>Mapear riscos e vulnerabilidades proativamente.</li> <li>Revis\u00e3o de c\u00f3digo</li> </ul>"},{"location":"defesa/defesa-de-esteira/seguranca-de-aplicacoes/desenvolvimento-seguro/#pilares","title":"Pilares","text":"<ul> <li>Requisitos</li> <li>Design: identificar amea\u00e7as aos quais o seu software pode estar exposto - Modelagem de Amea\u00e7as.</li> <li>Coding: avalia\u00e7\u00e3o de c\u00f3digos por vulnerabilidades - SAST, DAST, SCA e Code Review.</li> <li>Testes:</li> <li>Produ\u00e7\u00e3o:</li> <li>Manuten\u00e7\u00e3o:</li> </ul>"},{"location":"defesa/defesa-de-esteira/threat_modeling/","title":"Introdu\u00e7\u00e3o a Modelagem de Amea\u00e7as","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/#o-que-e-modelagem-de-ameacas","title":"O que \u00e9 Modelagem de Amea\u00e7as","text":"<p>Com a grande quantidade de amea\u00e7as e vulnerabilidades, \u00e0s vezes \u00e9 dif\u00edcil introduzir a seguran\u00e7a a aplica\u00e7\u00f5es. \u00c9 dif\u00edcil saber por onde come\u00e7ar, o que priorizar e como executar as preven\u00e7\u00f5es e prote\u00e7\u00f5es. \u00c9 nesse contexto de dificuldade que entra a modelagem de amea\u00e7as.</p> <p>Modelagem de amea\u00e7as \u00e9 o processo sistem\u00e1tico e repetitivo de identificar e classificar as poss\u00edveis vulnerabilidades e amea\u00e7as de um software a serem exploradas.</p> <p>Ela segue uma abordagem de seguran\u00e7a proativa ao possibilitar que desenvolvedores descubram e avaliem vulnerabilidades e amea\u00e7as antes que elas aconte\u00e7am. \u00c9 diferente da seguran\u00e7a reativa, a qual as amea\u00e7as devem primeiro ser exploradas para depois avali\u00e1-las e mitig\u00e1-las.</p> <p>Sua caracter\u00edstica sistem\u00e1tica e procedural o permite ser integrado a esteiras e ciclos de desenvolvimento de desenvolvimento de software. Em rela\u00e7\u00e3o a implementa\u00e7\u00e3o da modelagem de amea\u00e7as nesse contexto: - \u00c9 melhor empregado durante a elabora\u00e7\u00e3o de requisitos e design de um produto. O quanto antes do lan\u00e7amento, melhor, permitindo aos desenvolvedores aproveitar mais a caracter\u00edstica proativa da modelagem.  - Em ciclos e metodologias \u00e1geis, os requisitos e design do produto podem mudar. Por isso, a modelagem de amea\u00e7as deve ser repetida a cada itera\u00e7\u00e3o para se manter atualizada a realidade do projeto. - A partir do processo de modelagem de amea\u00e7as, pode-se inferir requisitos de seguran\u00e7a.</p>"},{"location":"defesa/defesa-de-esteira/threat_modeling/#o-processo-em-si","title":"O processo em si","text":"<p>Como j\u00e1 foi dito anteriormente, a modelagem de amea\u00e7as \u00e9 um processo sistem\u00e1tico. H\u00e1 diversas maneiras de realiz\u00e1-la, mas alguns aspectos s\u00e3o presentes em quaisquer modelagem de amea\u00e7as:</p> <ul> <li> <p>Como input, toda modelagem de amea\u00e7as precisa ao menos do entendimento e funcionamento da aplica\u00e7\u00e3o/solu\u00e7\u00e3o. Por isso \u00e9 interessante que stakeholders e/ou desenvolvedores estejam presentes durante a elabora\u00e7\u00e3o da modelagem de amea\u00e7as.</p> </li> <li> <p>Como output, a modelagem de amea\u00e7as sempre busca entregar uma lista de amea\u00e7as que podem ser exploradas no software e ranqueadas por relev\u00e2ncia e facilidades.</p> </li> <li> <p>Artefatos comuns envolvidos:</p> <ul> <li>Diagrama de Fluxo de Dados (DFD)</li> <li>Lista de amea\u00e7as e vulnerabilidades</li> <li>Ranqueamento de amea\u00e7as e vulnerabildiades.</li> </ul> </li> </ul> <p>O processo em si de todo processo de modelagem de amea\u00e7as recai sobre as seguintes etapas:</p> <ol> <li>Decidir o escopo, quanto do software ser\u00e1 inclu\u00eddo na modelagem, quais regula\u00e7\u00f5es e pol\u00edticas de seguran\u00e7a devem ou n\u00e3o devem ser consideradas.</li> <li>Analisar o Alvo, normalmente sendo  acompanhado da cria\u00e7\u00e3o do Diagrama de Fluxo de Dados (DFD).</li> <li>Identificar e Enumerar as amea\u00e7as</li> <li>Classificar as amea\u00e7as</li> </ol> <p>Mais etapas, como enumerar meios de mitiga\u00e7\u00e3o e criar avalia\u00e7\u00f5es de risco podem ser inclu\u00eddas nesse processo, mas normalmente s\u00e3o mais associadas a processos de An\u00e1lise de Amea\u00e7a, diferentes dos processos de Modelagem de Amea\u00e7as. Infelizmente, isso n\u00e3o impede que em situa\u00e7\u00f5es reais, empresas pe\u00e7am Modelagem de Amea\u00e7a esperando tamb\u00e9m An\u00e1lise de Amea\u00e7a.</p>"},{"location":"defesa/defesa-de-esteira/threat_modeling/#indice","title":"\u00cdndice","text":"<p>\u00c0 seguir, h\u00e1 o \u00edndice dos conte\u00fados a serem aprofundados no assunto Modelagem de Amea\u00e7as.</p> <ol> <li>Abordagens<ul> <li>Centrado em Aplica\u00e7\u00e3o</li> <li>Centrado em Ativos</li> <li>Centrado em Ataques</li> </ul> </li> <li>Diagrama de Fluxo de Dados</li> <li>Metodologias<ul> <li>PASTA</li> <li>Microsoft Threat Modeling</li> <li>TRIKE</li> <li>OCTAVE</li> <li>VAST</li> <li>LINNDUN</li> </ul> </li> <li>Modelos de Enumera\u00e7\u00e3o e Classifica\u00e7\u00e3o de Amea\u00e7as<ul> <li>STRIDE</li> <li>Bibliotecas de Ataque</li> <li>\u00c1rvores de Ataque</li> </ul> </li> <li>Modelos de Ranqueamento de Amea\u00e7as<ul> <li>CVSS</li> <li>CWSS</li> </ul> </li> </ol>"},{"location":"defesa/defesa-de-esteira/threat_modeling/dataflow/","title":"Diagrama de Fluxo de Dados (DFD)","text":"<p>Um DFD \u00e9 um diagrama que mapea o fluxo de dados atrav\u00e9s de um sistema. Ele \u00e9 simples e muito comum, porque pode ser usado para: - Compreender o funcionamento da aplica\u00e7\u00e3o - Descrever e detalhar a arquitetura do sistema  - Servir de base para modelagem de amea\u00e7as</p>"},{"location":"defesa/defesa-de-esteira/threat_modeling/dataflow/#criando-um-dfd","title":"Criando um DFD","text":"<p>Criar um DFD \u00e9 simples e n\u00e3o necessita de ferramenta especializada. Voc\u00ea pode at\u00e9 mesmo cri\u00e1-la \u00e0 l\u00e1pis.</p> <p>Entretanto, antes de criar qualquer DFD, \u00e9 necess\u00e1rio definir o escopo do seu diagrama. O n\u00edvel de abstra\u00e7\u00e3o de um DFD n\u00e3o \u00e9 fixo e portanto deve ser ajustado ao projeto. N\u00e3o \u00e9 interessante que um DFD detalhe demais elementos que n\u00e3o precisa detalhar para a modelagem de dados. Assim como n\u00e3o \u00e9 interessante e ele abstraia processos importantes a serem analisados.</p>"},{"location":"defesa/defesa-de-esteira/threat_modeling/dataflow/#elementos-de-um-dfd","title":"Elementos de um DFD","text":"<p>Processo: normalmente representado por um ret\u00e2ngulo com v\u00e9rtices arrendondadas. Descreve um ou mais transforma\u00e7\u00f5es ou tratamentos de dados. Exemplo: recebimento de requisi\u00e7\u00f5es HTTP.</p> <p></p> <p>Fluxo de Dados: normalmente representado por setas, indicando que elemento distribui e que elemento recebe os dados. V\u00e1rias setas de fluxo de dados est\u00e3o presentes em um DFD. Exemplo: input do usu\u00e1rio para o servidor web HTTP.</p> <p></p> <p>Entidade Externa: representados por ret\u00e2ngulos com v\u00e9rtices pontiagudos. Descrevem agentes fora do sistema estudado ou processos cuja atua\u00e7\u00e3o nos dados n\u00e3o \u00e9 completamente controlada ou conhecida. Exemplo: usu\u00e1rio. Atrav\u00e9s dos elementos externo e processos, o n\u00edvel de abstra\u00e7\u00e3o do DFD pode ser controlado.</p> <p></p> <p>Armazenamento: Representado por duas linhas horizontais e paralelas, com o nome do dispositivo armazenador entre elas.</p> <p></p> <p>Fronteira de Confian\u00e7a: representada for uma linha pontilhada, a fronteira de confian\u00e7a separa entidades com diferentes n\u00edveis de confian\u00e7a pelo sistema. Por exemplo: \u00e9 justo separar o n\u00edvel de confian\u00e7a de um admnistrador e usu\u00e1rio caso for interessante ao seu DFD. Tamb\u00e9m \u00e9 comum incluir uma fronteira para separar o que se considera internet e o que \u00e9 considerado processamento interno.</p> <p></p>"},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_classification_models/","title":"Modelos de Classifica\u00e7\u00e3o de Amea\u00e7as","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_classification_models/#stride","title":"STRIDE","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_classification_models/#alternativas","title":"Alternativas","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_classification_models/#bibliotecas-de-ataques","title":"Bibliotecas de Ataques","text":"<ul> <li>MITRE CAPEC</li> </ul>"},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_classification_models/#arvores-de-ataques","title":"\u00c1rvores de Ataques","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_aproaches/","title":"Abordagens de Modelagem de Amea\u00e7a","text":"<p>Existem v\u00e1rias abordagens para come\u00e7ar a modelar amea\u00e7as. As diferentes metologias utilizadas no mercado para modelar amea\u00e7as seguem algumas dessas abordagens e assim listam passo a passo do que fazer para modelar amea\u00e7as em seu projeto.</p> <p>Em geral, s\u00e3o 3 abordagens: - Centrada em Aplica\u00e7\u00e3o - Centrada em Ativos/Risco - Centrada em Ataques</p>"},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_aproaches/#modelagem-centrada-em-aplicacao","title":"Modelagem Centrada em Aplica\u00e7\u00e3o","text":"<p>P\u00fablico-Alvo envolvido: time de desenvolvedores.</p> <ol> <li>Compreenda e visualize a aplica\u00e7\u00e3o na qual voc\u00ea est\u00e1 trabalhando. Como resultado, crie um Diagrama de Fluxo de Dados</li> <li> <p>Liste amea\u00e7as para cada elemento do DFD a partir de um Modelo de Classifica\u00e7\u00e3o de Amea\u00e7as.</p> </li> <li> <p>Ranqueie cada amea\u00e7a com base no Modelo de Classifica\u00e7\u00e3o de Amea\u00e7as.</p> </li> </ol> <p>Modelos de Classifica\u00e7\u00e3o de Amea\u00e7as s\u00e3o modelos que determinam quais lugares/momentos/sistemas s\u00e3o sucet\u00edvies a quais amea\u00e7as. Exemplos: STRIDE, Owasp Top 10.</p> <ul> <li>Benef\u00edcios<ul> <li>Garante um entendimento comum do funcionamento da aplica\u00e7\u00e3o.</li> <li>Gera maior compartilhamento de conhecimento.</li> </ul> </li> <li>Desvantagens<ul> <li>Necessita boa documenta\u00e7\u00e3o.</li> <li>Pode ser dif\u00edcil de abstrair amea\u00e7as a partir a aplica\u00e7\u00e3o.</li> <li>Pode ser dif\u00edcil de perceber bugs e vulnerabilidades de uma aplica\u00e7\u00e3o que voc\u00ea mesmo contruiu.</li> </ul> </li> </ul>"},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_aproaches/#modelagem-centrada-em-ativosrisco","title":"Modelagem Centrada em Ativos/Risco","text":"<p>P\u00fablico-Alvo envolvido: stakeholders.</p> <ol> <li>Crie uma lista de ativos.</li> <li>Compreenda cada ativo e como eles funcionam no sistema. Como resultado, produza um Diagrama de Fluxo de Dados</li> <li> <p>Para cada ativo, procure amea\u00e7as que possam atingi-lo.</p> </li> <li> <p>Benef\u00edcios</p> <ul> <li>Quando a equipe j\u00e1 conhece os ativos, essa abordagem acaba sendo o caminho mais natural a se seguir.</li> <li>Os ativos est\u00e3o sempre em foco. Dessa forma sempre sabemos o que temos que proteger, tornando essa abordagem mais objetiva para pessoas menos t\u00e9cnicas.</li> <li>Mais compreens\u00edvel e amig\u00e1vel para pessoas pr\u00f3ximas ao neg\u00f3cio.</li> <li>\u00datil para quando se faz auditorias de avalia\u00e7\u00e3o de riscos</li> </ul> </li> <li> <p>Malef\u00edcios</p> <ul> <li>Pode ser complicado traduzir ativos para os componentes de Diagramas de Fluxos de Dados.</li> <li>Pode ser complicado extrair amea\u00e7as dos ativos.</li> <li>Ao focarmos nos ativos, o entendimento do sistema da aplica\u00e7\u00e3o em si fica em segundo plano. Como muitas amea\u00e7as da modelagem de amea\u00e7as de um sistema aparecem principalmente sobre aspectos t\u00e9cnicos, isso pode atrasar a modelagem em si.</li> </ul> </li> </ol>"},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_aproaches/#modelagem-centrada-em-ameacas","title":"Modelagem Centrada em Amea\u00e7as","text":"<p>P\u00fablico-Alvo envolvido: pentesters</p> <ol> <li>Criar uma lista de atores de amea\u00e7as com seus:<ul> <li>motivos;</li> <li>recursos; e</li> <li>poss\u00edveis ataques</li> </ul> </li> <li> <p>A partir do passo anterior, j\u00e1 \u00e9 poss\u00edvel extrair uma lista de amea\u00e7as.</p> </li> <li> <p>Benef\u00edcios</p> <ul> <li>Torna os ataques mais vis\u00edveis e explic\u00e1veis.</li> <li>Pode ser divertido de produzir. </li> </ul> </li> <li>Malef\u00edcios<ul> <li>Extremamente enviesado.</li> <li>Pode gerar cen\u00e1rios de amea\u00e7as pouco pr\u00e1ticos, mais parecidos com filmes.</li> <li>Necessita de pessoas com conhecimento em seguran\u00e7a de aplica\u00e7\u00f5es. A falta de pessoas com o conhecimento pode gerar cen\u00e1rios de amea\u00e7a faltando.</li> </ul> </li> </ol>"},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_methodologies/","title":"Metodologias de Modelagem de Amea\u00e7as","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_methodologies/#padrao-de-metodologias","title":"Padr\u00e3o de Metodologias","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_methodologies/#pasta","title":"PASTA","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_methodologies/#microsoft-threat-modeling","title":"Microsoft Threat Modeling","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_methodologies/#octave","title":"OCTAVE","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_methodologies/#trike","title":"TRIKE","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_model_methodologies/#vast","title":"VAST","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_ranking_models/","title":"Modelos de Classifica\u00e7\u00e3o e Ranqueamento de Amea\u00e7as","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_ranking_models/#dread","title":"DREAD","text":""},{"location":"defesa/defesa-de-esteira/threat_modeling/threat_ranking_models/#cvss","title":"CVSS","text":""},{"location":"defesa/defesa-operacional/","title":"\u00cdndice","text":""},{"location":"defesa/defesa-operacional/#risco-e-defesa","title":"Risco e Defesa","text":""},{"location":"defesa/defesa-operacional/#estrategias-de-defesa","title":"Estrat\u00e9gias de Defesa","text":"<ul> <li>Network Control Access</li> <li>Pontos de Estrangulamento (para aplicar defesas em pontos espec\u00edficos)</li> <li>Arquitetura Zero Trust</li> <li>Defesa em Profundidade</li> </ul>"},{"location":"defesa/defesa-operacional/#visibilidade-defensiva","title":"Visibilidade Defensiva","text":"<ul> <li>SIEM</li> <li>SOAR</li> </ul>"},{"location":"defesa/defesa-operacional/#resposta-a-incidentes","title":"Resposta a Incidentes","text":"<ul> <li>Antivirus (AV)</li> <li>Incident Prevention System (IPS)</li> <li>Incident Detection System (IDS)</li> <li>EDR / NDR / XDR</li> </ul>"},{"location":"defesa/defesa-operacional/#privacidade-e-controle","title":"Privacidade e Controle","text":"<ul> <li>Proxy</li> <li>VPN</li> <li>Firewall</li> <li>Lista negra e branca</li> <li>Antispam</li> <li>Web Application Firewall</li> <li>Domain Name System Firewall</li> <li>Database Firewall</li> </ul>"},{"location":"defesa/defesa-operacional/#devsecops","title":"DevSecOps","text":"<ul> <li>Scans de Vulnerabilidade e Exposi\u00e7\u00e3o</li> <li>Testes de Seguran\u00e7a</li> <li>An\u00e1lise de Composi\u00e7\u00e3o de Software (SCA)</li> </ul>"},{"location":"defesa/defesa-operacional/#inteligencia-de-ameacas","title":"Intelig\u00eancia de Amea\u00e7as","text":"<ul> <li>CVE e CVSS</li> </ul>"},{"location":"defesa/defesa-operacional/#hardening","title":"Hardening","text":"<ul> <li>De Windows</li> <li>De Linux</li> </ul>"},{"location":"defesa/defesa-operacional/#outros","title":"Outros","text":"<ul> <li>Honeypots</li> <li>Sandbox</li> <li>Data Loss Prevention (DLP)</li> </ul>"},{"location":"defesa/defesa-operacional/ameacas/","title":"Evolu\u00e7\u00e3o das Amea\u00e7as","text":""},{"location":"defesa/defesa-operacional/ameacas/#era-dos-codigos-maliciosos-1975-1995","title":"Era dos C\u00f3digos Maliciosos (1975 - 1995)","text":"<p>Softwares maliciosos come\u00e7aram a ser criados. Para lidar com eles, sistemas de identifica\u00e7\u00e3o e bloqueio desses programas foram criados.</p> <p>Foram criadas tecnologias de defesa de per\u00edmetro: - Firewall - Antivirus - Proxy - Intrusion Detecion System (IDS)</p>"},{"location":"defesa/defesa-operacional/ameacas/#era-da-pandemia-de-codigo-malicioso-1996-2001","title":"Era da Pandemia de C\u00f3digo Malicioso (1996-2001)","text":"<p>Explos\u00f5es de ataques de malware pela internet fizeram com que a prote\u00e7\u00e3o de um sistema tivesse que ser feita a partir de v\u00e1rias ferramentas e mecanismos diferentes. O processo de defesa tornava-se mais complexo e as informa\u00e7\u00f5es eram mais dif\u00edceis de se correlacionar quando espalhadas por diversas ferramentas. Para evitar essa complexidade, foram adotadas tecnologias que: - Centralizassem a visibilidade da defesa, como o SIEM; e - Avisassem brechas na defesa ainda no desenvolvimento, como Scanners de Vulnerabilidades.</p> <p>Como consequ\u00eancia, tamb\u00e9m foi nessa era que os Provedores de Gerenciamneto de Servi\u00e7os de Seguran\u00e7a (MSSP) apareceram.</p>"},{"location":"defesa/defesa-operacional/ameacas/#era-das-cadeias-de-ataque-2002-2006","title":"Era das Cadeias de Ataque (2002 - 2006)","text":"<p>As equipes de defesa formalizaram sua atua\u00e7\u00e3o com a cria\u00e7\u00e3o de leis e frameworks. Assim surgiu o compliance, a iniciativa das empresas em se manterem de acordo com as leis em rela\u00e7\u00e3o a defesa cibern\u00e9tica. Tamb\u00e9m foi assim que surgiu frameworks como o Metaexploit Framework, um guia para se criar exploits.</p> <p>Os atacantes viram os movimentos das equipes de defesa. Eles estudaram, aprenderam e incorporaram o conhecimento da defesa em seus ataques. Dessa forma a capacidade de criar ataques em massa evoluiu para a cria\u00e7\u00e3o de cadeias de ataques. O grande volume de ataques tornou-se coordenado e nem todos os ataques planejavam ter um impacto imediato, alguns apenas abriam portas para ataques futuros. O controle e per\u00edcia em geral aos ataques aumentou e os atacantes come\u00e7aram a praticar crimes cibern\u00e9ticos de alta escala.</p> <p>A defesa percebeu que os ataques estavam mais elaborados e criou ferramentas como: - Honeypots, ambientes expostos, mas controlados, que registram as tentativas de ataques voltados a eles. Essas armadilhas para atacantes e suas cadeias foram um dos primeiros passos da defesa cibern\u00e9tica em rela\u00e7\u00e3o a entender o comportamento de ataques e como eles formavam uma cadeia. - Intrusion Prevention System (IPS).</p>"},{"location":"defesa/defesa-operacional/ameacas/#era-dos-apt-2007-2012","title":"Era dos APT (2007 - 2012)","text":"<p>Com o potencial econ\u00f4mico, pol\u00edtico e social que amea\u00e7as cibern\u00e9ticas mostraram na era passada, grupos organizados come\u00e7aram a ser formados para criarem verdadeiras armas cibern\u00e9ticas a sistemas computacionais ao redor do mundo. Esses grupos s\u00e3o chamados de Advanced Persistent Threats (APTs) e conduziram guerras cibern\u00e9ticas, hackitivismo e vazamentos.</p> <p>Nessa era ficou mais evidente \u00e0s equipes de defesa como os ataques agora seguiam cadeias de ataque orquestradas e com objetivos financeiros por tr\u00e1s. Houve aqui a tradu\u00e7\u00e3o das cadeias de ataque em uma s\u00e9rie de comportamentos sequenciais. Dessa forma, mais ferramentas voltadas a identificar e bloquear ataques e cadeias de ataque por seus comportamentos surgiram, como: - Endpoint Detection and Response (EDR) - Network Detection and Response (NDR) - Capacidade de correlacionamento de informa\u00e7\u00f5es por parte do SIEM.</p>"},{"location":"defesa/defesa-operacional/ameacas/#era-da-inteligencia-compartilhada","title":"Era da Intelig\u00eancia Compartilhada","text":"<p>Como resposta, na\u00e7\u00f5es, empresas e organiza\u00e7\u00f5es se juntaram para criar medidas de defesas mais r\u00edgidas aos APTs. Como resultado:</p> <ul> <li>Surgimento de Intelig\u00eancia de Amea\u00e7as</li> <li>Novas defesas concentradas em detec\u00e7\u00e3o e preven\u00e7\u00e3o por comportamentos.</li> </ul>"},{"location":"defesa/defesa-operacional/detection-and-response/","title":"Detection and Response","text":""},{"location":"defesa/defesa-operacional/detection-and-response/#edr","title":"EDR","text":""},{"location":"defesa/defesa-operacional/detection-and-response/#ndr","title":"NDR","text":""},{"location":"defesa/defesa-operacional/detection-and-response/#xdr","title":"XDR","text":""},{"location":"defesa/defesa-operacional/firewall/","title":"Firewalls","text":""},{"location":"defesa/defesa-operacional/firewall/#indice","title":"\u00cdndice","text":"<ol> <li>Caracter\u00edsticas</li> <li>Gera\u00e7\u00f5es</li> <li>DMZ</li> <li>Firewall mais a fundo</li> </ol>"},{"location":"defesa/defesa-operacional/firewall/#caracteristicas","title":"Caracter\u00edsticas","text":"<p>Firewalls s\u00e3o sistemas que filtram o tr\u00e1fico na rede.</p> <p>A maioria dos firewalls s\u00e3o top-down, ou seja, aplicam as regras de cima das listas para baixo.</p> <p>\u00c9 normal as regras e pol\u00edticas de firewall permitirem ou n\u00e3o a entrada de pacotes a partir de fontes, remetentes, conte\u00fado malicioso e outros par\u00e2metros. Quando um firewall acusa o pacote de cair em uma dessas pol\u00edticas, a regra pode estar configurada para gerar um: - Allow: aceitar o pacote e notificar a fonte. - Deny: recusar o pacote e notificar a fonte. - Drop: recusar o pacote e n\u00e3o notificar a fonte. \u00d3timo para a seguran\u00e7a.</p>"},{"location":"defesa/defesa-operacional/firewall/#geracoes","title":"Gera\u00e7\u00f5es","text":""},{"location":"defesa/defesa-operacional/firewall/#1a-geracao-firewall-original-1988","title":"1\u00aa gera\u00e7\u00e3o - Firewall Original (1988)","text":"<p>Os primeiros firewalls atuam principalmente na camada 3 do Modelo OSI. Eles monitoram o tr\u00e1fego de pacotes na rede, analisando de onde vieram e quais s\u00e3o os seus destinos. Esta an\u00e1lise \u00e9 conhecida como filtragem est\u00e1tica e, por mais que n\u00e3o seja assim t\u00e3o eficiente atualmente, ainda \u00e9 bastante usado em firewalls simples e baratos atualmente.</p> <p>Ao buscar sua origem e destino, firewalls checam os IPs e portas do pacote. Um servidor que busca receber emails dificilmente deve aceitar conex\u00f5es em portas diferentes de protocolos de email por exemplo. Entretanto, esse tipo de firewall n\u00e3o inspeciona o conte\u00fado dos pacotes e, como sabemos, n\u00e3o \u00e9 dif\u00edcil mandar um v\u00edrus por email ou algum outro c\u00f3digo malicioso por IPs e portas permitidas.</p> <ul> <li>Exemplo: IPChains</li> </ul>"},{"location":"defesa/defesa-operacional/firewall/#2a-geracao-stateful-firewall-anos-90","title":"2\u00aa gera\u00e7\u00e3o - Stateful Firewall (anos 90)","text":"<p>Com essa gera\u00e7\u00e3o, houve a cria\u00e7\u00e3o firewalls de filtragem din\u00e2mica. Esses firewalls possuem um registro de estados das conex\u00f5es pr\u00e9vias, \" lembrando-se dos seus erros e acertos e adaptando-se a partir disso.</p> <p>De forma mais t\u00e9cnica, eles bloqueiam o tr\u00e1fico da mesma forma que os firewalls originais, mas criam uma tabela de estados de conex\u00f5es passadas e assim possuem a habildiade de atualizar suas pr\u00f3prias regras e pol\u00edticas de seguran\u00e7a. Assim, protocolos e IPs podem ter suas pol\u00edticas atualizadas se estiverem de acordo com o resto das pol\u00edticas daquele firewall. Isso \u00e9 uma interessante mudan\u00e7a, visto que \u00e9 comum bloquear a maior parte das portas e IPs por padr\u00e3o, o que em firewalls de 1\u00aa gera\u00e7\u00e3o, resultaria muitos pacotes leg\u00edtimos bloqueados e constante atualiza\u00e7\u00e3o manual das pol\u00edticas.</p> <p>Esse firewall possui acesso as conex\u00f5es em andamento e as que j\u00e1 passaram, atuando assim tamb\u00e9m na camada 4, possibilitando que bloqueie conex\u00f5es que anteriormente foram permitidas, mas logo depois causaram problemas de servi\u00e7o.</p> <p>Por realizar maiores trabalhos, esse firewall demanda mais tempo em opera\u00e7\u00e3o e mais recursos da rede.</p> <ul> <li>Exemplos: Netfilter / IPTables.</li> </ul>"},{"location":"defesa/defesa-operacional/firewall/#3a-geracao-proxy-firewall-1991","title":"3\u00aa gera\u00e7\u00e3o - Proxy Firewall (1991)","text":"<p>Firewall e proxy s\u00e3o duas tecnologias de seguran\u00e7a diferentes, mas os firewalls de proxy combinam as duas funcionalidades, gerando um firewall muito mais eficiente.</p> <p>Firewalls de proxy usam as funcionalidades dos firewalls anteriores, mas os combinam com proxies reversos (proxies de aplica\u00e7\u00e3o). A partir disso, os firewalls da 3\u00aa gera\u00e7\u00e3o atuam tamb\u00e9m na camada 7, identificando os seus diferentes procolos (HTTP, FTP, POP3), analisando-os com base em riscos conhecidos desses tipos de pacotes e ent\u00e3o permitindo ou n\u00e3o a passagem do pacote. Por ser um proxy, estes firewalls usam o m\u00e9todo NAT, mascarando os IPs do servi\u00e7o a ser protegido e gerando ainda mais seguran\u00e7a e sigilo ao sistema.</p> <p>Atualmente esse tipo de firewall vem evoluindo e ganhando mais destaque com o surgimento do Web Application Firewalls(WAFs). WAFs s\u00e3o deriva\u00e7\u00f5es dos firewalls de proxy focados em conex\u00f5es web (principalmente a HTTP), mas tem um foco especial em proteger empresas. Dessa forma, os WAFs v\u00e3o funcionar principalmente como proxies-reversos, interceptando a informa\u00e7\u00e3o do servidor (quem fornece a p\u00e1gina web) ao inv\u00e9s do cliente (quem pede a p\u00e1gina web).</p>"},{"location":"defesa/defesa-operacional/firewall/#4a-geracao-firewall-estavel-e-domestica","title":"4\u00aa gera\u00e7\u00e3o - Firewall est\u00e1vel e dom\u00e9stica","text":"<ul> <li>Next Generation Fiewall  (NGFW): \u00e9 um tipo de firewall atual que combina as tecnologias passadas de firewall com tecnologias de seguran\u00e7a, como antivirus, Intrusion Prevention System (IPS) e Intrusion Detection System(IDS).<ul> <li>Exemplos:</li> </ul> </li> <li>Unified Threat Management (UTM) \u00c9 um sistema que unifica v\u00e1rias solu\u00e7\u00f5es de seguran\u00e7as comuns em mabvientes empresariais em um \u00fanico software de gest\u00e3o e visualiza\u00e7\u00e3o. Entre as solu\u00e7\u00f5es que mais fazem partes de UTMs, est\u00e3o os: firewall, proxy, antivirus, antispam, etc.<ul> <li>Exemplos: </li> </ul> </li> </ul>"},{"location":"defesa/defesa-operacional/firewall/#waf-vs-ipds","title":"WAF vs IPDS","text":"<p>O IPDS \u00e9 a jun\u00e7\u00e3o do IPS e IDS. \u00c9 interessante perceber como a a evolu\u00e7\u00e3o do WAF e o IPDS \u00e9 parecido: adicionar monitoramento e a\u00e7\u00f5es de seguran\u00e7a nos sistemas de firewall. Mas qual a diferen\u00e7a entre eles? Em resumo, o WAF \u00e9 mais abrangente em sua defesa. Como o WAF foca na melhora atrav\u00e9s do proxy firewall, sua defesa foca tanto em detectar e previnir amea\u00e7as na camada 2, 3 e 4, quanto na camada 7. J\u00e1 o IPDS se especializa em mecanismos de preven\u00e7\u00e3o e defesa das camadas 2, 3 e 4. Qual deles \u00e9 melhor? Depende do que a sua empresa procura e o que a sua infraestrutura de rede pede.</p>"},{"location":"defesa/defesa-operacional/firewall/#dmz","title":"DMZ","text":"<p>Uma das funcionalidades do Firewall \u00e9 o Desmilitarized Zone</p>"},{"location":"defesa/defesa-operacional/firewall/#componentes-internos-dos-firewalls","title":"Componentes internos dos firewalls","text":"<p>As regras e pol\u00edticas dos firewalls s\u00e3o organizadas em tabelas, cada uma com uma s\u00e9rie de chains (divis\u00e3o de pol\u00edticas). As tabelas e regras a seguir s\u00e3o as existentes por padr\u00e3o no firewall IPTables, mas outros firewalls podem possuir outros, al\u00e9m de alguns, como o NFTables, n\u00e3o serem entregues com nenhum.</p>"},{"location":"defesa/defesa-operacional/firewall/#chains","title":"Chains","text":"<p>S\u00e3o locais onde as regras e pol\u00edticas dos firewalls s\u00e3o armazenadas. Como listas. Fazem parte das tabelas de firewall.</p> <ul> <li>INPUT: conjunto de regras aplicadas a pacotes entrando do firewall, destinados a algum host da rede.</li> <li>OUTPUT: conjunto de regras aplicadas a pacotes saindo do firewall, vindos de algum host da rede.</li> <li>FORWARD: conjunto de regras aplicadas a pacotes saindo do firewall , mas vindos de um host fora da rede, ou seja, outra interface de placa de rede. Eles n\u00e3o tem nem fonte nem destino a nossa rede.</li> <li>PREPROCESSING: conjunto de regras aplicadas aos pacotes de firewall antes de serem encaminhados. \u00c9 aqui que as regras de NAT para s\u00e3o armazenadas para tradu\u00e7\u00e3o de endere\u00e7os de sa\u00edda, j\u00e1 que os pacotes vindos tem como destino o firewall.</li> <li>POSPROCESSING: conjunto de regras aplicadas aos pacotes de firewall depois de serem encaminhados. \u00c9 aqui que as regras de NAT para s\u00e3o armazenadas para tradu\u00e7\u00e3o de endere\u00e7os de entrada, j\u00e1 que os pacotes vindos tem como endere\u00e7o fonte os computadores reais na rede, o que deve ser trocado para o endere\u00e7o do firewall no m\u00e9todo NAT.</li> </ul>"},{"location":"defesa/defesa-operacional/firewall/#tabelas-do-iptables","title":"Tabelas do IPTables","text":"<p>Firewalls como Iptables e afins possuem tabelas e chains pr\u00e9-feitas, como:</p>"},{"location":"defesa/defesa-operacional/firewall/#filters","title":"Filters","text":"<p>Determina o conte\u00fado permitido. \u00c9 tamb\u00e9m a tabela padr\u00e3o.</p> <p>Possui as chains: - INPUT - OUTPUT - FOWARD</p>"},{"location":"defesa/defesa-operacional/firewall/#nat","title":"NAT","text":"<p>Netword Adress Translator \u00e9 um m\u00e9todo de tradu\u00e7\u00e3o, representa\u00e7\u00e3o e encaminhamento de uma s\u00e9rie de IPs atrav\u00e9s de um \u00fanico IP, o do proxy. Isso ajuda o proxy a ter as requisi\u00e7\u00f5es sempre endere\u00e7adas a si.</p> <p>A imagem a seguir mostra um modelo de proxy padr\u00e3o.</p> <pre><code>Sendo A e B computadores da sua rede interna:\n\n    A\n    ^\n    |\n    v\nFirewall &lt;---&gt; Internet\n    ^\n    |\n    v\n    B\n</code></pre> <p>As regras de aplica\u00e7\u00e3o do m\u00e9todo NAT ficam armazenadas aqui.</p> <p>Possui as chains: - PREPROCESSING - POSPROCESSING - OUTPUT (para quando um pacote \u00e9 criado no pr\u00f3prio firewall)</p>"},{"location":"defesa/defesa-operacional/firewall/#raw","title":"Raw","text":"<p>Respons\u00e1vel por mostrar exce\u00e7\u00f5es.</p> <p>Possui as chains: - PREROUTING - OUTPUT</p>"},{"location":"defesa/defesa-operacional/firewall/#security","title":"Security","text":"<p>Regras usadas para controle de acesso e contexto.</p> <p>Possui as chains: - INPUT - OUTPUT - FORWARD</p>"},{"location":"defesa/defesa-operacional/firewall/#mangle","title":"Mangle","text":"<p>Configura\u00e7\u00f5es especiais de todas as chains.</p> <p>Possui as chains: - INPUT - OUTPUT - FORWARD - PREPROCESSING - POSPROCESSING</p>"},{"location":"defesa/defesa-operacional/firewall/#estrutura-das-regras","title":"Estrutura das regras","text":"<p>Toda regra est\u00e1 localizada em uma chain de uma tabela. Cada regra no IPtables \u00e9 melhor disposta numa visualiza\u00e7\u00e3o estilo planilha com a seguinte estrutura: - num: ordem da regra na fila do grupo chain-tabela espec\u00edfica. - target: encaminha o firewall para a execu\u00e7\u00e3o do comando(ACCEPT, DROP, etc) ou nome da regra descrita. Diferente do usual, o IPTables possui os seguintes comandos:     - ACCEPT: o mesmo accept de sempre.     - DROP: o mesmo drop de sempre.     - QUEUE: envia a requisi\u00e7\u00e3o para a userspace     - RETURN: retorna para o processo principal. - prot: protocolo em que a regra \u00e9 aplicada. - opt: op\u00e7\u00f5es especiais para a regra em espec\u00edfico. Se n\u00e3o houver, o padr\u00e3o \u00e9 <code>--</code> - source: IP de origem do pacote - destination: IP de destino do pacote.</p>"},{"location":"defesa/defesa-operacional/hardening/","title":"Hardening","text":"<p>Hardening \u00e9 a aplica\u00e7\u00e3o de pol\u00edticas e configura\u00e7\u00f5es nos sistemas que os deixem mais seguros. \u00c9 um conceito muito importante para qualquer sistema, principalmente servidores que planejem ser expostos a ambientes externos.</p> <p>\u00c9 importante entender que cada hardware e software possui uma forma distinta de ter sua seguran\u00e7a fortificada atrav\u00e9s de hardening. Por isso que nessas anota\u00e7\u00f5es, o assunto hardening n\u00e3o ser\u00e1 muito especificado, porque depende muito do servidor que voc\u00ea est\u00e1 montando e quais aplica\u00e7\u00f5es ele ter\u00e1. Entretanto, ser\u00e3o mostrados alguns exemplos comuns de servidores que devem ser fortificados, um panorama geral de como configurar esses casos e onde achar guais completos de hardening do seu servidor.</p> <p>Caso n\u00e3o saiba, servidores s\u00e3o computadores com o objetivo de servirem aplica\u00e7\u00f5es e servi\u00e7os. Eles normalmente atuam via rede e processam dados e requisi\u00e7\u00f5es, entregando resultados tamb\u00e9m em formato de dados. \u00c9 muito comum ouvir falar de servidores web. Servidores web normalmente servem v\u00e1rias aplica\u00e7\u00f5es web e tem uma parte de sua capacidade oferecida por provedores a desenvolvedores a fim de hospedarem os seus servi\u00e7os na m\u00e1quina. Dessa forma, servidores est\u00e3o presentes no dia a dia de qualquer usu\u00e1rio da internet, mas por debaixo dos panos (backend).</p> <p>Servidores podem oferecer diferentes categorias de servi\u00e7os. Entre essas categorias, podemos citar: - Servidor DNS: servidores que junto ao protocolo DNS, s\u00e3o respons\u00e1veis por oferecer todos os servi\u00e7os de tradu\u00e7\u00e3o de IPs para nomes de dom\u00ednio e vice-versa na rede. - Servidor DHCP: servidores que junto ao protocolo DHCP, s\u00e3o respons\u00e1veis por oferecer todos os servi\u00e7os de distribui\u00e7\u00e3o de IPs. - Servidor Web: servidores que hospedam aplica\u00e7\u00f5es web e portanto s\u00e3o respons\u00e1veis por receber e responder a requisi\u00e7\u00f5es HTTP e derivados. S\u00e3o muito comuns servidores web da:     - Apache     - NGINX     - TomCat</p>"},{"location":"defesa/defesa-operacional/hardening/#servidor-windows","title":"Servidor Windows","text":"<p>\u00c9 extremamente comum utilizar os sistemas operacionais Windows Server para programar e construir servidores operacionais completos para hospedar aplica\u00e7\u00f5es. Normalmente os servidores Windows Server mais atuais tem a fama de se assemelharem muito aos Windows Desktop e portanto s\u00e3o f\u00e1ceis de manusear e configurar atrav\u00e9s da interface gr\u00e1fica. Servidores Windows mais antigos entretanto eram mais conhecidos por suas interfaces de linha de comando.</p> <p>Os servidores Windows j\u00e1 perguntam os servi\u00e7os que voc\u00ea pretende incluir no servidor durante as primeiras instala\u00e7\u00f5es e configura\u00e7\u00f5es.</p> <p>N\u00e3o h\u00e1 muita dificuldade em configurar servidores Windows de interface gr\u00e1fica, entretanto h\u00e1 muitas op\u00e7\u00f5es e \u00e9 mais f\u00e1cil e seguro seguir os padr\u00f5es de seguran\u00e7a recomendados por \u00f3rg\u00e3os de seguran\u00e7a. \u00c9 recomendada as configura\u00e7\u00f5es do ...</p>"},{"location":"defesa/defesa-operacional/hardening/#servidor-linux","title":"Servidor Linux","text":"<p>Os servidores Linux j\u00e1 n\u00e3o s\u00e3o t\u00e3o simples quanto os servidores Windows. Primeiramente j\u00e1 devemos come\u00e7ar lembrando que em sistemas Linux prevalecem interfaces de comando e para servidores Linux n\u00e3o \u00e9 diferente. Segundo: existem v\u00e1rias distribui\u00e7\u00f5es e vers\u00f5es do linux competentes para servirem como servidores e cada uma possui uma s\u00e9rie de configura\u00e7\u00f5es diferentes a serem exploradas. \u00c9 necess\u00e1ria uma expertize e paci\u00eancia maior nesse m\u00f3dulo.</p> <p>\u00c9 mais comum o uso dos Ubuntu Server e do Debian Server mais recentes, mas ainda h\u00e1 outras distros que s\u00e3o muito utilizadas. Al\u00e9m disso, para os servi\u00e7os oferecidos no linux, \u00e9 recomendado: - Servidor DHCP: - Servidor DNS: bind9 - Servidor Web: apache, ngnix, tomcat.</p>"},{"location":"defesa/defesa-operacional/intro/","title":"Defesa de seguran\u00e7a","text":""},{"location":"defesa/defesa-operacional/intro/#antivirus","title":"Antivirus","text":"<p>\u00c9 um tipo de software comum e famoso usado para detectar e limpar malwares do seu computador. Utiliza principalmente Detec\u00e7\u00e3o por Assinatura ao escanear um arquivo, mas atualmente tamb\u00e9m usa alguns elementos de Detec\u00e7\u00e3o Heur\u00edstica.</p>"},{"location":"defesa/defesa-operacional/intro/#firewall","title":"Firewall","text":"<p>Firewall \u00e9 um sistema cl\u00e1ssico de controle de tr\u00e1fego na rede. Ele intercepta o tr\u00e1fego e libera ou n\u00e3o a passagem do pacote com base em uma s\u00e9rie de regras e pol\u00edticas de firewalls definidas pelo usu\u00e1rio. Essas regras, se bem feitas, podem garantir um alto n\u00edvel de seguran\u00e7a a uma rede, tornando assim o firewall um sistema indispens\u00e1vel.</p> <p>Marcas famosas de Firewall incluem Palo Alto com os seus NGFW.</p>"},{"location":"defesa/defesa-operacional/intro/#proxy","title":"Proxy","text":"<p>Proxies s\u00e3o sistemas de intercepta\u00e7\u00e3o de rede. Ao interceptarem de forma legal a conex\u00e3o entre dois dispositivos, proxies podem realizar diversas a\u00e7\u00f5es antes de reencaminharem o pacote ao destino pretendido. Entre ela est\u00e3o:     - Debugging.     - An\u00e1lise de pacotes, par\u00e2metros e payloads em busca de vulnerabilidades ou c\u00f3digos maliciosos.     - Mudan\u00e7a de conte\u00fado.     - Mudan\u00e7a de IPs e outros par\u00e2metros de cabe\u00e7alho de requisi\u00e7\u00f5es.</p> <p>Ferramentas como Burp Suite e OWASP Zap possuem web proxies (focados em requisi\u00e7\u00f5es web) que interceptam requisi\u00e7\u00f5es HTTP e copiam-nas para dentro do software, permitindo edi\u00e7\u00e3o, reenvio, an\u00e1lise de vulnerabilidades, etc.</p> <p>Firewalls mais recentes possuem proxies integrados a fim de inspectionar os pacotes de rede internamente e disponibilizar amis seguran\u00e7a em seus servi\u00e7os.</p>"},{"location":"defesa/defesa-operacional/intro/#web-application-firewall-waf","title":"Web Application Firewall (WAF)","text":"<p>Diferente do que o seu nome sugere, o WAF \u00e9 mais pr\u00f3ximo de um proxy do que de um Firewall de fato. Um WAF intercepta o acesso a sites, principalmente aqueles </p> <p>Muito usado em empresas para limitar o acesso a sites maliciosos.</p>"},{"location":"defesa/defesa-operacional/intro/#ids-e-ips","title":"IDS e IPS","text":"<p>Podem ser integrados a Firewalls.</p>"},{"location":"defesa/defesa-operacional/intro/#desmilitarized-zone-dmz","title":"Desmilitarized Zone (DMZ)","text":"<p>A delimita\u00e7\u00e3o de zonas desmilitarizadas \u00e9 uma pr\u00e1tica que envolve a segrega\u00e7\u00e3o da rede de um sistema em v\u00e1rias subredes, a fim de limitar que danos a uma determinda zona n\u00e3o se alastrem ao resto do sistema.</p>"},{"location":"defesa/defesa-operacional/intro/#protecao-de-endpoints-e-iot","title":"Prote\u00e7\u00e3o de Endpoints e IoT","text":"<p>Envolvem:      - Prote\u00e7\u00e3o de Malware via AI.     - Pol\u00edticas de Uso do Dispositivo.     - RBAC ou ABAC     - Controle de Aplica\u00e7\u00e3o     - Preven\u00e7\u00e3o contra ataques zero-day.     - Detec\u00e7\u00e3o de URL maliciosas e phishing.</p>"},{"location":"defesa/defesa-operacional/intro/#siem","title":"SIEM","text":"<p>Respons\u00e1vel por monitorar e analisar log de eventos a fim de detectar ofensas (poss\u00edveis eventos que podem gerar problemas de seguran\u00e7a).</p> <p>Sistemas em servi\u00e7o costumam gerar centenas de logs por dia dia, alguns esseciais para identificar e estudar poss\u00edveis tentivas de ataque. Como s\u00e3o centenas, \u00e9 dif\u00edcil analisar e correlacionar os diferentes logs dos diferentes sistemas e, para isso, existe o SIEM, capaz de juntar todos os logs em um mesmo lugar com uma linguagem e organiza\u00e7\u00e3o acess\u00edvel aos profissionais de seguran\u00e7a e monitoramento de incidentes.</p> <p>Sem o SIEM, podemos observar logs no Linux normalmente a partir do diret\u00f3rio /var/logs, mas ainda h\u00e1 outras fontes de logs de eventos que podem estar espalhados pelo sistema ou mal configurados.</p> <p>Entretanto, uma das limita\u00e7\u00f5es do SIEM \u00e9 a mesma de qualquer sistema de logs: muita informa\u00e7\u00e3o e pouca a\u00e7\u00e3o. O SIEM n\u00e3o toma medidas de hardening e prote\u00e7\u00e3o do sistema. Mas ao menos o SIEM ajuda em interpretar e filtrar de fato os logs importantes para seguran\u00e7a.</p> <p>Um produto SIEM bem popular \u00e9 o IBM SIEM.</p>"},{"location":"defesa/defesa-operacional/intro/#soar","title":"SOAR","text":"<p>Como um grande orquestrador das ferramentas de respota a incidentes, o SOAR integra o SIEM e outras ferramentas para n\u00e3o s\u00f3 monitorar e analisar eventos que possam se tornar ofensas, como tamb\u00e9m orquestrar a tomada de medidas automatizadas para reagir a essas ofensas.</p>"},{"location":"defesa/defesa-operacional/intro/#edr","title":"EDR","text":"<p>Prote\u00e7\u00e3o que monitora os dispositivos de um cliente a fim de detectar poss\u00edveis amea\u00e7as e previnir infec\u00e7\u00f5es.</p>"},{"location":"defesa/defesa-operacional/intro/#xdr","title":"XDR","text":"<p>Considerada a evolu\u00e7\u00e3o dos EDRs.</p>"},{"location":"defesa/defesa-operacional/intro/#ndr","title":"NDR","text":""},{"location":"defesa/defesa-operacional/intro/#antispam","title":"Antispam","text":""},{"location":"defesa/defesa-operacional/soc/","title":"Soc","text":""},{"location":"defesa/defesa-operacional/soc/#entendendo-o-soc","title":"Entendendo o SOC","text":""},{"location":"defesa/defesa-operacional/soc/#maturidade-do-soc","title":"Maturidade do SOC","text":""},{"location":"defesa/defesa-operacional/soc/#it-soc-soc-10","title":"IT SOC (SOC 1.0)","text":"<ul> <li>Adquiri conhecimento t\u00e9cnica de tecnologia, apredendo a lidar com firewalls, proxies, antivirus, IPS, etc.</li> <li>Protege o per\u00edmetro de seguran\u00e7a</li> </ul>"},{"location":"defesa/defesa-operacional/soc/#cyber-soc-soc-20","title":"Cyber SOC (SOC 2.0)","text":"<ul> <li>Compreende as amea\u00e7as e suas TTPs.</li> <li>Protege o ambiente.</li> </ul>"},{"location":"defesa/defesa-operacional/soc/#business-soc-soc-30","title":"Business SOC (SOC 3.0)","text":"<ul> <li>Protege o neg\u00f3cio.</li> <li>Alinha-se mais a \u00e1rea de risco </li> </ul>"},{"location":"defesa/defesa-operacional/visibilidade/SIEM_SOAR/","title":"SIEM SOAR","text":""},{"location":"defesa/defesa-operacional/visibilidade/SIEM_SOAR/#visibilidade-defensiva","title":"Visibilidade Defensiva","text":""},{"location":"defesa/defesa-operacional/visibilidade/SIEM_SOAR/#system-incident-and-event-management-siem","title":"System Incident and Event Management (SIEM)","text":"<p>SIEM \u00e9 um sistema de gerenciamento de eventos, principalmente de logs. Logs s\u00e3o registros de atividades e eventos em um sistema e s\u00e3o extremamente importantes por conferir autenticidade, n\u00e3o rep\u00fadio, comprova\u00e7\u00e3o, debugging e feedback. Perceba a quantidade de valores relacionados \u00e0 seguran\u00e7a que um log trabalha, afirmando a import\u00e2nica de sua an\u00e1lise para a sguran\u00e7a de sistemas.</p>"},{"location":"defesa/defesa-operacional/visibilidade/SIEM_SOAR/#por-que-um-siem","title":"Por que um SIEM?","text":"<p>N\u00e3o basta s\u00f3 ler os logs? De fato logs normlamente s\u00e3o registrados de forma leg\u00edvel ou pelo menos com c\u00f3digos n\u00e3o muito dif\u00edceis de entender. O problema dos logs \u00e9 que os sistemas s\u00e3o aconeselhados a registrar muitos logs, j\u00e1 que nem sempre os desenvolvedores sabem quais logs ser\u00e3o essenciais. Muitas vezes, todos s\u00e3o essenciais. N\u00e3o \u00e9 pos\u00edvel ler tantos dados manualmente e torna-se necess\u00e1rio implementar plataformas e algor\u00edtmos para lidar com o Big Data dos logs. \u00c9 a\u00ed que o SIEM entra.</p>"},{"location":"defesa/defesa-operacional/visibilidade/SIEM_SOAR/#funcionalidades-do-siem","title":"Funcionalidades do SIEM","text":"<ul> <li>Armazena os logs dos mais diversos sistemas.</li> <li>Mostra os logs em um formato leg\u00edvel e de f\u00e1cil entendimento aos seus operadores.</li> <li>Destaca a logs possivelmente perigosos.</li> <li>Relaciona logs de diferentes sistemas, facilitando a identifica\u00e7\u00e3o das TTPs de um atacante.</li> </ul> <p>Perceba como o SIEM, quando bem implementado, funcionar\u00e1 como uma ferramenta de central de comando dedicada a mostrar a vis\u00e3o geral do funcionamento da infraestrutura de TI da empresa. </p>"},{"location":"defesa/defesa-operacional/visibilidade/SIEM_SOAR/#o-que-um-siem-nao-faz","title":"O que um SIEM n\u00e3o faz","text":"<ul> <li>N\u00e3o gera de fato conclus\u00f5es dos dados, ele s\u00f3 analisa e correlaciona. As conclus\u00f5es devem ser tiradas pelo pr\u00f3prio operador do SIEM.</li> <li>N\u00e3o gera respostas autom\u00e1ticas \u00e0 poss\u00edveis ataques. \u00c9 de responsabilidade do operador comunicar poss\u00edveis amea\u00e7as aos devidos operadores das outras ferramentas para acertar suas configura\u00e7\u00f5es de prote\u00e7\u00e3o. Por exemplo: um alerta de um SIEM n\u00e3o gera automaticamente uma mudan\u00e7a de pol\u00edticas num firewall.</li> </ul> <p>Em resumo, o SIEM n\u00e3o \u00e9 uma ferramenta de automatiza\u00e7\u00e3o, \u00e9 uma ferramenta de an\u00e1lise. \u00c9 poss\u00edvel realizar respostas autom\u00e1ticas das correla\u00e7\u00f5es geradas pelo SIEM, automatizando seu processo? Atualmente \u00e9 sim, mas com outra ferramenta chamada SOAR.</p>"},{"location":"defesa/defesa-operacional/visibilidade/SIEM_SOAR/#exemplos-de-siem-mais-utilizados-no-brasil","title":"Exemplos de SIEM mais utilizados no Brasil","text":"<ul> <li>IBM Qradar (On Premise)</li> <li>Splunk SIEM (On Premise)</li> <li>Microsoft Sentinel (Cloud)</li> <li>Google Cronical (Cloud)</li> </ul>"},{"location":"defesa/defesa-operacional/visibilidade/SIEM_SOAR/#soar","title":"SOAR","text":""},{"location":"defesa/defesa-operacional/visibilidade/proxy/","title":"Proxy","text":""},{"location":"defesa/defesa-operacional/visibilidade/proxy/#proxy-direto","title":"Proxy Direto","text":""},{"location":"defesa/defesa-operacional/visibilidade/proxy/#proxy-reverso","title":"Proxy Reverso","text":""},{"location":"defesa/estrategias-de-defesa/summary/","title":"Summary","text":""},{"location":"defesa/estrategias-de-defesa/summary/#network-control-access","title":"Network Control Access","text":""},{"location":"defesa/estrategias-de-defesa/summary/#pontos-de-estrangulamento","title":"Pontos de Estrangulamento","text":"<p>Identificar (ou fabricar) pontos cr\u00edticos em um sistema para concentrar suas defesas (ou ataques).</p> <p>Exemplo: constru\u00e7\u00f5es costumam limitar a entrada e sa\u00edda de pessoas a somente poucas passagens. Essas passagens podem ter portas para controlar o fluxo e pessoas seguran\u00e7as para evitar a entrada de pessoas indevidas.</p>"},{"location":"defesa/estrategias-de-defesa/summary/#arquitetura-zero-trust","title":"Arquitetura Zero Trust","text":"<p>Planejamento de sistemas minimizando ao m\u00e1ximo a confian\u00e7a o usu\u00e1rio. Essa abordagem normalmente \u00e9 adquirida atrav\u00e9s de: - Permiss\u00f5es segregadas - Fun\u00e7\u00f5es segregadas - Permiss\u00f5es por pap\u00e9is a serem pedidos. - Novos usu\u00e1rios do sistema come\u00e7am sem quaisquer pap\u00e9is.</p>"},{"location":"defesa/estrategias-de-defesa/summary/#principio-do-minimo-privilegio","title":"Princ\u00edpio do M\u00ednimo Privil\u00e9gio","text":""},{"location":"defesa/estrategias-de-defesa/summary/#defesa-em-profundidade","title":"Defesa em Profundidade","text":"<p>Garantir a defesa ao p\u00f4r uma s\u00e9rie de camadas defensivas ao seu sistema.</p>"},{"location":"defesa/estrategias-de-defesa/summary/#falhar-de-forma-segura-fail-safe","title":"Falhar de forma Segura (Fail Safe)","text":"<p>Permitir que falhas no software ocorram de forma segura:</p> <ul> <li>Erros que n\u00e3o revelem nosso c\u00f3digo (stack trace) ao cliente, para n\u00e3o revelar informa\u00e7\u00f5es internas da aplica\u00e7\u00e3o.</li> <li>Erros que continuem ao menos parcialmente funcionando mesmo com exce\u00e7\u00f5es.</li> <li>Erros que n\u00e3o levem a comportamentos alternativos n\u00e3o seguros. </li> </ul>"},{"location":"defesa/estrategias-de-defesa/summary/#nao-e-se-seremos-atacados-e-quando","title":"\"N\u00e3o \u00e9 se seremos atacados, \u00e9 quando\"","text":"<p>Preparar-se para ataques e falhas, independente do qu\u00e3o robusta sua seguran\u00e7a pare\u00e7a.</p>"},{"location":"defesa/estrategias-de-defesa/summary/#obscuridade-security-by-obscurity","title":"Obscuridade (Security by Obscurity)","text":"<p>Controle de exposi\u00e7\u00e3o do funcionamento do seu sistema ou neg\u00f3cio. A obscuridade em si emprega mecanismos e m\u00e9todos para esconder esse funcionamento e evitar a exposi\u00e7\u00e3o excessiva das informa\u00e7\u00f5es do sistema.</p> <p>Enquanto \u00e9 uma estrat\u00e9gia famosa, muitos s\u00e3o contra o uso dessa estrat\u00e9gia. Uma seguran\u00e7a que necessita de obscuridade para funcionar normalmente \u00e9 em raz\u00e3o de uma seguran\u00e7a fr\u00e1gil.</p>"},{"location":"defesa/estrategias-de-defesa/summary/#seguranca-agil","title":"Seguran\u00e7a \u00c1gil","text":"<ul> <li>A equipe de seguran\u00e7a deve responder rapidamente a amea\u00e7as e deve ter a liberdade de agir e depois perguntar.</li> <li>A seguran\u00e7a deve ser simples, f\u00e1cil e r\u00e1pida de implementar</li> </ul>"},{"location":"defesa/estrategias-de-defesa/summary/#seguranca-por-definicaopadrao-security-by-default","title":"Seguran\u00e7a por Defini\u00e7\u00e3o/Padr\u00e3o (security by default)","text":"<p>Garantir a seguran\u00e7a deve ser o padr\u00e3o de qualquer sistema.</p> <p>Muitos sistemas vem com as configura\u00e7\u00f5es de f\u00e1brica menos seguras. Vejamos por exemplo um firewall, que pode vir aceitando todas as requisi\u00e7\u00f5es estranhas em sua configura\u00e7\u00e3o padr\u00e3o. A abordagem de Seguran\u00e7a por Defini\u00e7\u00e3o defende que os sistemas deveriam vir bloqueando pedidos e respostas estranhas como padr\u00e3o. Portanto, ao receber um equipamento, o padr\u00e3o deveria ser conferir as configura\u00e7\u00f5es e mudar voc\u00ea mesmo as configura\u00e7\u00f5es para seguro caso o equipamento n\u00e3o venha seguro por padr\u00e3o.</p> <p>A escolha de linguagens, fun\u00e7\u00f5es e bibliotecas seguras durante o ciclo de desenvolvimento tamb\u00e9m \u00e9 parte da seguran\u00e7a por padr\u00e3o.</p> <p>Obviamente esse tipo de abordagem n\u00e3o se aplica muito bem em todos os casos e deve ser avaliado junto com a usabilidade e desempenho para garantir um sistema eficiente.</p>"},{"location":"defesa/estrategias-de-defesa/summary/#deny-by-default","title":"Deny By Default","text":""},{"location":"defesa/estrategias-de-defesa/summary/#analise-de-lacunas-gaps-analysis","title":"An\u00e1lise de Lacunas (Gaps Analysis)","text":"<p>Processo da avalia\u00e7\u00e3o do que uma empresa \u00e9 agora em compara\u00e7\u00e3o ao que ela almeja/deveria ser no contexto de medidas e postura de seguran\u00e7a.</p> <p>O resultado normalmente \u00e9 a identifica\u00e7\u00e3o de lacunas entre a expectativa e a realidade. Essas lacunas se resumem em vulnerabilidades, fraquezas e oportunidades de melhoria. Posteriormente, as lacunas podem ser usadas como insumo para um plano de aprimoramento da seguran\u00e7a na empresa/institui\u00e7\u00e3o.</p>"},{"location":"defesa/estrategias-de-defesa/zero-trust/","title":"Zero Trust Arquitecture / Arquitetura de Confian\u00e7a Zero (ZTA)","text":"<p>At\u00e9 alguns anos atr\u00e1s, a seguran\u00e7a cibern\u00e9tica se baseava muito numa abordagem tradicional de seguran\u00e7a baseada em per\u00edmetro/borda. Protegia-se as fronteiras de acesso ao sistema fortemente e tudo que passasse a fronteira era considerado confi\u00e1vel. Era uma abordagem parecida com a seguran\u00e7a f\u00edsica que normalmente coloca uma cofian\u00e7a muito maior nas pessaos dentro das instala\u00e7\u00f5es a serm protegidas.</p> <p>O Zero Trust \u00e9 uma mudan\u00e7a de postura dessa seguran\u00e7a em per\u00edmetro/borda. Sua filosofia principal \u00e9 n\u00e3o acreditar automaticamente em ningu\u00e9m, esteja o recurso para dentro ou fora da fronteira de confian\u00e7a.</p> <p>O paper completo que explica sobre essa arquitetura pode ser encontrada no NIST 800-207.</p>"},{"location":"defesa/estrategias-de-defesa/zero-trust/#principios","title":"Princ\u00edpios","text":"<p>Normalmente o Zero Trust se baseia a partir das seguintes pr\u00e1ticas:</p> <ul> <li> <p>Least Privilege Access: dar a menor quantidade de permiss\u00f5es e poder aos usu\u00e1rios, limitando-se somente \u00e0s permiss\u00f5es estritamente necess\u00e1rias. \"Se tudo que ele precisa \u00e9 ler o documento, n\u00e3o o d\u00ea acesso a escrita\".</p> </li> <li> <p>Micro-segmenta\u00e7\u00e3o: dividir nossa rede em v\u00e1rios pequenos grupos protegidos por firewalls e outras defesas de borda. Em caso de invas\u00e3o a um per\u00edmetro, uma rede micro-segmentada s\u00f3 daria acesso a uma pequena parte da rede ao atacante.</p> </li> <li> <p>Monitora\u00e7\u00e3o Cont\u00ednua: monitorar todos os usu\u00e1rios e recursos, independente deles estarem dentro ou fora do per\u00edmetro.</p> </li> <li> <p>Autentica\u00e7\u00e3o de M\u00faltiplos Fatores (MFA): autentica\u00e7\u00e3o que exija mais de um fator. Ser\u00e1 melhor explicado no cap\u00edtulo de Identidade.</p> </li> <li> <p>Verifica\u00e7\u00e3o da Identidade do Usu\u00e1rio e do Dispositivo: n\u00e3o \u00e9 s\u00f3 porque um usu\u00e1rio est\u00e1 dentro do per\u00edmetro que ele realmente \u00e9 quem diz ser. Pode haver falsifica\u00e7\u00f5es.</p> </li> <li> <p>Criptografia: mesmo se um ator malicioso invadir o sistema, ele n\u00e3o conseguir\u00e1 entender a informa\u00e7\u00e3o.</p> </li> <li> <p>Controles de Acesso Restritos: dar somente o acesso necess\u00e1rio.</p> </li> <li> <p>Assumir a Possbilidade de Ataques: entender que em cybersecurity, todo recursos, sistema e usu\u00e1rio podem estar sofrendo ataques e tendo suas informa\u00e7\u00f5es e conex\u00f5es abaladas. Assuma que todos podem ser um ator malicioso.</p> </li> </ul>"},{"location":"defesa/estrategias-de-defesa/zero-trust/#estrutura","title":"Estrutura","text":"<p>A imagem mostra como \u00e9 a estrutura da ZTA, junto a algumas pr\u00e1ticas que est\u00e3o dentro dela. Por enquanto, vamos olhar somente para os dois planos que o ZTA prov\u00ea na imagem: - Data Plane - Control Plane</p> <p>Vamos supor que um usu\u00e1rio deseja acessar um recurso. No Data Plane, o sujeito, atrav\u00e9s de um sistema cliente, enviar\u00e1 a requisi\u00e7\u00e3o de acesso ao Policy Enforment Point (PEP). Essas informa\u00e7\u00f5es s\u00e3o consideradas n\u00e3o confi\u00e1veis por padr\u00e3o e portanto precisam provar sua confian\u00e7a. Para isso, o PEP envia a requisi\u00e7\u00e3o para o Control Plane, mais especificamente para o Policy Decision Point (PDP). O PDP possui uma engine de pol\u00edticas pr\u00e9 determinadas por um administrador de pol\u00edticas e essas pol\u00edticas v\u00e3o determinar se a requisi\u00e7\u00e3o, o usu\u00e1rio e o seu dispositivo s\u00e3o confi\u00e1veis. A resposta \u00e9 enviada de volta ao PEP e, se a resposta foi que os sujeitos s\u00e3o confi\u00e1veis, uma confian\u00e7a \u00e9 criada e o acesso ao recurso \u00e9 dado.</p> <p>Apesar de ser um modelo relativamente simples, v\u00e1rias pr\u00e1ticas apoiam essa arquitetura. Entre eles est\u00e3o:</p> <ul> <li>Continuous Diagnostic and Mitigation (CDM) System. Melhor explicado nos cap\u00edtulos de defesa cibern\u00e9tica.</li> <li>Industry Compliance. Melhor explicado no cap\u00edtulo de compliance</li> <li>Threat Intelligence. Melhor explicado nos cap\u00edtulos de Threat Intelligence.</li> <li>Logs de Atividades. Melhor Explicado nos cap\u00edtulos de Logs</li> <li>Pol\u00edticas de Acesso a Dados. Melhor explicado nos cap\u00edtulos de Identidade.</li> <li>Public Key Infrastructure (PKI). Melhor explicado nos cap\u00edtulos de infraestrutura.</li> <li>Gerenciamento de ID. Melhor explicado nos cap\u00edtulos de Identidade.</li> <li>System Incident and Event Management (SIEM). Melhor explicado nos cap\u00edtulos de defesa cibern\u00e9tica.</li> </ul>"},{"location":"defesa/gestao-de-vulnerabilidades/classificacao/","title":"Classifica\u00e7\u00e3o","text":""},{"location":"defesa/gestao-de-vulnerabilidades/classificacao/#as-varias-perspectivas-de-classificacao-de-vulnerabilidades","title":"As v\u00e1rias perspectivas de classifica\u00e7\u00e3o de vulnerabilidades","text":"<p>O processo ideal de classifica\u00e7\u00e3o \u00e9 algo particular de cada contexto. Enquanto h\u00e1 modelos que veremos mais \u00e0 frente que ajudam a classificar, ranquear e priorizarEnquanto os mais interessantes seriam aqueles que refletem o risco, u</p> <pre><code>Risco(amea\u00e7a, vulnerabilidade, impacto)\n</code></pre>"},{"location":"defesa/gestao-de-vulnerabilidades/classificacao/#cisa-kev","title":"CISA KEV","text":"<ul> <li>Classifica\u00e7\u00e3o que reflete a Amea\u00e7a</li> <li>oferece uma lista de vulnerabilidades amplamente exploradas nas ag\u00eancias federais do EUA.</li> <li>s\u00f3 olha para o contexto de ag\u00eancias federais dos EUA.</li> <li>s\u00f3 olha para o passado, para vulnerabilidades que j\u00e1 foram ou est\u00e3o sendo amplamente exploradas no contexto.</li> </ul>"},{"location":"defesa/gestao-de-vulnerabilidades/classificacao/#cvss","title":"CVSS","text":"<ul> <li>Classifica\u00e7\u00e3o que reflete o Vulnerabilidade</li> </ul>"},{"location":"defesa/gestao-de-vulnerabilidades/classificacao/#epss","title":"EPSS","text":"<ul> <li>Classifica\u00e7\u00e3o da perspectiva da Amea\u00e7a + Vulnerabilidade</li> <li>Modelo de classifica\u00e7\u00e3o de c\u00f3digo aberto.</li> <li>Vai de 0,00 a 1,00.</li> <li>Olha principalmente para o futuro, calculando e listando quais vulnerabilidades provavelmente ser\u00e3o exploradas daqui at\u00e9 30 dias.</li> <li>\u00c9 f\u00e1cil de consultar o EPSS de vulnerabilidades. \u00c9 listado o EPSS de todas as vulnerabilidades j\u00e1 encontradas.</li> <li>\u00c9 f\u00e1cil de calcular o EPSS de vulnerabilidades novas ou internas. O c\u00e1lculo \u00e9 simples.</li> </ul>"},{"location":"defesa/gestao-de-vulnerabilidades/classificacao/#ssvc","title":"SSVC","text":"<ul> <li>Classifica\u00e7\u00e3o que reflete o Risco(amea\u00e7a, vulnerabilidade, impacto)</li> <li>Modelo de classifica\u00e7\u00e3o de c\u00f3digo aberto.</li> <li>Cria uma \u00e1rvore de decis\u00e3o para calcular o impacto.</li> <li>Como resultado, pode dar os seguintes resultados:<ul> <li>Defer</li> <li>Scheduled</li> <li>Out of Cycle</li> <li>Immediate.</li> </ul> </li> <li>Dif\u00edcil de consultar e calcular SSVC de vulnerabilides j\u00e1 existentes e novas. \u00c9 um processo complexo, por isso \u00e9 pouco usado.</li> <li>A vantagem \u00e9 que o conceito e perspectiva de risco \u00e9 global, entendida n\u00e3o s\u00f3 pela TI, mas tamb\u00e9m pelos respons\u00e1veis pelo neg\u00f3cio.</li> </ul>"},{"location":"defesa/gestao-de-vulnerabilidades/classificacao/#vpr","title":"VPR","text":"<ul> <li>Modelo de classifica\u00e7\u00e3o de c\u00f3digo fechado da Tenable.</li> </ul>"},{"location":"defesa/gestao-de-vulnerabilidades/etapas/","title":"Etapas","text":"<ol> <li>Identifica\u00e7\u00e3o e Prioriza\u00e7\u00e3o de Vulnerabilidades.</li> <li>Documenta\u00e7\u00e3o da vulnerabilidade.</li> <li>Abertura de Tickets aos desenvolvedores para corre\u00e7\u00e3o.</li> <li></li> </ol>"},{"location":"defesa/gestao-de-vulnerabilidades/etapas/#automacao","title":"Automa\u00e7\u00e3o","text":"<ul> <li>n8n.</li> <li>Jira: automa\u00e7\u00e3o de cria\u00e7\u00e3o de tickets.</li> <li>Confluence: automa\u00e7\u00e3o da documenta\u00e7\u00e3o.</li> </ul>"},{"location":"defesa/gestao-de-vulnerabilidades/scan-externo/","title":"Scan Externo","text":"<p>\u00c9 necess\u00e1rio fazer scan externo para mapear as vulnerabilidades e amea\u00e7as na perspectiva de ataques externos.</p> <p>Como o ambiente externo pode ser bem din\u00e2mico, costuma ser muito oneroso realizar scans externos. Por isso scans externos costumam ser peri\u00f3dicos.</p>"},{"location":"defesa/gestao-de-vulnerabilidades/scan-externo/#shadow-server","title":"Shadow Server","text":"<p>\u00c9 um servi\u00e7o muito utilizado pelas big techs que </p>"},{"location":"forense/analise/","title":"Analise","text":""},{"location":"forense/analise/#principais-tecnicas-de-analise","title":"Principais t\u00e9cnicas de An\u00e1lise","text":"<ul> <li>Knowm File Filter </li> <li>Indexa\u00e7\u00e3o: busca por palavras chave</li> <li>Busca pela estrutura de diret\u00f3rios do SO: Sistemas operacionais populares possuem diret\u00f3rios comuns.</li> <li>Filtros: por categorias, nome, etc.</li> <li>Linha do Tempo: organiza\u00e7\u00e3o dos dados atrav\u00e9s de suas resectivas datas de cria\u00e7\u00e3o ou modifica\u00e7\u00e3o.</li> <li>Visualiza\u00e7\u00e3o de arquivos </li> <li>Virtualiza\u00e7\u00e3o</li> </ul>"},{"location":"forense/data_craving/","title":"Data Carving","text":"<p>\u00c9 quando tentamos extrair informa\u00e7\u00f5es \u00fateis de arquivos para an\u00e1lise forense. \u00c9 muito usado na an\u00e1lise de mem\u00f3ria, visto que no lixo de mem\u00f3ria, \u00e9 tudo bagun\u00e7ado.</p>"},{"location":"forense/data_craving/#assinaturas","title":"Assinaturas","text":"<p>Todo arquivo tem metadados, como: - Nome do arquivo; - Data de cria\u00e7\u00e3o; - \u00daltima modifica\u00e7\u00e3o; - Dono e permiss\u00f5es; e - Extens\u00e3o do arquivo.</p> <p>Nem todos esses dados s\u00e3o zerados numa limpa, portanto podemos uar esses metadados para identificar a que aquele trecho de mem\u00f3ria se referia.</p>"},{"location":"forense/data_craving/#calculo-de-hash","title":"C\u00e1lculo de hash.","text":"<p>Procurar um hash pre conhecido na mem\u00f3ria.</p>"},{"location":"forense/data_craving/#ferramentas","title":"Ferramentas","text":"<p>H\u00e1 ferramentas tamb\u00e9m que pegam esse lixo de mem\u00f3ria e indexam as informa\u00e7\u00f5es. Algumas s\u00e3o: - AccessData Forensics Toolkit FTK - Autopsy (frontend do sleuth kit) - OnTrack Easy Recovery - The Sleuth Kit (open source) - PhotoRec (especializada somente para DataCarvinf) - IPED (open-source e brasileiro)</p>"},{"location":"forense/ferramentas/","title":"Conserva\u00e7\u00e3o de Material","text":"<p>Quando ocorre um incidente, se desligarmos o computador, perderemos todas os dados vol\u00e1teis que podem ser cruciais na forense. O que fazer? Pra piorar, n\u00e3o podemos mudar nada no sistema, ou poderemos estar apagando ou manipulando provas. Algumas esp\u00e9cies de backup ou snapshot ajudam, como:</p>"},{"location":"forense/ferramentas/#espelhamento","title":"Espelhamento","text":"<p>Usa-se um disco vazio para copiar os dados bit a bit do disco atacado. Esse disco deve ser exclusivo s\u00f3 para o espalhamento e o espa\u00e7o de sobra deve sofrer v\u00e1rias limpas a  fim de n\u00e3o compremeter a an\u00e1lise com lixo de dados.</p>"},{"location":"forense/ferramentas/#imagem","title":"Imagem","text":""},{"location":"gerenciamento-de-acesso/","title":"\u00cdndice","text":"<ul> <li>Conceitos Introdut\u00f3rios</li> <li>Autentica\u00e7\u00e3o</li> <li>Controle de Acesso</li> <li>Autoriza\u00e7\u00e3o</li> </ul>"},{"location":"gerenciamento-de-acesso/autenticacao/","title":"Autentica\u00e7\u00e3o","text":"<p>Autentica\u00e7\u00e3o \u00e9 o processo que um sistema usa para provar que voc\u00ea \u00e9 quem diz ser. Em um sistema, usu\u00e1rios normalmente proveem de identifica\u00e7\u00f5es (usernames, IDs) aos quais afirmam ser e uma prova/fator de sua identidade. Os mecanismos de autentica\u00e7\u00e3o n\u00e3o s\u00f3 determinam que tipo de dados seriam as provas que os usu\u00e1rios precisam providenciar \u00e0s suas contas, como tamb\u00e9m verificam se a prova oferecida por um usu\u00e1rio de fato \u00e9 a que prova sua entrada ao sistema ou se\u00e7\u00e3o do sistema.</p>"},{"location":"gerenciamento-de-acesso/autenticacao/#os-3-fatores-de-autenticacao-comuns","title":"Os 3 Fatores de Autentica\u00e7\u00e3o Comuns","text":"<p>\u00c9 poss\u00edvel autenticar um usu\u00e1rio atrav\u00e9s de 3 fatores mais comuns. Fatores s\u00e3o vias de autentica\u00e7\u00e3o, o que se usa para autenticar-se.</p>"},{"location":"gerenciamento-de-acesso/autenticacao/#algo-que-sabemos","title":"Algo que sabemos","text":"<p>Senhas, PINs, chaves de recupera\u00e7\u00e3o.</p>"},{"location":"gerenciamento-de-acesso/autenticacao/#algo-que-temos","title":"Algo que temos","text":"<p>Possu\u00edmos outros dispositivos, aplicativos e outras contas em outros sites. Podemos normalmente provar a posse de algo que temos atrav\u00e9s de duas estreat\u00e9gias:</p> <ul> <li>One Time Password (OTP): o dispositivo cria uma senha, c\u00f3digo ou token que s\u00f3 pode ser usado uma \u00fanica vez. O sistema autenticador tem como conferir se o c\u00f3digo est\u00e1 correto e portanto autentica ou n\u00e3o o usu\u00e1rio. \u00c9 ainda mais comum a utiliza\u00e7\u00e3o de Time-Syncronized One Time Password (TOTP), que s\u00e3o OTPs v\u00e1lidas somente por um curto per\u00edodo de tempo. \u00c9 caso de Hardware Tokens, c\u00f3digos de recupera\u00e7\u00e3o via email e SMS e apps autenticadores, como Microsoft Authenticator, Authy, etc.</li> <li>Plug-in: o dispositivo pode ser conectado ao sistema autenticador para demonstrar sua autenticidade. \u00c9 o caso de cart\u00f5es de acesso, pendrive-chave, etc. </li> </ul>"},{"location":"gerenciamento-de-acesso/autenticacao/#algo-que-somos","title":"Algo que somos","text":"<p>Assinatura biom\u00e9trica dos dedos, scan de olho, etc.</p>"},{"location":"gerenciamento-de-acesso/autenticacao/#outros-fatores-de-autenticacao","title":"Outros Fatores de Autentica\u00e7\u00e3o","text":"<p>Menos comuns e \u00e0s vezes at\u00e9 te\u00f3ricos.</p>"},{"location":"gerenciamento-de-acesso/autenticacao/#algum-lugar-em-que-esta","title":"Algum lugar em que est\u00e1","text":"<p>Autentica\u00e7\u00e3o baseada em endere\u00e7o de IP ou geolocaliza\u00e7\u00e3o.</p>"},{"location":"gerenciamento-de-acesso/autenticacao/#alguem-que-voce-conhece","title":"Algu\u00e9m que voc\u00ea conhece","text":"<p>Autentica\u00e7\u00f5es baseadas num convite ou voucher de algum outro usu\u00e1rio.</p>"},{"location":"gerenciamento-de-acesso/autenticacao/#algo-que-voce-faz","title":"Algo que voc\u00ea faz","text":"<p>Assinatura, padr\u00f5es de comportamento, linguagem, g\u00edrias, etc.</p>"},{"location":"gerenciamento-de-acesso/autenticacao/#algo-que-voce-exibe","title":"Algo que voc\u00ea exibe","text":"<p>Personalidade, caracter\u00edstica psicol\u00f3gica, padr\u00e3o f\u00edsico, etc.</p>"},{"location":"gerenciamento-de-acesso/autenticacao/#multiple-factor-authentication-mfa","title":"Multiple Factor Authentication (MFA)","text":"<p>O mais comum at\u00e9 alguns anos atr\u00e1s eram autentica\u00e7\u00f5es utilizando somente um fator de autentica\u00e7\u00e3o. Atualmente h\u00e1 uma tend\u00eancia de utilizar sistemas de autentica\u00e7\u00e3o que pedem uma autentica\u00e7\u00e3o via m\u00faltiplos fatores. O mais comum \u00e9 a exig\u00eancia de 2 fatores (2FA) e normalmente utiliza-se \"Algo que temos\" como o segundo fator.</p>"},{"location":"gerenciamento-de-acesso/autorizacao/","title":"Autorizacao","text":""},{"location":"gerenciamento-de-acesso/autorizacao/#modelos-de-autorizacao","title":"Modelos de Autoriza\u00e7\u00e3o","text":"<p>A arquitetura geral de autoriza\u00e7\u00f5es se d\u00e1 principalmente atrav\u00e9s dos modelos de controle de acesso. Entretanto mecanismos espec\u00edficos da autoriza\u00e7\u00e3o, que n\u00e3o est\u00e3o mais estritamente relacionados aos controles de acesso, mas est\u00e3o presentes em nosso dia a dia, merecem ser mencionados.</p>"},{"location":"gerenciamento-de-acesso/autorizacao/#oauth","title":"OAuth","text":""},{"location":"gerenciamento-de-acesso/autorizacao/#openid","title":"OpenID","text":""},{"location":"gerenciamento-de-acesso/autorizacao/#saml","title":"SAML","text":""},{"location":"gerenciamento-de-acesso/broken-access-control/","title":"Controle de Acesso Quebrado","text":"<p>Esse tipo de ataque \u00e9 extremamente comum e o primeiro colocado em muitos ranks de ataques comuns. Por exemplo, \u00e9 o top 1 no OWASP Top 10 2025.</p> <p>O ataque est\u00e1 sempre no topo porque n\u00e3o \u00e9 f\u00e1cil prever e detectar esse ataque de forma automatizada.</p>"},{"location":"gerenciamento-de-acesso/conceitos/","title":"Conceitos","text":""},{"location":"gerenciamento-de-acesso/conceitos/#identidade","title":"Identidade","text":"<p>Determina quem voc\u00ea \u00e9 dentro de um sistema. Username, ID, crach\u00e1, etc.</p>"},{"location":"gerenciamento-de-acesso/conceitos/#autenticacao","title":"Autentica\u00e7\u00e3o","text":"<p>Processo em que se prova quem o usu\u00e1rio afirma ser no sistema. Portanto necessita da identidade e a prova da identidade.</p>"},{"location":"gerenciamento-de-acesso/conceitos/#autorizacao","title":"Autoriza\u00e7\u00e3o","text":"<p>Determina quais permiss\u00f5es um usu\u00e1rio possui dentro de um sistema.</p>"},{"location":"gerenciamento-de-acesso/controle-de-acesso-e-autorizacao/","title":"Modelos de Controle de Acesso e Autoriza\u00e7\u00e3o","text":"<p>Autoriza\u00e7\u00e3o \u00e9 o que determina quais direitos e permiss\u00f5es um usu\u00e1rio possui num sistema. \"Eu, administrador, autorizo usu\u00e1rio X a entrar nessa p\u00e1gina secreta\" \u00e9 uma frase que ilustra muito bem o que seria autoriza\u00e7\u00e3o.</p> <p>Atualmente, o modelo geral de como as autoriza\u00e7\u00f5es s\u00e3o dispostas em um sistema \u00e9 decidido atrav\u00e9s do modelo do controle de acesso utilizado.</p> <p>Modelos de controle de acesso definem como os sistemas de controle de acesso organizam e gerenciam seus acessos, assim como as permiss\u00f5es definidas a cada usu\u00e1rio. Muitos modelos ou conceitos desses modelos podem ser usados em conjunto para criar um sistema de controle de acesso e autoriza\u00e7\u00e3o mais robusto.</p>"},{"location":"gerenciamento-de-acesso/controle-de-acesso-e-autorizacao/#dac-discretionary-access-control","title":"DAC - Discretionary Access Control","text":"<p>Cada usu\u00e1rio tem poder para gerenciar os privil\u00e9gios de seus recursos no sistema. Ou seja, a administra\u00e7\u00e3o descentralizada.</p> <p>Voc\u00ea pode ver um exemplo ao olhar o Google Drive. Cada usu\u00e1rio pode gerenciar as permiss\u00f5es que outros usu\u00e1rios t\u00eam sobre seus pr\u00f3prios documentos e slides. \u00c9 poss\u00edvel at\u00e9 mesmo transferir a sua pr\u00f3pria posse dos arquivos a outros usu\u00e1rios.</p> <p>Apesar de descentralizado, DAC \u00e9 um modelo massante aos usu\u00e1rios, j\u00e1 que eles normalmente t\u00eam que editar a lista de usu\u00e1rios permitidos e permiss\u00f5es associadas a eles. Dependendo de como essas listas de controle de acesso s\u00e3o apresentadas no sistema e de como \u00e9 a granularidade das permiss\u00f5es, os usu\u00e1rios podem passar tempo demais editando as listas.</p>"},{"location":"gerenciamento-de-acesso/controle-de-acesso-e-autorizacao/#mac-mandatory-access-control","title":"MAC - Mandatory Access Control","text":"<p>Os privil\u00e9gios de administra\u00e7\u00e3o s\u00e3o centralizados num pequeno grupo de administra\u00e7\u00e3o do sistema, podendo \u00e1s vezes at\u00e9 ser reduzido a somente uma pessoa. Essa administra\u00e7\u00e3o centralizada \u00e9 a \u00fanica capaz de determinar o n\u00edvel de acesso de cada usu\u00e1rio, impedinddo que o pr\u00f3prio usu\u00e1rio tenha autonomia sobre o n\u00edvel de acesso pr\u00f3prio e dos outros sobre seus recursos no sistema.</p> <p>Um exemplo seria os n\u00edveis de confidencialidade de documentos: confidencial, sens\u00edvel, livre. Cada usu\u00e1rio recebeu acesso a certos n\u00edveis de confidencialidade e n\u00e3o tem como mudar seu n\u00edvel por si mesmo ou ver documentos com confidencialidade acima do que lhe \u00e9 permitido acessar.</p> <p>Logo um MAC \u00e9 \u00f3timo para organiza\u00e7\u00f5es com muita seguran\u00e7a em mente, como instala\u00e7\u00f5es militares e institui\u00e7\u00f5es financeiras. Em contrapartida, n\u00e3o \u00e9 uma boa escolha para empresas que precisam de uma flexibilidade maior e mais \u00e1gil de suas permiss\u00f5es.</p>"},{"location":"gerenciamento-de-acesso/controle-de-acesso-e-autorizacao/#rbac-role-based-access-control","title":"RBAC - Role Based Access Control","text":"<p>Os administradores de sistema separam tanto os privil\u00e9gios de funcionalidades no sistema, quanto os privil\u00e9gios de administra\u00e7\u00e3o, e os distrubuem em pap\u00e9is. Pap\u00e9is s\u00e3o conjunto de permiss\u00f5es associadas a alguma fun\u00e7\u00e3o exercida na empresa. Dessa forma, pap\u00e9is s\u00e3o distribu\u00eddos aos funcion\u00e1rios e v\u00e3o determinar o que eles podem ou n\u00e3o realizar no sistema.</p> <p>Quanto mais granular as permiss\u00f5es forem, mas \u00fateis e precisos ser\u00e3o os pap\u00e9is criados.</p> <p>Esse tipo de modelo traz maior pr\u00e1tico, visto que, para atualizar as permiss\u00f5es de um usu\u00e1rio, n\u00e3o \u00e9 preciso adicionar e retirar privil\u00e9gio por privil\u00e9gio, somente seus pap\u00e9is. Um funcion\u00e1rio que sai de sua unidade por exemplo s\u00f3 precisa ser retirado do pap\u00e9l referente as permiss\u00f5es de sua unidade.</p>"},{"location":"gerenciamento-de-acesso/controle-de-acesso-e-autorizacao/#rubac-rule-based-access-control","title":"RuBAC - Rule Based Access Control","text":"<p>O acesso a recursos \u00e9 determinado atrav\u00e9s de regras de acesso. Qualquer usu\u00e1rio que alcan\u00e7ar as condi\u00e7\u00f5es das regras recebe privil\u00e9gios sobre o recurso.</p> <p>Por exemplo: um recurso s\u00f3 aceita acesso atrav\u00e9s de um usu\u00e1rio com uma conex\u00e3o de um dispositivo mobile.</p> <p>\u00c9 comum utilizar essas listas de regras junto ao RBAC.</p>"},{"location":"gerenciamento-de-acesso/controle-de-acesso-e-autorizacao/#abac-attribute-based-access-control","title":"ABAC - Attribute Based Access Control","text":"<p>Um usu\u00e1rio tem acesso a recursos se ele possuir os atributos/caracter\u00edsticas exigidas pelo recurso. Essas caracetr\u00edsticas podem ser hora do dia, tempo atual, cargo na empresa, localiza\u00e7\u00e3o, etc.</p> <p>Por exempo: um recurso s\u00f3 pode ser acessado por funcion\u00e1rios s\u00eaniores.</p> <p>Esse tipo de modelo \u00e9 mais flex\u00edvel, mas \u00e9 pouco pr\u00e1tico. N\u00e3o d\u00e1 para gerenciar tantas condi\u00e7\u00f5es de acesso por atributo ao possuir v\u00e1rios recursos dispon\u00edveis.</p> <p>Para mais detalhes e modelos, veja: https://nordlayer.com/learn/access-control/types-of-access-control/</p>"},{"location":"malware-analysis/","title":"\u00cdndice","text":"<ol> <li>Fundamentos</li> <li>Introdu\u00e7\u00e3o a An\u00e1lise Est\u00e1tica</li> <li>Introdu\u00e7\u00e3o a An\u00e1lise Din\u00e2mica</li> </ol>"},{"location":"malware-analysis/#analise-estatica","title":"An\u00e1lise Est\u00e1tica","text":""},{"location":"malware-analysis/#analise-estatica-basica","title":"An\u00e1lise Est\u00e1tica B\u00e1sica","text":"<ol> <li>Identifica\u00e7\u00e3o do Malware</li> <li>Anatomia de Execut\u00e1veis Windows</li> <li>Bytes M\u00e1gicos</li> <li>Empacotadores</li> <li>Mapa de Importa\u00e7\u00e3o</li> <li>An\u00e1lise de Strings</li> <li>Estrat\u00e9gias para Advinhar o Comportamento dos Malwares</li> </ol>"},{"location":"malware-analysis/#analise-estatica-avancada","title":"An\u00e1lise Est\u00e1tica Avan\u00e7ada","text":"<ol> <li>Fundamentos da Arquitetura de Computadores</li> <li>Fundamentos do Funcionamento dos Compiladores</li> <li>Linguagem de Montagem</li> <li>Desmontador IDA</li> </ol>"},{"location":"malware-analysis/#analise-dinamica","title":"An\u00e1lise Din\u00e2mica","text":""},{"location":"malware-analysis/#analise-dinamica-basica","title":"An\u00e1lise Din\u00e2mica B\u00e1sica","text":""},{"location":"malware-analysis/#analise-dinamica-avancada","title":"An\u00e1lise Din\u00e2mica Avan\u00e7ada","text":""},{"location":"malware-analysis/fundamentals/","title":"Fundamentos de An\u00e1lise de Malware","text":""},{"location":"malware-analysis/fundamentals/#o-que-e-um-malware","title":"O que \u00e9 um malware?","text":"<p>Qualquer software que busca realizar a\u00e7\u00f5es maliciosas. Podemos considerar como a\u00e7\u00f5es maliciosas atividades que infrinjam a lei, privacidade, confidencialidade e seguran\u00e7a da v\u00edtima ou sistema.</p> <p>Com um escopo t\u00e3o abrangente do que pode ser considerado ou n\u00e3o malware, \u00e9 de extrema import\u00e2ncia a an\u00e1lise dos malwares. Atrav\u00e9s de sua an\u00e1lise, podemos extrair dom\u00ednios, IPs, ferramentas utilizadas e TTPs, assim entendendo completamente suas estrat\u00e9gias e inten\u00e7\u00f5es.</p>"},{"location":"malware-analysis/fundamentals/#processo-de-padrao-de-analise","title":"Processo de padr\u00e3o de an\u00e1lise","text":"<ol> <li>Obter o Malware.</li> <li>Executar an\u00e1lises de malware est\u00e1ticas e din\u00e2micas</li> <li>Criar um relat\u00f3rio sobre os resultados.</li> </ol> <p>Aqui focaremos principalmente na 2\u00aa etapa.</p>"},{"location":"malware-analysis/fundamentals/#tipos-de-analises-de-malware","title":"Tipos de an\u00e1lises de malware","text":"<p>Existem dois tipos de an\u00e1lise de malware: - Est\u00e1tica: an\u00e1lise sem executar o malware. - Din\u00e2mica: an\u00e1lise executando o malware.</p> <p>N\u00f3s normalmente implementamos ambos no processo de an\u00e1lise de malware, inclsuive indo e voltando em cada tipo de an\u00e1lise. Tamb\u00e9m \u00e9 comum que ambos os tipos e suas v\u00e1rias t\u00e9cnicas empregadas N\u00c3O d\u00e3o todas a informa\u00e7\u00e3o do malware, somente uma parte do quebra cabe\u00e7a.</p>"},{"location":"malware-analysis/fundamentals/#direcionamento-da-analise","title":"Direcionamento da an\u00e1lise:","text":"<p>Tente semrpre responder \u00e0s seguintes quest\u00f5es (ou deriva\u00e7\u00f5es delas): 1. Esse software \u00e9 realmente malicioso? 2. Qual o comportamento do malware no sistema? Como ele modifica? Cria ou apaga arquivos? Envia dados? Etc... 3. Com quem o malware se comunica? Se envia dados a suspeitos, a quem? E por qu\u00ea? 4. Como o malware pode ser detectado em nossos sitemas? 5. Como o malware pode ter sua entrada previnida em nossos sistemas? 6. Como o malware pode ser removido dos nossos sistemas caso ocorra uma infec\u00e7\u00e3o?</p>"},{"location":"malware-analysis/fundamentals/#ambientes-controlados-e-praticas-de-seguranca-na-analise-de-malware","title":"Ambientes controlados e pr\u00e1ticas de seguran\u00e7a na an\u00e1lise de malware","text":""},{"location":"malware-analysis/fundamentals/#maquinas-virtuais","title":"M\u00e1quinas Virtuais","text":"<p>\u00c9 recomendado o uso de M\u00e1quinas Virtuais, sendo elas locais ou por nuvem.</p> <p>De prefer\u00eancia, N\u00c3O INSTALE MALWARES EM SISTEMAS IMPORTANTES, mesmo com o uso de m\u00e1quinas virtuais. Existe a chance do malware se mover e infectar o host.</p> <p>Fa\u00e7a a sua m\u00e1quina virtual parecer um sistema comum de usu\u00e1rio, com ao menos:     - 2 CPUs     - 1 GB de RAM     - Aplica\u00e7\u00f5es comuns.     - M\u00faltiplos documentos e pastas abertas.</p>"},{"location":"malware-analysis/fundamentals/#snapshot","title":"Snapshot","text":"<p>M\u00e1quinas virtuais possuem o recurso Snapshot, que permite voc\u00ea salvar um estado da m\u00e1quina e voltar a esse mesmo estado depois. Elas s\u00e3o essenciais na an\u00e1lise de malware e ser\u00e3o muito \u00fateis para voltar ap\u00f3s erros ou danos.</p> <p>Antes de criar um snapshot inicial do seu sistema virtual, fa\u00e7a:</p> <ul> <li>[ ] Instale o sistema operacional, atualiza\u00e7\u00f5es e ferramentas essenciais.</li> <li>[ ] Configura\u00e7\u00f5es e personaliza\u00e7\u00f5es importantes, como desativar o firewall e o antiv\u00edrus.</li> <li>[ ] Instale as ferramentas de an\u00e1lise a malware necess\u00e1rias.</li> <li>[ ] Defina a rede como Host-Only.</li> </ul> <p>Caso instale VM Guest Tools, saiba que malwares tamb\u00e9m podem detectar isso. Portanto, \u00e9 recomendado ter um snapshot com e outro sem os VM Guest Tools.</p>"},{"location":"malware-analysis/fundamentals/#rede","title":"Rede","text":"<p>\u00c9 importante que a m\u00e1quina virtual N\u00c3O TENHA ACESSO A INTERNET enquanto o malware estiver sendo testado e ap\u00f3s.</p> <p>Um malware com acesso a rede poderia:</p> <ul> <li>Compartilhar seus dados com o atacante.</li> <li>Avisar ao atacante quem est\u00e1 analisando o malware.</li> <li>Infectar outros dispositivos na rede.</li> </ul> <p>Por isso \u00e9 importante sempre assegurar as seguintes carater\u00edsticas da rede da sua m\u00e1quina virtual:</p> <ul> <li> <p>Segmenta\u00e7\u00e3o de rede: ao segmentar, voc\u00ea dificulta que ela navegue pela sua rede.</p> </li> <li> <p>Rede Host-Only: essa configura\u00e7\u00e3o determina que a m\u00e1quina virtual s\u00f3 se conecte ao seu sistema original e n\u00e3o ao resto da rede e internet.</p> </li> <li> <p>Rede fingindo estar online: crie uma Storage Area Network virtual com aplica\u00e7\u00f5es como FakeNet. Ela criar\u00e1 endpoints falsos e dar\u00e1 um acesso a internet falso e monitorado.</p> </li> </ul> <p>Essas configura\u00e7\u00f5es em sua maioria s\u00e3o feitas atrav\u00e9s da m\u00e1quina oiginal ou atrav\u00e9s das configura\u00e7\u00f5es da pr\u00f3pria m\u00e1quina virtual.</p>"},{"location":"malware-analysis/fundamentals/#manejo-de-malware","title":"Manejo de malware","text":"<p>Muitos malwares possuem medidas anti-an\u00e1lise que podem detectar o ambiente emq uest\u00e3o como M\u00e1quinas virtuais e pararem de funcionar por conta disso ou at\u00e9 mesmo lan\u00e7arem um zero-day attack a fim de quebrar a m\u00e1quina. Por isso os cuidados anteriores com a m\u00e1quina virtual e a rede s\u00e3o necess\u00e1rios.</p> <p>Outros cuidados agora com o pr\u00f3prio malware em m\u00e3os vem \u00e0 tona:</p> <ul> <li>Ao baixar um malware, sempre ponha senha em seus malware. \u00c9 comum que se empacote os malware e ponha senhas nesses pacotes de malware a fim de evitar execu\u00e7\u00f5es indesejadas ou acidentais. A senha padr\u00e3o costuma ser \"infected\".</li> <li>Ao reportar URLs, evite a cria\u00e7\u00e3o de hyperlinks autom\u00e1ticos. \u00c9 comum trocar \"http\" por \"hxxp\" para isso e dificulta que algu\u00e9m clique e entre no link sem querer.</li> </ul>"},{"location":"malware-analysis/fundamentals/#maquinas-de-monitoramento","title":"M\u00e1quinas de Monitoramento","text":"<p>Lembrando que \u00e9 aconselh\u00e1vel n\u00e3o utilizar m\u00e1quinas importantes, mesmo que o malware seja aberto na m\u00e1quina virtual. A m\u00e1quina de monitoramento \u00e9 tamb\u00e9m a m\u00e1quina em que a m\u00e1quina virtual est\u00e1 sendo executada, ou seja, \u00e9 a m\u00e1quina original.</p> <p>Enquanto as m\u00e1quinas virtuais s\u00e3o m\u00ednimas e tentam se parecer de usu\u00e1rios ver\u00eddicos, as m\u00e1quinas de montiramento s\u00e3o equipadas com uma s\u00e9rie de ferramentas de monitoramento. Ferramentas comuns s\u00e3o: - Monitoramento de Rede, como Wireshark. - Simulador de Redes, como o FakeNet. - Monitor de tarefas do sistema. - Outras ferramentas que o analista julgue necess\u00e1rio.</p> <p>Existem distribui\u00e7\u00f5es e sistemas operacionais j\u00e1 prontos para an\u00e1lise de malware, como o: - Kali Linux. - Renmux.</p>"},{"location":"malware-analysis/fundamentals/#ferramentas-de-analise-de-malware","title":"Ferramentas de An\u00e1lise de Malware","text":"<p>Existem v\u00e1rias ferramentas por a\u00ed de an\u00e1lise de malware. Elas podem facilitar sua vida, mas sempre tenha cuidado! \u00c0s vezes ferramentas como essa podem realizar a\u00e7\u00f5es inesperadas e at\u00e9 maliciosas. Sempre analise muito bem suas ferramentas.</p>"},{"location":"malware-analysis/fundamentals/#fontes-de-samples-de-malware-para-analise-e-treinamento","title":"Fontes de Samples de Malware para an\u00e1lise e treinamento","text":"<ul> <li>Virus Total (premium)</li> <li>Malware Baazar</li> <li>Hybrid Analysis</li> <li>Malpedia</li> <li>vx-underground</li> </ul>"},{"location":"malware-analysis/malware_categories/","title":"Categorias de Malware no ponto de vista da An\u00e1lise de Malware","text":""},{"location":"malware-analysis/malware_categories/#virus","title":"Virus","text":""},{"location":"malware-analysis/malware_categories/#root-kit","title":"Root Kit","text":""},{"location":"malware-analysis/malware_categories/#dropper","title":"Dropper","text":""},{"location":"malware-analysis/malware_categories/#side-loading","title":"Side Loading","text":""},{"location":"malware-analysis/malware_categories/#downloader","title":"Downloader","text":""},{"location":"malware-analysis/malware_categories/#launcher-loader","title":"Launcher/ Loader","text":""},{"location":"malware-analysis/malware_categories/#botnet","title":"Botnet","text":""},{"location":"malware-analysis/malware_categories/#backdoor","title":"Backdoor","text":""},{"location":"malware-analysis/malware_categories/#information-stealer","title":"Information Stealer","text":""},{"location":"malware-analysis/static/introduction/","title":"An\u00e1lise Est\u00e1tica","text":"<p>A an\u00e1lise est\u00e1tica ocorre quando vamos examinar um malware sem de fato execut\u00e1-lo.</p> <p>Sem executar o malware, n\u00e3o deveriahaver perigo de infec\u00e7\u00e3o, entretanto ferramentas de an\u00e1lise est\u00e1tica ainda podem ativ\u00e1-lo de alguma forma, principalmente se voc\u00ea n\u00e3o conhece muito bem a ferramenta que utiliza. Tome cuidado.</p> <p>Ela costuma ser executada antes da an\u00e1lise din\u00e2mica, mas pode ser rexecutada depois. A partir da an\u00e1lise est\u00e1tica, extra\u00edmos informa\u00e7\u00f5es gerais sobre o malware e, em caso de precisar de uma an\u00e1lise din\u00e2mica posterior, usamos a an\u00e1lise est\u00e1tica para limitar o escopo da an\u00e1lise din\u00e2mica em objetivos espec\u00edficos.</p> <p>Existem v\u00e1rias t\u00e9cnicas de an\u00e1lise est\u00e1tica, como:</p> <ul> <li>Identifica\u00e7\u00e3o<ul> <li>Identifica\u00e7\u00e3o por Hashing.</li> <li>Identifica\u00e7\u00e3o de arquivos por padr\u00f5es de assinatura.</li> </ul> </li> <li>An\u00e1lise de Strings.<ul> <li>An\u00e1lise de conte\u00fado</li> <li>An\u00e1lise de importa\u00e7\u00f5es e exporta\u00e7\u00f5es.</li> </ul> </li> <li>An\u00e1lise do Windows PE.</li> <li>Engenharia Reversa.</li> <li>Desempacotamento espec\u00edfico.</li> </ul>"},{"location":"malware-analysis/static/advanced/assembly_x86/","title":"Assembly x86","text":"<p>Atualmente voc\u00ea j\u00e1 aprendeu v\u00e1rios dos conceitos que ser\u00e3o utilizados no Assembly, como:</p> <ul> <li>Linguagem de M\u00e1quina</li> <li>Instru\u00e7\u00e3o</li> <li>Palavra</li> <li>Arquitetura de 32 e 64 bits (ou tamanho da palavra)</li> <li>Registrador</li> <li>Mem\u00f3ria RAM.</li> <li>Stack e Heap.</li> </ul> <p>Tendo aprendido isso, agora \u00e9 s\u00f3 entender as diretrizes e regras para entender e construir programas em ASM. Uma boa leitura \u00e9 o gloss\u00e1rio gratuito da Mente Bin\u00e1ria.</p> <p>Veremos a linguagem de m\u00e1quina e montagem CISC dos processadores Intel, chamado de x86. Ele foi escolhido porque \u00e9 a arquitetura mais utilizada para computadores pessoais Windows, em que boa parte dos malwares est\u00e1 alocada.</p> <p>Um exemplo de c\u00f3digo x86 \u00e9</p> <pre><code>mov EAX, 2\nadd EAX, 3\n</code></pre> <ul> <li>Cada linha representa uma instru\u00e7\u00e3o.</li> <li>EAX \u00e9 um registrador de 32 bits e de uso geral.</li> <li> <p>A opera\u00e7\u00e3o mov recebe dois operandos, o primeiro \u00e9 um registrador que ir\u00e1 receber um valor e o segundo \u00e9 um valor constante que ser\u00e1 movido ao registrador.</p> </li> <li> <p>A opera\u00e7\u00e3o add recebe dois operandos. O primeiro \u00e9 um registrador que soma seu valor atual com o n\u00famero no segundo operando. O resultado \u00e9 guardado no mesmo registrador.</p> </li> </ul> <p>O c\u00f3digo anterior pode ser entendido dessa forma:</p> <pre><code>EAX = 2\nEAX = EAX + 3\n</code></pre> <p>Cada linha representa uma instru\u00e7\u00e3o e normalmente se faz um coment\u00e1rio para cada instru\u00e7\u00e3o em ASM indicando o que ela significa. Dessa forma, ficaria assim:</p> <pre><code>mov EAX, 2 # EAX = 2\nadd EAX, 3 # EAX = EAX + 3\n</code></pre> <p>Tudo em uma linha ap\u00f3s um hashtag (#) \u00e9 ignorado pelo assembler. </p>"},{"location":"malware-analysis/static/advanced/assembly_x86/#breve-historia-do-x86","title":"Breve hist\u00f3ria do x86","text":"<p>A linguagem de montagem x86 foi criada para a fam\u00edlia de processadores x86, sendo o primeiro o Intel 8086 de 16 bits. V\u00e1rias empresas participaram da cria\u00e7\u00e3o e atualiza\u00e7\u00e3o da linguagem incluindo a AMD. Por falar em atualiza\u00e7\u00e3o, a linguagem j\u00e1 foi atualizada diversas vezes, mas sempre tenta manter sua retrocompatibilidade com os sistemas anteriores.</p>"},{"location":"malware-analysis/static/advanced/assembly_x86/#versoes-da-isa-do-x86","title":"Vers\u00f5es da ISA do x86","text":"<ul> <li>IA-16 (16 bits)</li> <li>IA-32 (32 bits)</li> <li>IA-64 (64 bits)</li> </ul>"},{"location":"malware-analysis/static/advanced/assembly_x86/#registradores","title":"Registradores","text":""},{"location":"malware-analysis/static/advanced/assembly_x86/#uso-geral","title":"Uso Geral","text":"<p>No Intel 8086, de 16 bits, foram criados 8 registradores de uso geral de 16 bits:</p> Nota\u00e7\u00e3o T\u00edtulo Significado AX Acumulador Normalmente recebe o resultado de opera\u00e7\u00f5es BX Base Normalmente seu conte\u00fado \u00e9 interpretado como endere\u00e7o de mem\u00f3ria e usado como enre\u00e7o inicial/base para alguma opera\u00e7\u00e3o CX Contador Normalmente recebe a quantidade de repeti\u00e7\u00f5es de um loop DX Data Normalmente \u00e9 usado como entrada e sa\u00edda de opera\u00e7\u00f5es de portas f\u00edsicas SP Stack Pointer Guarda o endere\u00e7o de mem\u00f3ria do topo da stack BP Base Pointer Guarda o enrede\u00e7o de mem\u00f3ria inicial do escopo de mem\u00f3ria em que o programa est\u00e1 SI Start Index Guarda o endere\u00e7o base de uma string DI Destination Index Guarda o endere\u00e7o de destino em que uma string ap\u00f3s uma opera\u00e7\u00e3o <p>Al\u00e9m disso, o x86 tamb\u00e9m lhe permite manipular 8 bits dos registradores AX a at\u00e9 DX. Para o AX, podemos escrever AH para nos referimos aos 8 bits mais significativos do registrador AX. Da mesma forma, ao escrever AL, referimo-nos aos 8 bits menos significativos do registrador. O mesmo padr\u00e3o existe para cada um dos registradores de uso geral.</p> <p>Com a implementa\u00e7\u00e3o do Intel i386, a palavra da arquitetura seria de 32 bits e portanto seria conveniente que o x86 oferecesse registradores de x86 para facilitar as opera\u00e7\u00f5es. Assim foram criados os Registradores de Uso Geral Extendidos. Eles s\u00e3o os mesmos, mas com prefixo \"E\". Assim sendo EAX, EBX, ECX, EDX, ESP, EBP, ESI e EDI.</p> <p>O i386 possui somente registradores de 32 bits, mas as chamadas aos registradores de 16 bits continuam funcionando devido a retrocompatibilidade. O i386 converte as chamadas aos registradores de 16 bits em men\u00e7\u00f5es aos 16 bits menos significativos dos registradores de 32 bits correspondentes. Veja a imagem:</p> <p></p> <p>O mesmo padr\u00e3o se manteu para os i686 (64 bits). Registradores de 64 bits foram apelidados com o prefixo \"R\". Al\u00e9m disso, tambem podemos acessar os bytes menos significativos de todos os registradores de 64 bits adicionando o sufixo: - \"B\" (de byte) para o 8 bits menos significativo. - \"W\" (de word) para os 16 bits menos significativos. - \"D\" (de double word) para os 32 bits menos significativos.</p> <p>\u00d3bvio, existem mais detalhes, mas eles n\u00e3o ser\u00e3o abordados aqui.</p>"},{"location":"malware-analysis/static/advanced/assembly_x86/#_1","title":"Assembly x86","text":""},{"location":"malware-analysis/static/advanced/compiler_proccess/","title":"Sobre Instru\u00e7\u00f5es e a Linguagem da M\u00e1quina","text":"<p>Um computador por padr\u00e3o s\u00f3 aceita uma linguagem bin\u00e1ria de 0 e 1, mas atualmente n\u00f3s, inclusive os produtores de malware, escrevemos programas linguagens como Python e C, com termos em ingl\u00eas. Como isso \u00e9 poss\u00edvel?</p>"},{"location":"malware-analysis/static/advanced/compiler_proccess/#linguagem-de-maquina","title":"Linguagem de M\u00e1quina","text":"<p>A CPU disponibiliza um conjunto finito bem espec\u00edfico de instru\u00e7\u00f5es que podem ser lidos e executados por ela. Essa linguagem \u00e9 chamada de linguagem de m\u00e1quina.</p> <p>Um computador s\u00f3 entende lingaugem bin\u00e1ria, a varia\u00e7\u00e3o de tens\u00e3o el\u00e9trica em seus componentes, bits. Portanto a linguagem de m\u00e1quina em qualquer computador \u00e9 sempre uma linguagem bin\u00e1ria. Cada linguagem de m\u00e1quina entretanto define sequ\u00eancias fixas de bits que podem significar alguma instru\u00e7\u00e3o para o computador. Uma instru\u00e7\u00e3o, como o nome j\u00e1 indica, \u00e9 uma ordem que o computador entende e realiza. Chamamos de ISA (Instruction Set Architecture) o conjunto de instru\u00e7\u00f5es disponibilizados por um processador. A maioria dos computadores atualmente entendem instru\u00e7\u00f5es de 32 ou 64 bits.</p> <p>Fazendo alus\u00e3o a linguagem portuguesa, um computador de 32 bits n\u00e3o vai ver sentido em bits soltos, igual um brasileiro alfabetizado n\u00e3o v\u00ea sentido em letras soltas. Para fazer sentido, as letras precisam formar uma palavra e em computadores de 32 bits, s\u00f3 sequ\u00eancias exatas de 32 bits podem formar palavras. Inclusive, o termo palavra \u00e9 de fato usado na computa\u00e7\u00e3o com esse sentido. Computadores de 64 bits t\u00eam palavras de 64 bits.</p>"},{"location":"malware-analysis/static/advanced/compiler_proccess/#linguagem-de-montagem","title":"Linguagem de Montagem","text":"<p>A linguagem de montagem \u00e9 uma tradu\u00e7\u00e3o literal da linguagem de m\u00e1quina (em bin\u00e1rio) para uma linguagem mais compreens\u00edvel para leitura humana (com siglas e palavras em ingl\u00eas). Por ser uma tradu\u00e7\u00e3o literal, normalmente h\u00e1 pouca abstra\u00e7\u00e3o, obrigando que quem leia uma linguagem de montagem ainda tenha que entender bastante do computador, bin\u00e1rio e seu funcionamento. Em an\u00e1lise est\u00e1tica avan\u00e7ada de malware, haver\u00e1 muita intera\u00e7\u00e3o com Assembly.</p> <p>Linguagens de montagem (e consequentemente linguagens de m\u00e1quina) s\u00e3o dividas em duas categorias: - Complex Instruction Set Computer (CISC): abstrai mais opera\u00e7\u00f5es a n\u00edvel de hardware e portanto possui uma implementa\u00e7\u00e3o mais complexa e por vezes uma execu\u00e7\u00e3o mais lenta. Em troca, os programadores de CISC j\u00e1 possuem instru\u00e7\u00f5es complexas prontas. - Reduced Instruction Set Computer (RISC): possui menos op\u00e7\u00f5es de instru\u00e7\u00f5es complexas prontas em troca de mais velocidade e simplicidade na implementa\u00e7\u00e3o do hardware. Em troca, deixa com que os programadores de RISC e compiladores tenham menos fun\u00e7\u00f5es prontas dispon\u00edveis em seu arsenal.</p> <p>Linguagens de Montagem famosas s\u00e3o: - Assembly x86: usadas em processadores Intel de arquitetura x86, ou seja, na maior parte dos computadores pessoais. \u00c9 uma linguagem CISC e entende palavras 32 bits. Possui uma varia\u00e7\u00e3o de 64 bits para processadores Intel x86_64 ou x64. - Assembly ARM: usadas em microprocessadores amplamente empregados em tecnologias embarcadas e celulares. \u00c9 uma linguagem RISC que entende palavras de 32 bits. - Assembly RISC-V: </p>"},{"location":"malware-analysis/static/advanced/compiler_proccess/#montador-e-desmontador","title":"Montador e Desmontador","text":"<p>Como a transi\u00e7\u00e3o entre linguagem de montagem para linguagem bin\u00e1ria \u00e9 uma tradu\u00e7\u00e3o literal, o montador \u00e9 um software at\u00e9 de simples implementa\u00e7\u00e3o. Ele \u00e9 equivalente a uma tabela de tradu\u00e7\u00e3o. O mesmo funciona para o desmontador: funciona que nem uma tabela de tradu\u00e7\u00e3o. Apesar de simples, desmontadores ser\u00e3o muito importantes na an\u00e1lise avan\u00e7ada de malware.</p>"},{"location":"malware-analysis/static/advanced/compiler_proccess/#linguagens-de-alto-nivel","title":"Linguagens de Alto N\u00edvel","text":"<p>\u00c9 comum denotarmos a linguagem bin\u00e1ria e de montagem como de baixo n\u00edvel por estarem mais pr\u00f3ximas da implementa\u00e7\u00e3o em hardware. Linguagens de alto n\u00edvel entretanto est\u00e1 mais pr\u00f3xima da l\u00f3gica humana de se pensar. Linguagens como Python e C exigem que o usu\u00e1rio saiba pouco do funcionamento interno do computador e s\u00e3o amplamente utilizados atualmente.</p>"},{"location":"malware-analysis/static/advanced/compiler_proccess/#compilador","title":"Compilador","text":"<p>A transforma\u00e7\u00e3o da l\u00f3gica humana de uma linguagem de alto n\u00edvel para o restrito conjunto de instru\u00e7\u00f5es computacionais da CPU n\u00e3o \u00e9 simples. Compiladores realizam diversos processos e decis\u00f5es para garantir uma maior otimiza\u00e7\u00e3o do c\u00f3digo em sua implementa\u00e7\u00e3o e linguagem de montagem.</p> <p>Como a maioria dos programadores n\u00e3o escreve diretamente em linguagem de montagem ou bin\u00e1ria, a grande maioria dos bin\u00e1rios e execut\u00e1veis maliciosos ter\u00e3o sido gerados por compiladores. E tentar \"descompilar\" muitas vezes n\u00e3o \u00e9 uma op\u00e7\u00e3o, porque \u00e9 um processo ainda mais complexo que depende muito do compilador utilizado e os par\u00e2metros utilizados nele, elementos esses que na maioria das vezes n\u00e3o s\u00e3o conhecidos pelo analista. N\u00e3o \u00e9 indicado que nenhum analista de malware dependa de descompiladores com as limita\u00e7\u00f5es das tecnologias atuais, saibam assembly.</p> <p>O estudo dos compiladores mais utilizados pelo mercado e seus padr\u00f5es de implementa\u00e7\u00e3o em assembly \u00e9 uma atividade interessante para analistas mais experientes em an\u00e1lise est\u00e1tica avan\u00e7ada.</p> <p>Os compiladores mais cl\u00e1ssicos, como o o GCC (GNU C Compiler) costumam realizar os seguintes processos em ordem:</p> <ol> <li>Pr\u00e9 Compila\u00e7\u00e3o<ul> <li>No GCC, use <code>gcc -E arquivo.c</code> para realizar somente a pr\u00e9-compila\u00e7\u00e3o.</li> </ul> </li> <li>Compila\u00e7\u00e3o:<ul> <li>Processo complexo que envolve traduzir linguagens de alto n\u00edvel para uma linguagem de baixo n\u00edvel montadora.</li> <li>Resultado: arquivo em linguagem de montagem (entens\u00e3o <code>.s</code> ou <code>.asm</code>).</li> <li>No GCC, use <code>gcc -S arquivo.c</code> para realizar somente pr\u00e9-compila\u00e7\u00e3o e compila\u00e7\u00e3o.</li> </ul> </li> <li>Montagem:<ul> <li>Processo de tradu\u00e7\u00e3o da linguagem de montagem para a linguagem de m\u00e1quina. \u00c9 uma tradu\u00e7\u00e3o literal e simples.</li> <li>Resultado: execut\u00e1vel sem links de bibliotecas. Em Windows, \u00e9 um <code>.exe</code> e em Linux \u00e9 um <code>.o</code>.</li> <li>No GCC, use <code>gcc -c arquivo.c</code> para realizar somente pr\u00e9-compila\u00e7\u00e3o, compila\u00e7\u00e3o e montagem.</li> </ul> </li> <li>\"Carregamento de bibliotecas\" / Linking<ul> <li>Processo de carregar as bibliotecas utilizadas pelo programa.</li> <li>Resultado: execut\u00e1vel. Em Windows, \u00e9 um <code>.exe</code> e em Linux \u00e9 um <code>.o</code>.</li> <li>No GCC, use <code>gcc arquivo.c</code> para realizar todos as etapas.</li> </ul> </li> </ol> <p>Compiladores como o GCC seguem esse fluxo.</p> <p>Hoje em dias, existem interpretadores e compiladores misturados com interpretadores, mas o entendimento do compilador cl\u00e1ssico \u00e9 o bastante para an\u00e1lise est\u00e1tica avan\u00e7ada.</p>"},{"location":"malware-analysis/static/advanced/computer_fundamentals/","title":"Arquitetura de Hardware e Software para An\u00e1lise de Malware","text":"<p>J\u00e1 foi estudado anteriormente a estrutura de execut\u00e1veis Windows e vimos como esse conte\u00fado foi importante para entender mais profundamente algumas t\u00e9cnicas de an\u00e1lise est\u00e1tica de malware simples, como a an\u00e1lise de bytes m\u00e1gicos. Agora para a an\u00e1lise est\u00e1tica avan\u00e7ada, ainda mais conhecimento t\u00e9cnico \u00e9 exigido do analista para entender o que est\u00e1 fazendo e como prosseguir. Um dos conhecimentos necess\u00e1rios para a an\u00e1lise est\u00e1tica avan\u00e7ada \u00e9 justamente sobre a arquitetura de software e hardware.</p>"},{"location":"malware-analysis/static/advanced/computer_fundamentals/#arquitetura-de-neumann","title":"Arquitetura de Neumann","text":"<p>A arquitetura de Neumann \u00e9 um modelo baseado fortemente na M\u00e1quina Universal de Turing e \u00e9 considerado atualmente como a arquitetura universal dos computadores. Sua arquitetura \u00e9 simples de entender, ela prev\u00ea o computador como uma intera\u00e7\u00e3o entre 3 componentes:</p> <ul> <li>Mem\u00f3ria: componente de armazenamento de dados.</li> <li>Unidade L\u00f3gica Aritm\u00e9tica (ULA): respons\u00e1vel por realizar opera\u00e7\u00f5es matem\u00e1ticas t\u00edpicas de um sistema computacional, como soma, subtra\u00e7\u00e3o, etc.</li> <li>Unidade de Controle: unidade respons\u00e1vel por ler as instru\u00e7\u00f5es de comando e realizar chamadas para os outros componentes realizarem suas devidas opera\u00e7\u00f5es. Logo tamb\u00e9m \u00e9 o respons\u00e1vel por lidar com as entradas e sa\u00eddas do sistema.</li> </ul> <p>As unidades de controle e l\u00f3gica aritim\u00e9ticas juntas formam a Unidade Central de Processamento (CPU) ou Processador.</p> <p></p>"},{"location":"malware-analysis/static/advanced/computer_fundamentals/#memoria-ram","title":"Mem\u00f3ria RAM","text":"<p>Um programa normalmente fica armazenado na mem\u00f3ria secund\u00e1ria (HD, SSD) at\u00e9 que a m\u00e1quina queira execut\u00e1-lo. Quando em execu\u00e7\u00e3o, o programa \u00e9 levado da mem\u00f3ria secund\u00e1ria para a mem\u00f3ria prim\u00e1ria (RAM, Cache).</p> <p>A mem\u00f3ria RAM \u00e9 com quem a CPU mais se comunica durante a execu\u00e7\u00e3o de um programa e pela sua velocidade extremamente mais veloz do que a mem\u00f3ria secund\u00e1ria, ela guarda diveras informa\u00e7\u00f5es essenciais. Por isso \u00e9 importante entender como a mem\u00f3ria RAM funciona.</p>"},{"location":"malware-analysis/static/advanced/computer_fundamentals/#caracteristicas","title":"Caracter\u00edsticas","text":"<ul> <li>RAM = Random Access Memory</li> <li>Mem\u00f3ria Vol\u00e1til, ou seja, ao desligar a m\u00e1quina, as informa\u00e7\u00f5es se perdem.</li> <li></li> </ul>"},{"location":"malware-analysis/static/advanced/computer_fundamentals/#estrutura-e-segmentacao-da-memoria-ram","title":"Estrutura e Segmenta\u00e7\u00e3o da Mem\u00f3ria RAM","text":"<p>A segmenta\u00e7\u00e3o da mem\u00f3ria \u00e9 quando separamos parte ou toda a mem\u00f3ria RAM em se\u00e7\u00f5es, intervalos de endere\u00e7os da mem\u00f3ria restritos para usos espec\u00edficos. </p> <p>Vimos anteriormente que um execut\u00e1vel Windows segmenta sua mem\u00f3ria para ser compreeendida em v\u00e1rias se\u00e7\u00f5es e cabe\u00e7alhos, como .text, DOS HEADER, .data. Outros formatos de arquivos fazem estruturas parecidas e nisso n\u00e3o h\u00e1 segredo.</p> <p>Entretanto, at\u00e9 agora falamos somente dos dados est\u00e1ticos ocupados pelo execut\u00e1vel. Quando ele for executado, ou seja, quando estiver em runtime, muitos mais dados podem ser gerados e para lidar com isso, a mem\u00f3ria RAM precisa liberar mais espa\u00e7o. A fim de lidar com isso, programas reservam mais dois espa\u00e7os na RAM: </p> <ul> <li>Stack / Pilha: \u00e9 um espa\u00e7o reservado na mem\u00f3ria RAM que funciona como uma LIFO (Last In, First Out - o \u00faltimo dado adicionado \u00e9 o primeiro a ser retirado). Seu comportamento \u00e9 igual a de uma pilha e por isso os programadores acham-na perfeita para armazenar dados de fun\u00e7\u00f5es. Entre suas vantagens est\u00e3o:<ul> <li>Possibilita \"fun\u00e7\u00f5es que chamam fun\u00e7\u00f5es\".</li> <li>Possibilita fun\u00e7\u00f5es recursivas.</li> <li>Possui tamanho limtado, podendo gerar Stack Overflow ao exceder o tamanho esperado.</li> <li>Possibilita a cria\u00e7\u00e3o de escopos de mem\u00f3ria existentes em linguagens de programa\u00e7\u00e3o de alto n\u00edvel.</li> </ul> </li> <li>Heap: espa\u00e7o de mem\u00f3ria que oferece endere\u00e7os aleat\u00f3rios da sua mem\u00f3ria para armazenar seus dados. Voc\u00ea pede um endere\u00e7o da Heap e ela reserva esse espa\u00e7o, n\u00e3o deixando que outro programa a utilize. Normalmente \u00e9 utilizado para aloca\u00e7\u00e3o din\u00e2mica de mem\u00f3ria pelos programas.</li> </ul> <p>Ambos os espa\u00e7os s\u00e3o afastados do local de armazenamento dos dados dos execut\u00e1veis e costumam ser usados por v\u00e1rios programas ao mesmo tempo.</p>"},{"location":"malware-analysis/static/advanced/computer_fundamentals/#cpu","title":"CPU","text":"<p>A CPU, quando for executar o programa, far\u00e1 as seguintes etapas para cada uma de suas instru\u00e7\u00f5es:</p> <ol> <li>resgatar a instru\u00e7\u00e3o da mem\u00f3ria RAM.</li> <li>decodificar a instru\u00e7\u00e3o em c\u00f3digo de m\u00e1quina.</li> <li>executar cada instru\u00e7\u00e3o, uma por uma.</li> </ol> <p>Para realizar todas essas fun\u00e7\u00f5es, a CPU tamb\u00e9m disp\u00f5e de mem\u00f3ria, uma mem\u00f3ria muito mais r\u00e1pida e cara do que as anteriores, os registradores. Registradores s\u00e3o estruturas eletr\u00f4nicas de hardware implementados na CPU com a capacidade de armazenar dados. Eles funcionam da mesma forma que vari\u00e1veis, mas com um n\u00famero finito e bem mais limitado. Registradores ser\u00e3o importantes na an\u00e1lise est\u00e1tica avan\u00e7ada porque:</p> <ul> <li>\u00c9 comum que um programa utilize registradores na linguagem de baixo n\u00edvel (Assembly, execut\u00e1vel) ao implementar vari\u00e1veis na linguagem de alto n\u00edvel (Python, C, Java, etc).</li> <li>Considere a mem\u00f3ria RAM e os registradores como os verdadeiros m\u00e9todos de armazenamento de um programa em execu\u00e7\u00e3o. Dificilmente uma informa\u00e7\u00e3o a ser executada n\u00e3o passar\u00e1 por um deles.</li> <li>Registradores de uso geral podem guardam valores e endere\u00e7os de mem\u00f3ria importantes para o entendimento de um malware.</li> <li>Registradores reservados para uso do computador podem guardar informa\u00e7\u00f5es importantes sobre a situa\u00e7\u00e3o atual da m\u00e1quina ou de um processo que est\u00e1 utilizando.</li> </ul>"},{"location":"malware-analysis/static/advanced/dissassembler/","title":"IDA PRO","text":""},{"location":"malware-analysis/static/advanced/results/","title":"Resultados e Deriva\u00e7\u00f5es de uma An\u00e1lise Est\u00e1tica Avan\u00e7ada","text":""},{"location":"malware-analysis/static/advanced/results/#analise-de-ttps","title":"An\u00e1lise de TTPs","text":""},{"location":"malware-analysis/static/advanced/results/#analise-de-ttp-automatizada-madiant-capa","title":"An\u00e1lise de TTP Automatizada - Madiant CAPA","text":""},{"location":"malware-analysis/static/advanced/results/#_1","title":"Resultados e Deriva\u00e7\u00f5es de uma An\u00e1lise Est\u00e1tica Avan\u00e7ada","text":""},{"location":"malware-analysis/static/simple/comportamento/","title":"Estrat\u00e9gias para Advinhar o Comportamento","text":""},{"location":"malware-analysis/static/simple/exe-anatomy/","title":"Anatomia de execut\u00e1veis Windows Portable Executable (Windows PE)","text":"<p>Programas de fato execut\u00e1veis no Windows s\u00e3o os .EXE ou Windows PE. Eles s\u00e3o bin\u00e1rios normalmente gerados por algum compilador, como o GCC, e carregam consigo \"todas\" as instru\u00e7\u00f5es para a execu\u00e7\u00e3o do arquivo. </p> <p>Ao serem gerados, Windows PE possuem a seguinte estrutura nesta ordem:</p> <ul> <li>Cabe\u00e7alho DOS</li> <li>DOS Stub</li> <li>Cabe\u00e7alho do PE</li> <li>Cabe\u00e7alho Opcional</li> <li>Cabe\u00e7alho / Tabela de Se\u00e7\u00e3o</li> <li>Import / Export Adress Table (IAT)</li> <li>Se\u00e7\u00f5es</li> </ul> <p>Existem v\u00e1rias se\u00e7\u00f5es num execut\u00e1vel, entre elas est\u00e3o: - .text: cont\u00e9m as instru\u00e7\u00f5es a serem executadas. Em tese, deveria ser o \u00fanico local do programa com instru\u00e7\u00f5es execut\u00e1veis. - .data: armazena dados globais acess\u00edveis pelo programa, como vari\u00e1veis, strings e fun\u00e7\u00f5es. - .rdata: \u00e9 a mesma coisa do .data, mas com dados somente para leitura(ready-only). - .idata: (opcional) cont\u00e9m dados de fun\u00e7\u00f5es importadas. Se esta se\u00e7\u00e3o n\u00e3o estiver presente, muito provavelmente os dados das fun\u00e7\u00f5es estar\u00e3o em .rdata. - .edata: cont\u00e9m dados de fun\u00e7\u00f5es exportadas. - .pdata: (existe apenas em bin\u00e1rios de 64 bits) cont\u00e9m dados sobre tratamentos de exce\u00e7\u00f5es. - .rsrc: cont\u00e9m recursos utilizados pelo bin\u00e1rios, como imagens, strings, \u00e1udios, \u00edcone, etc.</p>"},{"location":"malware-analysis/static/simple/exe-anatomy/#ferramentas-de-visualizacao-binaria","title":"Ferramentas de visualiza\u00e7\u00e3o bin\u00e1ria","text":"<p>S\u00e3o ferramentas que permitem ao usu\u00e1rio ver o programa em v\u00e1rias bases num\u00e9ricas. A maioria os programas l\u00ea o programa em base bin\u00e1ria, hexadecimal. Alguns outros tentam interpretar os bits e extrair algumas Strings ASCII. Enfim, s\u00e3o ferramentas interessantes para aprender an\u00e1lise de malware e analisar malwares manualmente durante emerg\u00eancias.</p>"},{"location":"malware-analysis/static/simple/exe-anatomy/#frhed","title":"Frhed","text":"<p>O Frhed mostra o arquivo numa visualiza\u00e7\u00e3o bin\u00e1ria, hexadecimal e ASCII. \u00c9 \u00fatil, porque possibilita uma f\u00e1cil an\u00e1lise manual das assinaturas nos arquivos. Entretanto, n\u00e3o \u00e9 feito para escabilidade ou automatiza\u00e7\u00e3o.</p> <p>Tamb\u00e9m h\u00e1 ferramentas focadas em analisar malwares em execut\u00e1veis, mas elas ser\u00e3o abordados na sess\u00e3o Empacotadores.</p>"},{"location":"malware-analysis/static/simple/exe-anatomy/#pestudio","title":"PEStudio","text":"<p>A ferramenta tem m\u00faltiplas fun\u00e7\u00f5es, mas entre elas, h\u00e1 a visualiza\u00e7\u00e3o dos segmentos de dados do execut\u00e1vel. O programa lhe mostra os dados organizados e tenta apontar anomalias e poss\u00edveis ind\u00edcios de atitudes maliciosos.</p>"},{"location":"malware-analysis/static/simple/identification/","title":"M\u00e9todos de identifica\u00e7\u00e3o de Malware","text":"<p>Identificar o problema \u00e9 normalmente a primeira coisa que fazemos ao come\u00e7armos a formular solu\u00e7\u00f5es. O mesmo funciona para a an\u00e1lise de malware. Ter formas comuns de identificar e classificar malwares \u00e9 essencial para adquirirmos:</p> <ul> <li>Dicas do que prestar aten\u00e7\u00e3o durante a an\u00e1lise.</li> <li>Evid\u00eancias e relatos desse malware internet a fora.</li> <li>Relat\u00f3rios t\u00e9cnicos anteriores sobre a amea\u00e7a.</li> <li>Organizar solu\u00e7\u00f5es de preven\u00e7\u00e3o e defesa.</li> </ul> <p>Portanto, vejamos algumas classifica\u00e7\u00f5es utilizadas nas an\u00e1lises:</p>"},{"location":"malware-analysis/static/simple/identification/#assinatura-digital-por-checksum-hash","title":"Assinatura Digital por CheckSum / Hash","text":"<p>Um checksum, ou soma de verifica\u00e7\u00e3o, \u00e9 uma t\u00e9cnica que associa um identificador a um arquivo ou input. Identificadores s\u00e3o gerados em diferentes momentos e a ideia \u00e9 que ao comparar identificadores de inputs iguais, os identificadores tamb\u00e9m sejam iguais. Enquanto que ao comparar identificadores de inputs diferentes, os identificadores tamb\u00e9m sejam diferentes. Checksum \u00e9 uma t\u00e9cnica muito \u00fatil para garantir a integridade de uma informa\u00e7\u00e3o, mas sua efic\u00e1cia depende completamente da qualidade do algor\u00edtmo usado para a gera\u00e7\u00e3o dos identificadores.</p> <p>Algor\u00edtmos de hash s\u00e3o os mais utilizados para identificar unicamente elementos, inclusive malwares. O identificador hash \u00e9 constru\u00eddo a partir dos bit do arquivo e qualquer m\u00ednimo bit modificado gera um hash completamente diferente que n\u00e3o d\u00e1 dicas sobre a mudan\u00e7a em si. Algor\u00edtmos Hash aceitam inputs de quaisquer tamanhos e retornam sempre outputs de um tamanho fixo. O algor\u00edtmo deles \u00e9 feito para:</p> <ul> <li>n\u00e3o ser matematicamente f\u00e1cil de inverter a fun\u00e7\u00e3o hash e gerar o input a partir desse hash-output; e</li> <li>n\u00e3o ter colis\u00f5es (hashes id\u00eanticos para inputs diferentes) previs\u00edveis em tempo h\u00e1bil de an\u00e1lise ou nem sequer possuir colis\u00f5es em seu escopo de resultados.</li> </ul> <p>Existem v\u00e1rias formas de criar um hash a partir de um malware.</p> <p>Aplicativos focados nessa funcionalidade: - Compute Hash - md5sum, - sha256sum.</p> <p>Aplicativos que identificam o hash, mesmo sem esse ser seu objetivo principal: - Madiant CAPA</p> <p>Mais detalhes de hash em ...</p> <p>Normalmente malware s\u00e3o rotulados por hashes em sites de intelig\u00eancia de malware e portanto, jogando o hash de um malware nesses sites pode lhe retornar informa\u00e7\u00f5es interessantes do arquivo.</p>"},{"location":"malware-analysis/static/simple/identification/#agregadores-online-de-hashes","title":"Agregadores Online de Hashes.","text":"<p>Com a abund\u00e2ncia de hash de malware e a reutiliza\u00e7\u00e3o absurda de malware, surgiram os servi\u00e7os agregadores de hash. Normalmente eles mostram informa\u00e7\u00f5es gerais sobre o malware e enchem o site de \u00cdndices de Comprometimento (IOCs) dos ataques, incluindo os hashes. Pesquisando por um hash nesses sites costuma lhe mostrar as informa\u00e7\u00f5es gerais do malware em quest\u00e3o.</p> <p>Existem muitos sites que fazem esse servi\u00e7o. Entre os mais famosos est\u00e3o:</p> <ol> <li>Virus Total</li> <li>Malware Baazar</li> </ol>"},{"location":"malware-analysis/static/simple/identification/#identificacao-por-antivirus","title":"Identifica\u00e7\u00e3o por Antiv\u00edrus","text":"<p>Antivirus s\u00e3o software de defesa dos dispostivos eletr\u00f4nicos contra malwares. Eles costumam bloquear malwares, identificando-nos atrav\u00e9s de dois m\u00e9todos distintos: - Assinatura de hashing do malware (an\u00e1lise est\u00e1tica). - Comportamento potencialmente malicioso. (an\u00e1lise est\u00e1tica/din\u00e2mica)</p>"},{"location":"malware-analysis/static/simple/identification/#deteccao-estatica-por-antivirus","title":"Detec\u00e7\u00e3o est\u00e1tica por Antiv\u00edrus","text":"<p>N\u00e3o \u00e9 raro que voc\u00ea instale um arquivo pela internet e o antiv\u00edrus imediatamente avise sobre amea\u00e7as. O antivirus faz isso utilizando a assinatura digital do arquivo que voc\u00ea instalou. Ele coleta o hash do arquivo e o compara com uma base de dados pr\u00f3pria cheia de registro de hash de malwares conhecidos. Quando o hash do arquivo \u00e9 identificado como malware, o aviso aparece e normalmente o antivirus tamb\u00e9m o impede de executar o programa. Por esse motivo \u00e9 interessante sempre atualizar o banco de dados do seu antivirus.</p> <p>Perceba como tudo isso foi feito sem o programa sequer ser executado, demonstrando assim a capacidade de an\u00e1lise est\u00e1tica do antiv\u00edrus.</p> <p>Em n\u00edvel de an\u00e1lise de malware, a detec\u00e7\u00e3o est\u00e1tica \u00e9 usada em massa com v\u00e1rios antivirus dispon\u00edveis. \u00c9 comum existirem sites que agilizam essa an\u00e1lise nos principais antivirus do mercado e j\u00e1 te mostram os resultados da an\u00e1lise em segundos. Exemplos de sites assim s\u00e3o: - Virus Total</p> <p>Ver e realizar esse tipo de an\u00e1lise pode ser muito \u00fatil para ter DICAS do real comportamento do malware.</p> <p>CUIDADOS: - Escolha antivirus especializados para realizar a atividade e n\u00e3o tente fazer isso localmente sem um ambiente apropriado. S\u00e3o muitos antiv\u00edrus e malwares, nem sempre h\u00e1 como saber se far\u00e3o testes est\u00e1ticos ou din\u00e2micos no malware em quest\u00e3o. \u00c9 mais seguro e eficiente utilizar os sites mencionado anteriormente. - N\u00e3o confie cegamente em somente um antivirus, veja an\u00e1lises de v\u00e1rios antivirus. - Sempre procure primeiro saber se o malware em quest\u00e3o j\u00e1 existe na base de dados do V\u00edrus Total. - Caso decida postar o sample do malware para an\u00e1lise, tome cuidado para n\u00e3o vazar informa\u00e7\u00f5es confidenciais de sua empresa armazenados no sample. - Os reportes frequentemente s\u00e3o p\u00fablicos, ent\u00e3o em casos de ataque zero-day, ao reportar um ataque, o analista est\u00e1 avisando ao atacante que sua campanha foi descoberta. Normalmente n\u00e3o h\u00e1 problemas nisso, mas \u00e9 interessante ter esse fato em mente. - Caso houver, sempre verifique as datas de reporte nos sites de detec\u00e7\u00e3o est\u00e1tica de antivirus. Reportes muito antigos podem n\u00e3o refletir a situa\u00e7\u00e3o real do malware hoje em dia.</p>"},{"location":"malware-analysis/static/simple/identification/#deteccao-dinamica-por-antivirus-e-sandboxes","title":"Detec\u00e7\u00e3o din\u00e2mica por Antivirus e Sandboxes","text":"<p>Antiv\u00edrus tamb\u00e9m podem analisar o malware enquanto ele est\u00e1 executando. Se o mesmo enviar requisi\u00e7\u00f5es que o antivirus considere maliciosas, o malware pode acabar sendo isolado ou bloqueado do sistema. Como o antiv\u00edrus \u00e9 executado em seu computador, claramente \u00e9 uma an\u00e1lise din\u00e2mica.</p> <p>J\u00e1 o caso das sandboxes \u00e9 um pouco diferente. Sandboxes s\u00e3o sites e servi\u00e7os especializados que aceitam o envio de amostras de malwares para testes dentro de seus ambientes controlados. A an\u00e1lise nem sempre \u00e9 t\u00e3o boa e completa quanto uma manual, mas ajuda bastante na identifica\u00e7\u00e3o e descobrimento de informa\u00e7\u00f5es. E apesar de tamb\u00e9m ser uma an\u00e1lise din\u00e2mica, esse malware n\u00e3o \u00e9 executado pelo analista e o mesmo n\u00e3o tem trabalho algum em preparar o ambiente especializado e controlado para receber os resultados da sandboxes. O resultado vem por puro envio da amostra e an\u00e1lise dos resultados da sandbox, um processo est\u00e1tico olhando somente para o analista. Portanto \u00e9 comum falarmos de sandboxes ao estudarmos an\u00e1lise est\u00e1tica tamb\u00e9m.</p> <p>Alguns servi\u00e7os famosos de sandboxes s\u00e3o:</p> <ol> <li>Hybrid Analysis</li> <li>Any.run</li> <li>Intezer</li> </ol>"},{"location":"malware-analysis/static/simple/import-mapping/","title":"Mapa de Importa\u00e7\u00f5es","text":""},{"location":"malware-analysis/static/simple/import-mapping/#tipos-de-importacoes","title":"Tipos de Importa\u00e7\u00f5es","text":"<p>\u00c9 comum que um programa importe c\u00f3digo de outros programas. Existem 3 formas de importa\u00e7\u00e3o de c\u00f3digo:</p> <ul> <li>Est\u00e1tica: o c\u00f3digo da biblioteca importada \u00e9 copiada e colada no execut\u00e1vel gerado durante a etapa de linking do compilador. Portanto essas importa\u00e7\u00f5es n\u00e3o precisam acessar c\u00f3digo em outro lugar durante a execu\u00e7\u00e3o.</li> <li>Din\u00e2mica: a biblioteca importada tem seu prot\u00f3tipo e os prot\u00f3tipos das suas fun\u00e7\u00f5es inseridos e associados no execut\u00e1vel durante a etapa de linking. Dessa forma, durante a execu\u00e7\u00e3o, o execut\u00e1vel importa o c\u00f3digo da localiza\u00e7\u00e3o.</li> <li>Em tempo de Execu\u00e7\u00e3o: a biblioteca importa durante sua execu\u00e7\u00e3o bibliotecas ou fun\u00e7\u00f5es n\u00e3o mapeadas na etapa de linking. No Windows, \u00e9 poss\u00edvel realizar essas opera\u00e7\u00f5es pelas fun\u00e7\u00f5es nativas LoadLibrary e GetProcAdress.</li> </ul> <p>Como observa\u00e7\u00e3o, o GCC possui 4 etapas para transformar o c\u00f3digo em C no execut\u00e1vel: 1. Pr\u00e9 processamento 2. Compila\u00e7\u00e3o 3. Montagem 4. Linking.</p> <p>As importa\u00e7\u00f5es est\u00e1ticas possuem trechos de c\u00f3digo copiados, ent\u00e3o podem facilmente serem identificados por ferramentas automatizadas. J\u00e1 as importa\u00e7\u00f5es din\u00e2micas t\u00eam suas informa\u00e7\u00f5es salvas nas se\u00e7\u00f5es .rdata ou .idata e portanto s\u00e3o analisadas rapidamente por analistas ou ferramentas automatizadas. Assim ambas as importa\u00e7\u00f5es d\u00e3o aos analistas de malware formas simples de mapear as importa\u00e7\u00f5es do programa.</p> <p>J\u00e1 as importa\u00e7\u00f5es em tempo de execu\u00e7\u00e3o s\u00e3o muito utilizadas por atores maliciosos por dificultarem esse mapeamento. As fun\u00e7\u00f5es que as tornam poss\u00edveis no Windows armazenam os nomes das bibliotecas e fun\u00e7\u00f5es importadas como strings e portanto s\u00e3o vulner\u00e1veis a obfusca\u00e7\u00e3o de string. Muitas delas de fato podem s\u00f3 aparecer em seu formato original durante a execu\u00e7\u00e3o. Nem sempre \u00e9 f\u00e1cil detectar importa\u00e7\u00f5es assim.</p> <p>\u00c9 comum programas usarem sempre as mesmas fun\u00e7\u00f5es e bibliotecas para acessarem os mesmos recursos, portanto fique atento aos seguintes nomes, independente do tipo de importa\u00e7\u00e3o:</p> DLL Descri\u00e7\u00e3o Kernel32.DLL Advapi32.DLL User32.DLL Gdi32.DLL Ntdll.dll Wsock32.DLL e Ws2_32.DLL Wininet.DLL <p>|Fun\u00e7\u00e3o|DLL|Descri\u00e7\u00e3o| |||</p>"},{"location":"malware-analysis/static/simple/import-mapping/#dependency-walker","title":"Dependency Walker","text":"<p>\u00c9 um software que facilita a listagem e an\u00e1lise de depend\u00eancias usadas pelo malware.</p>"},{"location":"malware-analysis/static/simple/magic-bytes/","title":"Assinatura do arquivo por bytes m\u00e1gicos","text":"<p>\u00c9 uma t\u00e9cnica de identifica\u00e7\u00e3o da exten\u00e7\u00e3o de malwares atrav\u00e9s de bytes m\u00e1gicos, ou seja, padr\u00f5es bin\u00e1rios t\u00edpicos daquela extens\u00e3o de arquivo. Normalmente encontram-se no cabe\u00e7alho ou final do arquivo.</p>"},{"location":"malware-analysis/static/simple/magic-bytes/#tecnicas-de-obfuscacao-de-extensao-de-arquivos","title":"T\u00e9cnicas de Obfusca\u00e7\u00e3o de Extens\u00e3o de arquivos","text":"<ul> <li>Mudan\u00e7a de nome.</li> <li>Dupla extens\u00e3o: adicionar mais uma extens\u00e3o no nome do arquivo. Exemplo: <code>foto_com_nome_grande.png.exe</code>.</li> <li>Arquivos de auto extra\u00e7\u00e3o.</li> <li>Empacotadores.</li> </ul>"},{"location":"malware-analysis/static/simple/magic-bytes/#bytes-magicos","title":"Bytes M\u00e1gicos","text":""},{"location":"malware-analysis/static/simple/magic-bytes/#padroes","title":"Padr\u00f5es","text":"<p>Entre as assinaturas, ou padr\u00f5es, mais comuns dos arquivos, est\u00e3o:</p> <ul> <li>Todos os arquivos execut\u00e1veis Windows:<ul> <li>Come\u00e7ar\u00e3o com \"MZ\" nos bytes 0 e 1.</li> <li>Sempre apresentar\u00e3o os bytes em posi\u00e7\u00e3o hexagonal 000e0 e 000e1 como \"P\" e \"E\" (numa representa\u00e7\u00e3o por tabela ASCII).</li> </ul> </li> <li>Todo arquivo PDF ter\u00e1 <code>%PDF-</code> seguido pela vers\u00e3o m\u00ednima do requerida pelo carregador do PDF. Esse trecho pode aparecer em qualquer lugar nos primeiros 1024 bytes.</li> <li>Arquivos de documentos antigos do Office come\u00e7ar\u00e3o com os n\u00fameros hexagonais D0CF11E0.</li> <li>Arquivos comprimidos Zip sempre come\u00e7am com \"PK\" em seus bytes 0 e 1. Atente-se que o formato Zip \u00e9 usado como base a muitos formatos, como:<ul> <li>Android APK.</li> <li>Arquivos .JAR</li> <li>Novo modelo de coumentos do Office.</li> </ul> </li> </ul>"},{"location":"malware-analysis/static/simple/magic-bytes/#ferramentas-de-identificacao-por-bytes-magicos","title":"Ferramentas de identifica\u00e7\u00e3o por bytes m\u00e1gicos","text":"<p>Ferramentas automatizadas podem fazer esse trabalho de identificar os tipos de arquivos por bytes m\u00e1gicos. Entre eles, est\u00e3o:</p>"},{"location":"malware-analysis/static/simple/magic-bytes/#file","title":"File","text":"<p>\u00c9 uma ferramenta padr\u00e3o da maioria dos sistemas UNIX. Ela analisa o cabe\u00e7alho do arquivo alvo e o compara como uma s\u00e9rie de padr\u00f5es de bytes m\u00e1gicos. Se algum padr\u00e3o bater, a ferramenta retorna o tipo de arquivo que voc\u00ea est\u00e1 lidando.</p> <p>Utilizamos File da seguinte forma, mesmo com extens\u00f5es duplas:</p> <pre><code>file arquvivo.extensao\n</code></pre> <p>Infelizmente a ferramenta n\u00e3o gera mais informa\u00e7\u00e3o al\u00e9m disso.</p>"},{"location":"malware-analysis/static/simple/magic-bytes/#exeinfo-pe","title":"Exeinfo PE","text":"<p>Ferramenta GUI ou CLI que analisa e procura por cabe\u00e7alhos de execut\u00e1veis do Windows. A ferramenta pode dizer quais compiladores foram usados para construir a aplica\u00e7\u00e3o, assim como identificar execut\u00e1veis criados por empacotadores e dizer qual que foi usado. Por fim, a ferramenta ainda lhe d\u00e1 dicas de como desempacotar o execut\u00e1vel.</p>"},{"location":"malware-analysis/static/simple/magic-bytes/#detect-it-easy","title":"Detect it Easy","text":"<p>Identifica propriedades e caracter\u00edsticas do bin\u00e1rio, al\u00e9m de detectar poss\u00edveis packers embutidos.</p>"},{"location":"malware-analysis/static/simple/magic-bytes/#trid","title":"TrID","text":"<p>Em uma abordagem um pouco diferente do t\u00f3pico, o TrID n\u00e3o busca exatamente por assinaturas de bytes m\u00e1gicos. Ao inv\u00e9s disso, o TrID usa identifica\u00e7\u00e3o baseada em padr\u00f5es t\u00edpicos em arquivos, o que tamb\u00e9m pode ser considerado um tipo de determinar uma assinatura. O TrID \u00e9 CLI e possui uma base de dados regularmente atualizada com os padr\u00f5es e os consulta quando precisa analisar um arquivo. Dessa forma, ele \u00e9 \u00fatil quando os atacantes tentam remover ou esconder os bytes m\u00e1gicos.</p> <p>O TrID mostra as chances do arquivo ser de determinados tipos e acaba gerando mais informa\u00e7\u00e3o do que o cl\u00e1ssico file.</p>"},{"location":"malware-analysis/static/simple/magic-bytes/#pestudio","title":"PEStudio","text":"<p>Entre suas v\u00e1rias fun\u00e7\u00f5es, tamb\u00e9m mostra o tipo do arquivo.</p>"},{"location":"malware-analysis/static/simple/packers/","title":"Empacotadores / Packers","text":"<p>Os Packers, ou Empacotadores, s\u00e3o uma estrat\u00e9gia antiga de compartilhamento de malwares que usa a estrat\u00e9gia de comprimir seu conte\u00fado o m\u00e1ximo poss\u00edvel.</p> <p>Isso acontece porque antigamente n\u00e3o se tinha muita prote\u00e7\u00e3o contra malwares, ent\u00e3o os criadores de malware se preocupavam bem mais com a velocidade de infec\u00e7\u00e3o a atua\u00e7\u00e3o dos malware do que de fato se eram ou n\u00e3o detectados e barrados pelos sistemas-alvo. Quanto menor o payload do malware, mais r\u00e1pido ele era transferido.</p> <p>Seu funcionamento se baseia em: - Comprimir o malware execut\u00e1vel. - Ao ser executado, o malware \u00e9 descomprimido na mem\u00f3ria, sem conhecimento do usu\u00e1rio. - Pouca perda de desempenho na descompress\u00e3o.</p> <p>Empacotadores Modernos j\u00e1 usam a compress\u00e3o como subt\u00e9cnica de obfusca\u00e7\u00e3o, escondendo o c\u00f3digo do malware no empacotador. O empacotador moderno pode n\u00e3o s\u00f3 compactar o malware, como tamb\u00e9m embaralhar o c\u00f3digo do malware, encriptar as strings e at\u00e9 mesmo adquirir parte do c\u00f3digo online. Assim, o malware de fato s\u00f3 \u00e9 constru\u00eddo na forma como ser\u00e1 executado durante o tempo de execu\u00e7\u00e3o. Os empacotadores modernos dificultam a an\u00e1lise est\u00e1tica e podem at\u00e9 mesmo impedir a an\u00e1lise din\u00e2mica com pr\u00e9 an\u00e1lises antes de montar o malware.</p> <p>Empacotadores n\u00e3o s\u00f3 dificultam a an\u00e1lise do c\u00f3digo de fato, como tamb\u00e9m da estrutura e metadados dispon\u00edveis nos cabe\u00e7alhos do programa. Empacotadores podem ser vistos em uma an\u00e1lise bin\u00e1ria como um verdeiro encapsulamento. O cabe\u00e7alho e meta informa\u00e7\u00f5es que aparecem no programa s\u00e3o os do pr\u00f3prio empacotador e as informa\u00e7\u00f5es e metadados do malware de fato est\u00e3o escondidos nas outras se\u00e7\u00f5es bin\u00e1rias do malware.</p>"},{"location":"malware-analysis/static/simple/packers/#identificadores-de-empacotadores","title":"Identificadores de Empacotadores","text":"<p>Os empacotadores s\u00e3o um dos recursos que os atacantes podem usar para dificultar todas as etapas de an\u00e1lise do malware. Por esse motivo \u00e9 comum utilizarmos primeiro ferramentas que identifiquem se h\u00e1 um empacotador ou embutido no malware. Mesmo sabendo que o h\u00e1 um empacotador e qual o empacotador, pode continuar sendo dif\u00edcil analiar o malware em quest\u00e3o de estrutura e bytes m\u00e1gicos. Por isso muitas ferramentas que detectam empacotadores j\u00e1 fazem o trabalho de identificar qual a extens\u00e3o real do malware, sua estrutura e algumas propriedades.</p> <p>Entre as principais ferramentas, est\u00e3o:</p>"},{"location":"malware-analysis/static/simple/packers/#exeinfo-pe","title":"Exeinfo PE","text":"<p>Ferramenta GUI ou CLI que analisa e procura por cabe\u00e7alhos de execut\u00e1veis do Windows. A ferramenta pode dizer quais compiladores foram usados para construir a aplica\u00e7\u00e3o, assim como identificar execut\u00e1veis criados por empacotadores e dizer qual que foi usado. Por fim, a ferramenta ainda lhe d\u00e1 dicas de como desempacotar o execut\u00e1vel.</p>"},{"location":"malware-analysis/static/simple/packers/#detect-it-easy","title":"Detect it Easy","text":"<p>Identifica propriedades e caracter\u00edsticas do bin\u00e1rio, al\u00e9m de detectar poss\u00edveis packers embutidos.</p>"},{"location":"malware-analysis/static/simple/string-embedded/","title":"Textos Embutidos em Malwares","text":"<p>Analisando o bin\u00e1rio de um arquivo, \u00e9 poss\u00edvel extrair as strings utilizadas internamnete. V\u00e1rias strings podem aparecer em malwares, como: - caminhos de importa\u00e7\u00e3o e exporta\u00e7\u00e3o - URLs e IPs. - Entidades envolvidas e alvos. - Etc.</p> <p>\u00c9 sem d\u00favida uma das t\u00e9cnicas mais simples de an\u00e1lise de malware e por isso, muitas produtores de malware tentam ofuscar as strings com criptografia e codifica\u00e7\u00e3o. Alguns at\u00e9 colocam strings com informa\u00e7\u00f5es falsas! Ent\u00e3o tome cuidado com strings, usa-as somente como pistas.</p> <p>Aqui veremos estrat\u00e9gias de atacantes e defensores em rela\u00e7\u00e3o a strings escondidas.</p>"},{"location":"malware-analysis/static/simple/string-embedded/#o-que-procurar-em-analises-manuais-de-strings","title":"O que procurar em an\u00e1lises manuais de strings","text":"<ul> <li>Qualquer informa\u00e7\u00e3o relevante, mesmo que cortada, separada ou com algum caractere extra.</li> <li>Endere\u00e7os de servi\u00e7os muito comuns, como URL do google, podem significar que o Malware tenta se conectar ao site para testar se n\u00e3o est\u00e1 em uma sandbox.</li> <li>Nomes ou refer\u00eancias a aplicativos e softwares utilizados por an\u00e1lise de malware ou redes pode significar que o Malware tem capacidade de anti-an\u00e1lise.</li> <li>Aplica\u00e7\u00f5es, arquivos, diret\u00f3rios, bibliotecas, etc. Podem ser alvos ou dar dicas das TTPs do malware.<ul> <li>\u00c9 comum achar textos de bilbiotecas utilizadas, ent\u00e3o tome cuidado com falsos positivos.</li> </ul> </li> <li>Sempre procure por sinais de codifica\u00e7\u00f5es e qual base foi usada.<ul> <li>A base64 costuma ter <code>ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890+/</code> como string em alguma parte do c\u00f3digo.</li> </ul> </li> </ul>"},{"location":"malware-analysis/static/simple/string-embedded/#escondendo-strings","title":"Escondendo strings","text":""},{"location":"malware-analysis/static/simple/string-embedded/#formas-comuns-e-conhecidas","title":"Formas comuns e conhecidas","text":"<ul> <li>Separando as strings para depois juntar. Isso pode:<ul> <li>Dificultar a leitura quando h\u00e1 an\u00e1lise simples de strings.</li> <li>Diminuir o tamanho das strings analisadas.</li> </ul> </li> <li>Codifica\u00e7\u00e3o e encripta\u00e7\u00e3o de strings. Isso pode:<ul> <li>Dificultar a leitura quando h\u00e1 an\u00e1lise simples de strings.</li> </ul> </li> </ul>"},{"location":"malware-analysis/static/simple/string-embedded/#ferramentas-de-extracao-e-analise-de-strings","title":"Ferramentas de Extra\u00e7\u00e3o e An\u00e1lise de Strings","text":""},{"location":"malware-analysis/static/simple/string-embedded/#cuidados-ferramentas-de-extracao-de-strings","title":"Cuidados ferramentas de extra\u00e7\u00e3o de Strings","text":"<ul> <li>Falsos positivos: muitas ferramentaas de strings interpretam bytes de dados como bytes de strings, gerando strings sem sentido.</li> <li>Tamanho m\u00ednimo de strings: muitas ferramentas ignoram strings de menor tamanho. Informa\u00e7\u00f5es importantes podem ter tamanho pequeno tamb\u00e9m, ent\u00e3o sempre conhe\u00e7a o tamanho m\u00ednimo da sua ferramenta.</li> <li>Ferramentas exclusivas para ASCII: muitas ferramentas procuram somente strings ASCII (1 byte). Textos em outros padr\u00f5es, como UTF16 (Unicode de 2 bytes ou 16 bits) podem mostrar strings leg\u00edtmas em formatos estranhos.</li> </ul>"},{"location":"malware-analysis/static/simple/string-embedded/#ferramentas-somente-de-extracao","title":"Ferramentas Somente de Extra\u00e7\u00e3o","text":"<ul> <li>Microsoft Strings (strings.exe)<ul> <li>Extrai ASCII e Unicode simultaneamente.</li> <li>M\u00ednimo de 3 caracteres em strings por padr\u00e3o. Permite mudan\u00e7a de valor.</li> <li>Mostra a localiza\u00e7\u00e3o das strings com a op\u00e7\u00e3o -o ou --offset.</li> </ul> </li> <li>Bintext<ul> <li>Extrai ASCII e Unicode simultaneamente.</li> <li>M\u00ednimo de 5 caracteres por padr\u00e3o.</li> <li>Mostra a localiza\u00e7\u00e3o das strings por padr\u00e3o.</li> </ul> </li> </ul>"},{"location":"malware-analysis/static/simple/string-embedded/#ferramentas-de-extracao-e-analise","title":"Ferramentas de Extra\u00e7\u00e3o e An\u00e1lise","text":"<ul> <li>Virus Total YARA</li> <li>FLOSS</li> </ul>"},{"location":"risk_management/","title":"Fundamentos de Gest\u00e3o de Risco em Cyberseguran\u00e7a","text":"<p>Risco \u00e9 a chance de um evento gerar um resultado n\u00e3o desejado. Compreender e gerenciar o risco associado a um evento \u00e9 essencial para cyberseguran\u00e7a, em que toda a\u00e7\u00e3o ou omiss\u00e3o possui riscos associados e v\u00e1rias vezes nossas empresas decidem tomar esses riscos.</p> <p>O objetivo \u00e9 sempre melhorar a compreens\u00e3o e gerenciamento do risco a partir de diversas a\u00e7\u00f5es.</p> <p>H\u00e1 alguns frameworks famosos para gest\u00e3o de riscos em cyberseguran\u00e7a, sendo eles: - GRC - CSF</p>"},{"location":"risk_management/GRC/","title":"Framework Governan\u00e7a, Risco e Compliance (GRC)","text":""},{"location":"risk_management/GRC/#governanca","title":"Governan\u00e7a","text":"<p>Criar pol\u00edticas, guias, conformidade, etc. Exemplos:</p> <ul> <li>Pol\u00edticas e padr\u00f5es como NIST CSF e ISOs.</li> <li>Regulamentos Internos</li> <li>Pol\u00edticas de Seguran\u00e7a de informa\u00e7\u00e3o</li> </ul>"},{"location":"risk_management/GRC/#risco","title":"Risco","text":""},{"location":"risk_management/GRC/#compliance","title":"Compliance","text":"<p>Avaliar se a governan\u00e7a de uma organiza\u00e7\u00e3o e o gerenciamento de riscos feito por ela \u00e9 decente e se est\u00e1 de acordo com as leis do pa\u00eds/conglomerado/grupo. Normalmente avalia\u00e7\u00f5es de compliance s\u00e3o peri\u00f3dicas. Exemplos s\u00e3o: - Audi\u00e7\u00f5es externas regulat\u00f3rias, padr\u00f5es e contratuais. - Auto Avalia\u00e7\u00e3o interna de sistemas e processos. - Reportes. - Monitora\u00e7\u00e3o dos:     - Cen\u00e1rios de amea\u00e7as     - Controles implementados     - Suspeitas de insiders</p>"},{"location":"risk_management/nist_csf/","title":"NIST Cybersecurity Framework","text":"<p>NIST CSF \u00e9 um framework que auxilia empresas a adotar vis\u00f5es e medidas que incentivem a ciberseguran\u00e7a e o gerenciamento de riscos em toda a empresa.</p> <p>O NIST CSF \u00e9 divido em cinco fun\u00e7\u00f5es. As fun\u00e7\u00f5es descrevem a\u00e7\u00f5es fundamentais que a ciberseguran\u00e7a de uma empresa deve realizar constantemente. Cada fun\u00e7\u00e3o possui uma s\u00e9rie de resultados que a ciberseguran\u00e7a e empresa como um todo devem perseguir. Esses resultados s\u00e3o chamados de categorias. Cada categoria pode ter uma subcategoria pr\u00f3pria, ou seja, resultados esperados que auxiliam na realiza\u00e7\u00e3o da categoria.</p>"},{"location":"risk_management/nist_csf/#funcoes","title":"Fun\u00e7\u00f5es","text":"<p>As cinco fun\u00e7\u00f5es do CSF s\u00e3o:</p> <ul> <li>IDENTIFICAR os ativos e processos da empresa para identificar os riscos envolvidos.</li> <li>PROTEGER a empresa contra incidentes de ciberseguran\u00e7a e ter mais controle sobre os riscos envolvidos.</li> <li>DETECTAR vulnerabilidades e incidentes de seguran\u00e7a.</li> <li>RESPONDER a incidentes de seguran\u00e7a em tempo h\u00e1bil.</li> <li>RECUPERAR recursos, opera\u00e7\u00f5es e sistemas afetados por ataques contra a seguran\u00e7a cibern\u00e9tica.</li> <li>GOVERNAR a empresa. A fun\u00e7\u00e3o em si mais especificamente refere-se as medidas, cultura, estrat\u00e9gias e pol\u00edticas tomadas pela governan\u00e7a da empresa para estabelecer, atualizar e priorizar o gerenciamento de riscos e ciberseguran\u00e7a. Essa fun\u00e7\u00e3o em espec\u00edfico afeta todas as outras.</li> </ul> <p></p>"},{"location":"risk_management/nist_csf/#referencias-e-material-de-estudo","title":"Refer\u00eancias e material de estudo","text":"<ul> <li>Para mais detalhes do framework</li> <li>Framework CSF 2.0</li> <li>Tradu\u00e7\u00f5es do Framework</li> </ul>"},{"location":"threat_intel/IOC_IOA/","title":"Indice of Compromise and Attack","text":""},{"location":"threat_intel/IOC_IOA/#indice-of-compromise-ioc","title":"Indice of Compromise (IoC)","text":"<p>Os indicadores de comprometimento s\u00e3o trechos de informa\u00e7\u00e3o que se encontrados relacionados a um sistema, podem indicar o seu comprometimento. Exemplos seriam endere\u00e7os URL maliciosos aos quais um malware se conecta.</p> <p>Atuais problemas com indicadores de comprometimento s\u00e3o: - Grandes volumes de IoCs todo dia. - IoCs podem ser extremamente din\u00e2micos e flutuantes.</p>"},{"location":"threat_intel/IOC_IOA/#caracteristicas-de-iocs-conhecidos","title":"Caracter\u00edsticas de IoCs conhecidos:","text":"<p>Os tipos de IoCs recebidos s\u00e3o v\u00e1rios e normalmente classificamos eles de aordo com o qu\u00e3o confi\u00e1veis s\u00e3o para um time de defesa utilizar em bloqueios de ataques.</p> <p></p>"},{"location":"threat_intel/IOC_IOA/#hashes-de-artefatos","title":"Hashes de artefatos","text":"<p>Artefatos s\u00e3o os produtos de software utilizados. Um hash identifica unicamente um artefato e portanto, no caso de um artefato malicioso, sempre ir\u00e1 impedir esse mesmo arquivo de penetrar. Logo ter como IoCs hashes de artefatos gera:</p> <ul> <li>Muita confian\u00e7a, j\u00e1 que um hash identifica um malware num sistema sem erro, h\u00e1 n\u00e3o ser que o c\u00f3digo do malware seja mudado.<ul> <li>Empacotadores podem mudar o hash de um arquivo e eles s\u00e3o bem comuns.</li> </ul> </li> </ul>"},{"location":"threat_intel/IOC_IOA/#url","title":"URL","text":"<p>Apesar de ser simples para ataques mais sofisticados mudarem sua URL, elas normalmente identificam uma URL pela</p>"},{"location":"threat_intel/IOC_IOA/#dominio","title":"Dom\u00ednio","text":"<ul> <li>Confi\u00e1vel</li> </ul>"},{"location":"threat_intel/IOC_IOA/#ip-porta","title":"IP + Porta","text":"<ul> <li>Baixa confian\u00e7a</li> </ul>"},{"location":"threat_intel/IOC_IOA/#somente-ip","title":"Somente IP","text":"<ul> <li>Pouco confi\u00e1vel, dificilmente identifica um ataque por si s\u00f3.</li> <li>Se um atacante trocar sua placa de rede, ele realiza o mesmo ataque num IP diferente. O mesmo funciona ao usar a rede Tor.</li> </ul>"},{"location":"threat_intel/IOC_IOA/#cidr","title":"CIDR","text":"<ul> <li>Pouco confi\u00e1vel, dificilmente um CIDR identifica ou representa um ataque.</li> </ul>"},{"location":"threat_intel/IOC_IOA/#indice-of-attack-ioa","title":"Indice of Attack (IoA)","text":"<p>Refere-se aos comportamentos que o ataque demonstrou durante sua cadeia. \u00c9 normalmente representado atrav\u00e9s de frameworks como Cyber Kill Chain e Mitre ATT&amp;CK.</p> <p>Comparado aos IoCs, IoAs s\u00e3o mais dif\u00edceis de um atacante mudar. Mais especificamente, um atacante muitas vezes precisa reformular toda a sua estrat\u00e9gia e ferramenta de ataque para gerar uma mudan\u00e7a em seu IoA. Toda essa discuss\u00e3o pode ser vista na Pir\u00e2mide da Dor, criada por David Blanco.</p> <p></p> <p>A pir\u00e2mide da dor mapea o que \u00e9 f\u00e1cil e dif\u00edcil do atacante mudar comparado com a sua quantidade encontrada por times de Threat Intel. Mudar o hash que ele usa ou o seu endere\u00e7o de IP \u00e9 f\u00e1cil, mas mudar seus comportamentos come\u00e7a a ser mais dif\u00edcil. Da mesma forma, achamos grande volume de hashes e IPs diferente em ataques, mas o comportamento t\u00edpico do ataque tende a ser bem est\u00e1vel.</p> <p>O topo da pir\u00e2mide se refere aos IoAs, ou TTPs:</p> <ul> <li>T\u00e1ticas: os grandes objetivos por tr\u00e1s de cada sequ\u00eancia de ataquies.</li> <li>T\u00e9cnicas: um detahamento de como as t\u00e1ticas foram atingidas. A estrat\u00e9gia por tr\u00e1s da t\u00e1tica.</li> <li>Procedimentos: detalhamento t\u00e9cnico para realizar a t\u00e9cnica e atingir o objetivo.</li> </ul>"},{"location":"threat_intel/killchain/","title":"Cyber Kill Chain","text":""},{"location":"threat_intel/killchain/#etapas","title":"Etapas","text":"<ol> <li>Reconhecimento</li> <li>3. 4. 5. 6.</li> </ol>"},{"location":"threat_intel/mitre_att%26ck/","title":"MITRE ATT&amp;CK","text":""},{"location":"threat_intel/mitre_att%26ck/#o-que-e-o-attck","title":"O que \u00e9 o ATT&amp;CK?","text":"<p>\u00c9 um framework com v\u00e1rias recursos para entender o comportamento dos adversi\u00e1rios e defender-se deles. Entre eles, est\u00e3o: - Base de dados/enciclop\u00e9dia de ataques reais. - Disseca\u00e7\u00e3o dos principais ataques e t\u00e9cnicas de cyberseguran\u00e7a. - Mapeamento de ataques segundo a Matriz ATT&amp;CK.</p>"},{"location":"threat_intel/mitre_att%26ck/#piramide-da-dor-por-david-bianco","title":"Pir\u00e2mide da Dor (por David Bianco)","text":"<p>Em rela\u00e7\u00e3o ao comportamento do atacante, a pir\u00e2mide da dor mapea o que \u00e9 f\u00e1cil e dif\u00edcil do atacante mudar. Mudar o hash que ele usa ou o seu endere\u00e7o de IP \u00e9 f\u00e1cil, mas mudar de ferramentas e artefatos da rede come\u00e7a a ser mais dif\u00edcil. Atacantes especializados s\u00e3o humanos iguais a n\u00f3s, eles v\u00e3o ter mais pregui\u00e7a e dificuldade em realizar tarefas dif\u00edceis e demoradas.</p> <p>\u00c9 a partir desse princ\u00edpio que o ATT&amp;CK foi criado. O framework lida com as TTPs, ou Tatics, Techniques and Procedures (TTPs) os elementos mais dif\u00edceis de serem mudados por um atacante.</p> <p></p>"},{"location":"threat_intel/mitre_att%26ck/#estrutura-da-matriz-attck","title":"Estrutura da Matriz ATT&amp;CK","text":"<ul> <li>T\u00e1ticas: os grandes objetivos por tr\u00e1s de cada sequ\u00eancia de ataquies. Representada na matriz pelos t\u00edtulos das colunas.</li> <li>T\u00e9cnicas: um detahamento de como as t\u00e1ticas foram atingidas. A estrat\u00e9gia por tr\u00e1s da t\u00e1tica. Representado pelas c\u00e9lulas da matriz.</li> <li>Procedimentos: detalhamento t\u00e9cnico para realizar a t\u00e9cnica e atingir o objetivo. Ao clicar em uma c\u00e9lula da matriz, ou seja, em uma t\u00e9cnica, vemos uma s\u00e9rie de procedimentos poss\u00edveis para realiz\u00e1-la.</li> </ul> <p>Cada um elemento em cada um desses tr\u00eas n\u00edveis possui uma p\u00e1gina web pr\u00f3pria na enciclop\u00e9dia do ATT&amp;CK, com descri\u00e7\u00f5es, grupos que aplciaram, exemplos reais, data sources (\u00e1reas importantes para melhorar a fim de identificar o esses ataques), TTPs relacionadas, detec\u00e7\u00e3o, mitiga\u00e7\u00e3o e refer\u00eancias.</p>"},{"location":"threat_intel/mitre_att%26ck/#casos-de-uso","title":"Casos de Uso","text":"<ul> <li>Detec\u00e7\u00e3o de amea\u00e7as.</li> <li>Linguagem comum entre profissionais de Cyberseguran\u00e7a e consumidores dessa informa\u00e7\u00e3o. A maior parte dos relat\u00f3rios de ataques de cyberseguran\u00e7a utilizam termos espec\u00edficos do MITRE ATT&amp;CK.</li> <li>Simula\u00e7\u00e3o de ataques.</li> <li>Mapeamento de ataques do Red Team. A maior parte dos relat\u00f3rios de ataque de cyberseguran\u00e7a mapeiam os ataques analisados via MITRE ATT&amp;CK. </li> </ul>"},{"location":"threat_intel/mitre_att%26ck/#como-mapear-um-ataque-para-o-attck","title":"Como mapear um ataque para o ATT&amp;CK?","text":"<ol> <li>Entender o ATT&amp;CK</li> <li>Identificar o comportamento do atacante.</li> <li>Pesquisar sobre esse padr\u00e3o de comportamento.</li> <li>Traduzir o comportamento para uma t\u00e1tica do ATT&amp;CK.</li> <li>Entender quais t\u00e9cnicas se aplicam ao comportamento analisado.</li> <li>Comparar os seus resultados com os de outros analistas.</li> </ol>"},{"location":"threat_intel/mitre_att%26ck/#reference","title":"Reference","text":""},{"location":"threat_intel/mitre_att%26ck/#-using-mitre-attck-for-cyber-threat-intelligence-training-by-katie-nickels-and-adam-pennington","title":"- Using MITRE ATT&amp;CK for Cyber Threat Intelligence Training BY Katie Nickels and Adam Pennington.","text":""},{"location":"threat_intel/mitre_att%26ck/#reconhecimento-ta0043","title":"Reconhecimento (TA0043)","text":"<p>Mais sobre essa t\u00e1tica</p> <p>Essa t\u00e1tica consiste na coleta de informa\u00e7\u00f5es por parte do atacante que o auxiliem em sua ofensiva. Pode incluir desde informa\u00e7\u00f5es do sistema em si at\u00e9 informa\u00e7\u00f5es pessoais das v\u00edtimas.</p> <p>Atacantes v\u00e3o buscar informa\u00e7\u00f5es sobre: - Suas informa\u00e7\u00f5es pessoais e privadas. - Seu local de trabalho / estudo / atua\u00e7\u00e3o. - Sua rede. - Seus dispositivos. - Sua atividade e presen\u00e7a online.</p> <p>Atrav\u00e9s das seguintes fontes de informa\u00e7\u00e3o: - Fontes abertas - Fontes fechadas</p>"},{"location":"threat_intel/mitre_att%26ck/#informacoes-uteis-a-procurar","title":"Informa\u00e7\u00f5es \u00dateis a Procurar","text":"<ul> <li> <p>Coletar Informa\u00e7\u00f5es Pessoais da V\u00edtima (T1589)</p> <ul> <li>Endere\u00e7os de Email (T1589.002).</li> <li>Credenciais (T1589.001), como senhas, tokens, etc.</li> <li>Nomes, CPFs, RGs.</li> <li>Moradia.</li> <li>Fam\u00edlia.</li> </ul> </li> <li> <p>Coletar Informa\u00e7\u00f5es sobre a Empresa em que a V\u00edtima trabalha ()</p> <ul> <li>Contexto Empresarial.</li> <li>Locais f\u00edsicos das filiais/uniadades.</li> <li>Funion\u00e1rios e Cargos.</li> <li>Hor\u00e1rios e turnos de trabalho.</li> </ul> </li> <li> <p>Coletar Informa\u00e7\u00e3o da Rede da V\u00edtima ()</p> <ul> <li>Propriedades de Dom\u00ednios da V\u00edtima (T1590.001) podem revelar dados b\u00e1sicos do dom\u00ednio, dados administrativos, contatos, endere\u00e7o comercial, nomes de servidores, etc.</li> <li>Domain Name Server, ou DNS (T1590.002) podem revelar dados b\u00e1sicos do DNS, tecnologia do DNS, nome de servidores registrados, servidores de email e outros hosts.</li> <li>Depend\u00eancias confi\u00e1veis (T1590.003) do servi\u00e7o da v\u00edtima podem revelar parceiros empresariais e servi\u00e7os de terceiros em que a v\u00edtima confia, assim como seus respectivos dom\u00ednios/IPs.</li> <li>A topologia da rede (T1590.004) da v\u00edtima, ou seja, a infraestrutura da rede, condi\u00e7\u00f5es do ambiente e detalhes dos dispositivos utilizados. Numa rede minimamente protegida, a topologia de dispositivos de defesa da rede (T1590.006) pode ser mapeada.</li> <li>Endere\u00e7os de IP (T1590.005) ou blocos / sequ\u00eancias deles. Sequ\u00eancias de IPs podem revelar dados como prov\u00e1vel localiza\u00e7\u00e3o, tamanho da organiza\u00e7\u00e3o, provedor de internet e CDN.</li> </ul> </li> <li> <p>Coletar informa\u00e7\u00f5es do Host (dispositivo conectado a rede):</p> <ul> <li>Hardware (T1592.001 e T1592.004), como tipos e vers\u00f5es de componentes, componentes vulner\u00e1veis e componentes de seguran\u00e7a.</li> <li>Software (T1592.002 e T1592.004), como tipos e vers\u00f5es de software, bibliotecas, sistema operacional, software vulner\u00e1vies e software de seguran\u00e7a.</li> <li>Firmware (T1592.003 e T1592.004), como tipo e vers\u00e3o, configura\u00e7\u00e3o, prop\u00f3sito, vulnerabilidades e n\u00edvel de seguran\u00e7a.</li> </ul> </li> </ul>"},{"location":"threat_intel/mitre_att%26ck/#meios-de-obtencao-de-dados-em-fontes-abertas","title":"Meios de Obten\u00e7\u00e3o de Dados em Fontes Abertas","text":"<ul> <li>M\u00eddias Sociais (T1593.001)</li> <li>Motores de Busca (T1593.002)</li> <li>Reposit\u00f3rios de C\u00f3digo (T1593.003)<ul> <li>Github</li> <li>Gitlab</li> <li>Bitbucket</li> <li>SourceForge</li> </ul> </li> <li>Websites da v\u00edtima (T1594)</li> <li>Implementa\u00e7\u00f5es do Protocolo WHOIS (T1596.002). Exemplos:<ul> <li>Whois.net</li> <li>Registro BR</li> <li>WHOIS da Hostinger</li> </ul> </li> <li>Certificados Digitais (T1596.003)<ul> <li>SSL Checker</li> </ul> </li> <li>Procura por atividades p\u00fablicas de Domain Name System (DNS)(T1596.001), assim como poss\u00edveis vulnerabilidades. Registros de DNS podem revelar nomes de servidores de uma empresa.<ul> <li>DNS Dumpster</li> <li>CIRCL Pasive DNS</li> </ul> </li> <li>Dados e vulnerabilidades do servi\u00e7o que \u00e9 host do seu site, ou seja, do seu Content Delivery Network (CDN) (T1596.004).</li> <li>Escaneamentos Ativo e N\u00e3o Ativo (T1595 e T1596.005).<ul> <li>Escaneamento de IP (T1595.001).<ul> <li>Ping e Traceroute</li> <li>Shodan</li> <li>NMAP</li> </ul> </li> <li>Escaneamento por Vulnerabilidades (T1595.002).</li> <li>Escaneamento de infraestrutura por listas de palavras (T1595.003).<ul> <li>GoBuster</li> <li>DirBuster</li> <li>Dirb</li> <li>s3recon</li> <li>GCPBucketBrute</li> </ul> </li> </ul> </li> <li>Outros websites com informa\u00e7\u00f5es da v\u00edtima.</li> </ul>"},{"location":"threat_intel/mitre_att%26ck/#meios-de-obtencao-de-dados-em-fontes-fechadas","title":"Meios de Obten\u00e7\u00e3o de Dados em Fontes Fechadas","text":"<ul> <li>Phishing (T1598) por informa\u00e7\u00e3o. O pedido de informa\u00e7\u00e3o em si pode vir atrav\u00e9s de:<ul> <li>Links (T1598.002)</li> <li>Anexos (T1598.003)</li> <li>Ferramentas de Terceiros, como m\u00eddias sociais e servi\u00e7os de email (T1598.001).</li> <li>Imita\u00e7\u00e3o por voz s\u00edncrona ou ass\u00edncrona (T1598.004).</li> <li>Imita\u00e7\u00e3o por v\u00eddeo s\u00edncrono ou ass\u00edncrono.</li> </ul> </li> <li>Bases de dados fechadas com informa\u00e7\u00f5es t\u00e9cnicas relacionadas a v\u00edtima.<ul> <li>Sites de vazamento na internet ou darkweb.</li> </ul> </li> <li>Venda de dados (legais e ilegais)</li> <li>Feeds de Intelig\u00eancia (gratuitos e pagos)<ul> <li>FBI Infraguard</li> <li>Abuse</li> <li>Cisco Talos Intelligence</li> <li>Google Safe Browsing</li> <li>Spamhaus Project</li> </ul> </li> </ul>"},{"location":"threat_intel/mitre_att%26ck/#movimentacao-lateral-ta0008","title":"Movimenta\u00e7\u00e3o Lateral (TA0008)","text":"<p>Mais sobre essa t\u00e1tica</p> <p>Essa t\u00e1tica traduz as t\u00e9cnicas de atacantes para se mover atrav\u00e9s no seu ambiente. Ou seja, \u00e9 como o atacante, ap\u00f3s conseguir acesso ao sistmea, tenta conseguir acesso a outras contas e dispotivos na rede/ diret\u00f3rio ativo/ sistema.</p>"},{"location":"threat_intel/mitre_att%26ck/#internal-spearphishing","title":"Internal Spearphishing","text":"<p>Ao roubar um endpoint do sistema, o atacante abusa da boa reputa\u00e7\u00e3o que a conta roubada tem com outras contas do sistema para realizar ataques de phishing direcionados. Em ataques de phishing, o atacante persuade um usu\u00e1rio leg\u00edtimo a realizar alguma a\u00e7\u00e3o n\u00e3o segura. A descri\u00e7\u00e3o refere-se a t\u00e9cnica Internal Spearphishing (T1534).</p> <p>Associa\u00e7\u00f5es: - Pode vir junto a t\u00e9cnica de Personifica\u00e7\u00e3o</p> <p>Exemplos de procedimentos para realizar um Internal Phishing: - um atacante atrav\u00e9s de um email comprometido da empresa envia um arquivo anexado malicioso para um funcion\u00e1rio da empresa. - um atacante atrav\u00e9s de um email comprometido da empresa envia um link malicioso para um funcion\u00e1rio da empresa. - Arquivos falsos se fingindo de leg\u00edtimos em pastas compartilhadas.</p> <p>Previnir esse tipo de ataque \u00e9 dif\u00edcil. Ademais, sempre \u00e9 importante concientizar usu\u00e1rios de sistemas obre phishing.</p> <p>Detectar esse ataque pode ser feito a partir de: - An\u00e1lise de conte\u00fado de mensagens na rede/sistema em busca de links e anexos suspeitos. Seja por an\u00e1lise de rede ou por an\u00e1lise de logs. - An\u00e1lise do fluxo de rede para detectar spam interno, muitas vezes caracter\u00edstico de Internal Spearphishing.</p>"},{"location":"threat_intel/mitre_att%26ck/#servicos-remotos","title":"Servi\u00e7os Remotos","text":"<p>Servi\u00e7os Remotos s\u00e3o bastante usados em empresas, principalmente quando se fala em datacenters. Servi\u00e7os remotos s\u00e3o um dos potes de ouro da movimenta\u00e7\u00e3o lateral e podem ser utilizados de diversas formas pelos atacantes para movimenta\u00e7\u00e3o lateral.</p> <p>Para come\u00e7ar, um atacante pode conseguir um acesso leg\u00edtimo ao servi\u00e7o remoto simplesmente em decorr\u00eancia do dispotivo atacado j\u00e1 ter uma sess\u00e3o aberta com esse servi\u00e7o. Dessa forma, o atacante n\u00e3o necessita de saber as credenciais e t\u00eam acesso a outro dispositivo da empresa sem maiores dificuldades. Esse caso se refere a t\u00e9cnica Roubo de Sess\u00e3o de Servi\u00e7os Remotos (T1563).</p> <p>Caso n\u00e3o haja uma sess\u00e3o aberta, o dispoitivo ainda pode ter acesso a conex\u00e3o remota. O atacante pode usar credenciais v\u00e1lidas que ele pode ter adquirido de outra forma e criar uma nova sess\u00e3o ao servi\u00e7o remoto, tendo novamente acesso a outro dispositivo da empresa. Esse caso se refere a t\u00e9cnica Servi\u00e7os Remotos (T1021).</p> <p>Mesmo que o atacante n\u00e3o roube uma sess\u00e3o aberta ou tenha credenciais v\u00e1lidas, o atacante pode explorar vulnerabilidades de servi\u00e7os remotos. Muitas vezes empresas n\u00e3o atualizam seus softwares direito, o que d\u00e1 muita chance aos atacantes de explorar vulnerabilidades conhecidas. Essa \u00e9 uma t\u00e9cnica bem comum para ganhar acesso a servidores, visto que sistemas como SSH, MySQL, RDP e SMB possuem vulnerabilidades bem conhecidas em suas vers\u00f5es menos recentes. Essa caso se refere a t\u00e9cnica Explora\u00e7\u00e3o de Servi\u00e7os Remotos (T1210).</p> <p>Associa\u00e7\u00f5es: - Descoberta de Servi\u00e7os de Rede ou qualquer outro m\u00e9todo da t\u00e1tica de Descobrimento. Usado para descobrir se o sistema invadido possui alguma vulnerabilidade a ser explorada. - Dependendo da criticidade da vulnerabilidade, pode virar uma Explora\u00e7\u00e3o para Escala de Privil\u00e9gios.</p> <p>Ferramentas: - Empire Framework - PoshC2 Framework - net - PsExec - Cobalt Strike - Brute Ratel C4 - Koadic Framework - Pupy - QuasarRAT</p> <p>Exemplos de Procedimentos (T1210): - Explora\u00e7\u00e3o da CVE-2020-1472, referente ao Windows Netlogon, para obter acesso aos servidores do Diret\u00f3rio Ativo do Windows. - Uso da ferramenta Mimikatz para explorar a vulnerabilidade CVE-2020-1472, referente ao Controle de Dom\u00ednio e noramlmente chamada de ZeroLogon. -  Explora\u00e7\u00e3o de uma das v\u00e1rias vulnerabilidades de execu\u00e7\u00e3o de c\u00f3digo remoto em SMB.</p> <p>Preven\u00e7\u00e3o</p> <p>Detec\u00e7\u00e3o</p>"},{"location":"threat_intel/mitre_att%26ck/#traferencia-lateral-de-ferramentas-maliciosas","title":"Trafer\u00eancia Lateral de Ferramentas Maliciosas","text":"<p>Quando um atacante possui um dispositivo com acesso a uma rede interna ou acesso a outros dispositivos, ele pode tentar transferir ferramentas e malwares pela rede para conseguir comprometer mais dispositivos. O outro dispositivo pode receber essas ferramentas via email, pastas compartilhadas, reposit\u00f3rios compartilhados, mensagens, protocolos de transfer\u00eancia e servi\u00e7os remotos. Essa descri\u00e7\u00e3o em geral se refere a t\u00e9cnica Trafer\u00eancia Lateral de Ferramentas (T1570).</p> <p>Quando essa transfer\u00eancia se d\u00e1 atrav\u00e9s de meios f\u00edsicos remov\u00edveis, como inser\u00e7\u00e3o de pendrives maliciosos em sistemas v\u00edtimas, nomeamos a t\u00e9cnica como Replica\u00e7\u00e3o atrav\u00e9s de Dispositivo de M\u00eddia Remov\u00edvel (T1091).</p> <p>Existe a possibilidade da transfer\u00eancia em si n\u00e3o adicionar arquivos, mas modificar arquivos pr\u00e9 existentes, adicionando scripts e metadados maliciosos neles. Isso acontecendo em arquivos dentro de ambientes compartilhados caracteriza a t\u00e9cnica Corromper Conte\u00fado Compartilhado (T1080).</p> <p>Em casos mais espec\u00edficos, o dispositivo roubado pode ter acesso a centros de gerenciamento e distribui\u00e7\u00e3o de software das empresa. O atacante poderia distribuir malware ou ferramentas maliciosas nos centros de distribui\u00e7\u00e3o de software ou poderia lan\u00e7ar atualiza\u00e7\u00f5es maliciosas a todas as m\u00e1quinas do ambiente. Esses casos mais espec\u00edficos s\u00e3o referentes a t\u00e9nica Ferramentas de Entrega de Software (T1072).</p> <p>Associa\u00e7\u00f5es: - Importa\u00e7\u00e3o de Ferramentas - Internal Spear Phishing</p> <p>Ferramentas: - CMD - ftp - PsExec - esentutl - Expand</p> <p>Exemplos de Procedimentos: - Um atacante pode inserir ferramentas maliciosas em pastas compartilhadas com outros usu\u00e1rios da rede interna. - Malware pode ter a capacidade de se replicar atrav\u00e9s de servi\u00e7os remotos utilizando SMB.</p> <p>Detec\u00e7\u00e3o - Monitorar: - Opera\u00e7\u00f5es com arquivos - Acesso ao compartilhamento de rede - Tr\u00e1fego de rede, contando o monitoramento do conte\u00fado e fluxo. - Cria\u00e7\u00e3o e agendamento de processos - Execu\u00e7\u00e3o de comandos.</p> <p>Preven\u00e7\u00e3o: - Firewall. - Ado\u00e7\u00e3o dos Sistemas de Detec\u00e7\u00e3o e Preven\u00e7\u00e3o de Intrus\u00f5es (IPS e IDS) baseados em assinatura.</p>"},{"location":"threat_intel/mitre_att%26ck/#uso-de-material-de-autenticacao-alternativa","title":"Uso de Material de Autentica\u00e7\u00e3o Alternativa","text":"<p>Quando se cria uma conta ou adentra em uma conta ap\u00f3s ter feito login recentemente, \u00e9 poss\u00edvel que o sistema n\u00e3o pe\u00e7a sua senha ou outro fator de autentica\u00e7\u00e3o. Isso \u00e9 feito atrav\u00e9s de uma autentica\u00e7\u00e3o alternativa. \u00c9 poss\u00edvel que uma m\u00e1quina infectada possa utilizar-se dessa autentica\u00e7\u00e3o alternativa para ter acesso a outra conta/dispositivo, a\u00e7\u00e3o referente a t\u00e9cnica Uso de Material de Autentica\u00e7\u00e3o Alternativa (T1550).</p> <p>Antentica\u00e7\u00f5es alternativas podem ser realizadas atrav\u00e9s de diferentes sistemas e materiais. Cada um desses materiais caracteriza uma subt\u00e9cnica da T1550.</p> Material Sub t\u00e9cnica vinculada ID Servi\u00e7o Associado Token de Acesso Application Access Tokens 001 APIs, AWS, Oauth, Docker e muitos outros Hash guardado da senha Pass the Hash 002 Todos os sistemas de autentica\u00e7\u00e3o vulner\u00e1veis a captura / vazamento de hash Ticket Pass the Ticket 003 Todos os sistemas que usam o protocolo Kerberos. Exemplo: Windows Cookie Web Cookie Session 004 Web <p></p> <p>Associa\u00e7\u00f5es:</p> <p>Como a t\u00e9cnica exige que o atacante primeiro consiga o material de autentica\u00e7\u00e3o alternatica, muitos das t\u00e9cnicas associadas s\u00e3o parte da t\u00e1tica Acesso a Credencial</p> <p>Preven\u00e7\u00e3o: - Configura\u00e7\u00e3o decente das aplica\u00e7\u00f5es e diret\u00f3rios ativos em rela\u00e7\u00e3o a autentica\u00e7\u00e3o, gerenciamento de usu\u00e1rios e gerenciamento de usu\u00e1rios privilegiados. - Exigir que o desenvolvedor estude e implemente estrat\u00e9gias de prote\u00e7\u00e3o de material de autentica\u00e7\u00e3o alternativo. - Enrijecer e incentivar pol\u00edticas de senhas seguras ao usu\u00e1rios e conscientiza\u00e7\u00e3o.</p> <p>Detec\u00e7\u00e3o: - Observar as caracter\u00edsticas do sistema e conex\u00e3o que est\u00e3o usando as credenciais. De prefer\u00eancia, utilize os logs da aplica\u00e7\u00e3o/diret\u00f3rio ativo junto para identificar melhor irregularidades na conex\u00e3o e login.</p>"},{"location":"threat_intel/osint/","title":"Ferramentas OSINT","text":"<p>Ferramentas Open Source Intelligence consistem em verdadeiros \"buscadores web especializados\". Eles varrem os dados abertos da internet \u00e0 procura de insights e dados relevantes para a seguran\u00e7a da sua empresa. Procuram desde websites refer\u00eancias at\u00e9 redes sociais. A partir disso, os diferentes buscadores OSINT apresentam funcionalidades diferentes de tratamento dos dados.</p> <p>S\u00e3o ferramentas muito relevantes ao considerarmos o qu\u00e3o abertas as pessoas s\u00e3o sobre os seus dados na internet. \u00c9 comum que as pessoas informem dados pessoais, revelem onde est\u00e3o naquele exato momento e at\u00e9 anunciem conquistas. Esta \u00faltima em espec\u00edfico pode ser muito \u00fatil, j\u00e1 que da mesma forma \u00e9 comum que um golpista fale para algu\u00e9m que foi o respons\u00e1vel por um ataque a partir de um f\u00f3runs. Tamb\u00e9m \u00e9 comum organizar golpes orquestrados por grupos nas redes sociais. Da\u00ed a import\u00e2ncia do OSINT.</p> <p>Existem v\u00e1rias abordagens de ferramentas OSINT usam, j\u00e1 que o termo Open Source Intelligence se refere a procura dos dados abertos, mas n\u00e3o como s\u00e3o tratados. Algumas ferramentas entram em f\u00f3runs e sites de not\u00edcias quentes sobre Cyberseguran\u00e7a pelo mundo e atualizam os clientes sobre os acontecimentos. Algumas outras ferramentas buscam correla\u00e7\u00f5es entre os dados em diferentes plataformas a fim de criar mapear perfis e entidades a fim da internet. No fim, o OSINT quase sempre cair\u00e1 como alguma ferramenta que ir\u00e1 tratar os dados abertos a fim de facilitar a investiga\u00e7\u00e3o da Intelig\u00eancia de Amea\u00e7as.</p>"}]}