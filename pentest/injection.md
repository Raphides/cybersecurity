# Injection Attacks

Ataques de injeção se propõe a inserir código executável e malicioso num sistema não autorizado. São ataques simples de se entender e normalmente são os primeiros ataques os quais qualquer atacante começam a aprender. Em paralelo a isso, também sempre estão entre os ataques mais usados e perigosos contra websites.

Quando nos referimos a injeção, estamos nos referindo a uma série de ataques diferentes, como injeção de scripts (em websites e sistemas) e SQL (em sistemas gerenciadores de banco de dados). Vejamos um pouco mais sobre esses dois ataques:

## Cross Site Script (XSS)

XSS é um ataque de injeção de código Javascript malicioso em um website ou web app. XSS costumam ser ataques simples, mas podem ser bastante elaborados e eficientes quando baseados na análise das tecnologias, códigos e padrões utilizados em um website. Por isso XSS e os demais ataques de injeção continuam como alguns dos ataques mais preocupantes até hoje.


Para o XSS acontecer, precisamos de campos vulneráveis que aceitem a execução de um javascript. Por exemplo: por que não testar se barras de pesquisa aceitam um de HTML? Um `<b>camsa polo</b>` se for interpretado como **camisa polo**, omitindo as tags, pode representar alguma vulnerabilidade. O que impediria de eu inserir um `<script>`? Estude o site, veja se a sua estrutura faz parecer que ele é vulnerável a esse tipo de ataque.

Quer ver na prática ataques XSS? Vá no site Port Swigger e resolva os laboratórios de XSS lá dentro.


### XSS Refletido

É um ataque XSS que visa a injeção de scripts no lado do cliente, enviando a página infectada para algum alvo via phishing.

Voltando ao exemplo da barra de pesquisa, se a pesquisa for feita, como `site.com/search?termo+de+pesquisa`, não seria difícil injetar um script malicioso nessa URL. Por ventura, poderia ser um só uma mudança de background dizendo *Ha! Você foi hackeado*, ou um script que enviasse as informações para alguém.

### XSS Armazenado

É quando injetamos um código malicioso javascript que é armazenado no servidor do website. Normalmente feito através de inputs mal tratados Javascript que vão direto para o servidor. Também pode ser feito através da manipulação de requisições REST HTTP.

É um ataque crítico ao sistema, porque faz com que todos os usuários que acessem o recurso infectado acabem sendo expostos ao ataque.

Como exemplo, imagine um XSS aplicado em um input de comentário. Quando a barra de comentários for carregada para outro usuário, o script malicioso será carregado também.

### XSS DOM

## SQL Injection

SQL é uma lingaugem declarativa de manipulação de banco de dados, muito utilizada por sistemas gerenciadores de bancos de dados (SGBDs). Normalmente SGBDs recebem comandos SQL através de puro texto e isso é perigoso, porque se o programador de um website ou aplicativo com bancos de dados não tratar os inputs do ususário, é possível que os usuários tenham contato direto com consultas em seu SGBD.

Por exemplo, um campo de login precisa ser passado para um SGBD a fim de ter acesso à base de usuários e autenticar o usuário. Pense que o programador usou a seguinte estrutura de comando:

```js
SGBD.new_query("
    SELECT name, password
    FROM USERS
    WHERE name='" + login_field.name + "'
    AND password='"+ login_field.password +"';
");
```